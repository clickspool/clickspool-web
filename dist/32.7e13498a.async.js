(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{MZdZ:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var r=l(a("2/Rp"));a("14J3");var u=l(a("BMrR"));a("jCWc");var i=l(a("kPKH"));a("sPJy");var o=l(a("bE4q"));a("Pwec");var d=l(a("CtXQ"));a("miYZ");var s=l(a("tsqr")),f=l(a("2Taf")),c=l(a("vZ4D")),m=l(a("rlhR")),p=l(a("MhPg")),h=l(a("l4Ni")),y=l(a("ujKo"));a("5NDa");var k,v,g=l(a("5rEg")),C=l(a("WnAZ")),E=a("+n12"),M=a("03io"),b=a("MuoO"),w=n(a("q1tI")),R=l(a("wY1l")),S=a("LLXN"),I=l(a("3a4m")),N=l(a("hNpc")),P=l(a("8vRg"));function J(e){return function(){var t,a=(0,y.default)(e);if(x()){var l=(0,y.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,h.default)(this,t)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}g.default.Search;var B=(k=(0,b.connect)(),k(v=function(e){(0,p.default)(a,e);var t=J(a);function a(e){var l;return(0,f.default)(this,a),l=t.call(this,e),l.state={name:"",keys:[],id:"",isShowTree:!1},l.onClickCommit=l.onClickCommit.bind((0,m.default)(l)),l.onClickCancel=l.onClickCancel.bind((0,m.default)(l)),l}return(0,c.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;(0,M.getList)({page:1,id:t}).then(function(t){t&&!t.code&&e.setState({name:t.data.data[0].name,keys:JSON.parse(t.data.data[0].keys),id:t.data.data[0].id})})}},{key:"onInputChange",value:function(e){this.setState({name:e.target.value})}},{key:"onClickCommit",value:function(){var e=this,t=this.state,a=t.name,l=t.keys,n=t.id,r=this.props.dispatch;if(a&&l.length){var u=JSON.stringify((0,E.splitRoleIds)(l));(0,M.modify)({keys:u,role_id:n,name:a}).then(function(t){t&&!t.code&&(e.onClickCancel(),r({type:"memberInfo/getMemberInfo",payload:{}}))})}else s.default.warning((0,S.formatMessage)({id:"app.role.full"}))}},{key:"onClickCancel",value:function(){I.default.push("/system/role")}},{key:"getRolekeys",value:function(e){var t=this,a=e||[];this.setState({keys:a},function(){0==t.state.keys.length&&t.setState({isShowTree:!0})})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.keys,l=e.isShowTree,n={textAlign:"right",lineHeight:"29px"};return w.default.createElement("div",null,w.default.createElement("div",{className:N.default.breadcrumbBox},w.default.createElement(o.default,null,w.default.createElement(o.default.Item,null,w.default.createElement(d.default,{type:"lock"}),w.default.createElement("span",null,(0,S.formatMessage)({id:"menu.system"}))),w.default.createElement(o.default.Item,null,w.default.createElement(R.default,{to:"/system/role"},(0,S.formatMessage)({id:"app.role.manage-role"}))),w.default.createElement(o.default.Item,null,(0,S.formatMessage)({id:"app.role.eidt-role"})))),w.default.createElement("div",null,w.default.createElement("div",{className:N.default.roleInputBox},w.default.createElement(u.default,null,w.default.createElement(i.default,{span:6},w.default.createElement(i.default,{span:6,style:n},(0,S.formatMessage)({id:"app.role.rolename"}),"\uff1a"),w.default.createElement(i.default,{span:18},w.default.createElement(g.default,{value:t,onChange:this.onInputChange.bind(this)}))))),(a.length>0||l)&&w.default.createElement(P.default,{onCallBack:this.getRolekeys.bind(this),defkeys:a}),w.default.createElement(C.default,{style:{width:"100%"}},w.default.createElement(r.default,{onClick:this.onClickCancel},(0,S.formatMessage)({id:"app.role.cancel"})),w.default.createElement(r.default,{type:"primary",onClick:this.onClickCommit},(0,S.formatMessage)({id:"app.role.ok"})))))}}]),a}(w.PureComponent))||v),D=B;t.default=D}}]);