(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{WCxr:function(e,t,a){e.exports={input_wrap:"antd-pro-pages-operation-users-coinwrap-input_wrap",input_lebal:"antd-pro-pages-operation-users-coinwrap-input_lebal",input_left:"antd-pro-pages-operation-users-coinwrap-input_left",input_lebal_end:"antd-pro-pages-operation-users-coinwrap-input_lebal_end",input_right:"antd-pro-pages-operation-users-coinwrap-input_right"}},Wtv7:function(e,t,a){e.exports={rightPagination:"antd-pro-pages-operation-users-users-rightPagination",breadcrumbBox:"antd-pro-pages-operation-users-users-breadcrumbBox",addBtn:"antd-pro-pages-operation-users-users-addBtn",btnBox:"antd-pro-pages-operation-users-users-btnBox",settingBox:"antd-pro-pages-operation-users-users-settingBox",fr:"antd-pro-pages-operation-users-users-fr",bt10:"antd-pro-pages-operation-users-users-bt10",dengerColor:"antd-pro-pages-operation-users-users-dengerColor",imageWidth:"antd-pro-pages-operation-users-users-imageWidth",aUpload:"antd-pro-pages-operation-users-users-aUpload",aUploadImg:"antd-pro-pages-operation-users-users-aUploadImg",status:"antd-pro-pages-operation-users-users-status","ant-badge-status-dot":"antd-pro-pages-operation-users-users-ant-badge-status-dot",btnSmt:"antd-pro-pages-operation-users-users-btnSmt",avatarPreview:"antd-pro-pages-operation-users-users-avatarPreview",sub_wrap:"antd-pro-pages-operation-users-users-sub_wrap",right_:"antd-pro-pages-operation-users-users-right_",left_:"antd-pro-pages-operation-users-users-left_"}},acYs:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=n(a("W9HT"));a("2qtc");var l=n(a("kLXV"));a("14J3");var s=n(a("BMrR"));a("IzEo");var o=n(a("bx4M"));a("jCWc");var u=n(a("kPKH"));a("DZo9");var d=n(a("8z0m"));a("+L6B");var c=n(a("2/Rp"));a("Pwec");var p=n(a("CtXQ"));a("iQDF");var f=n(a("+eQT"));a("5NDa");var m=n(a("5rEg")),g=n(a("jehZ")),h=n(a("d6i3")),v=n(a("gWZ8")),_=n(a("1l/V")),y=n(a("2Taf")),b=n(a("vZ4D")),E=n(a("rlhR")),M=n(a("MhPg")),k=n(a("l4Ni")),w=n(a("ujKo"));a("y8nQ");var x=n(a("Vl3Y"));a("OaEy");var S=n(a("2fM7")),C=r(a("q1tI")),L=a("MuoO"),I=n(a("wyMu"));a("YQfW");var D,R,N,F,T=n(a("wd/R")),O=n(a("Wwog")),z=n(a("Y+p1")),V=n(a("mwIZ")),Y=a("LLXN"),A=n(a("UbMB")),j=n(a("t1o3")),B=n(a("orAa"));function P(e){return function(){var t,a=(0,w.default)(e);if(q()){var n=(0,w.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,k.default)(this,t)}}function q(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var U=a("xDdU"),H=A.default.bind(j.default),W=(S.default.Option,D=(0,L.connect)(function(e){var t=e.users_info,a=t.loading,n=t.genders,r=t.user_interests,i=t.nation,l=t.videoMap,s=t.messageMap,o=t.voiceMap,u=t.tagsMap,d=e.mcn.list;return{loading:a,genders:n,user_interests:r,nation:i,videoMap:l,messageMap:s,voiceMap:o,tagsMap:u,mcnList:d}}),R=x.default.create(),D(N=R((F=function(e){(0,M.default)(a,e);var t=P(a);function a(e){var n;return(0,y.default)(this,a),n=t.call(this,e),n.state={fields:[{name:"nickname",options:{rules:[{required:!0,message:(0,Y.formatMessage)({id:"app.virtual.accounts.name_required"})},{max:20,message:(0,Y.formatMessage)({id:"app.virtual.accounts.name_verify"})}]},properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.name_placeholder"})},label:(0,Y.formatMessage)({id:"app.settings.basic.nickname"})},{name:"login_account",options:{rules:[{required:!0,message:(0,Y.formatMessage)({id:"app.user_.username"})}]},properties:{placeholder:(0,Y.formatMessage)({id:"app.user_.username"})},label:(0,Y.formatMessage)({id:"app.user_.username"})},{name:"sex",options:{rules:[{required:!0,message:(0,Y.formatMessage)({id:"app.virtual.accounts.gender_required"})}]},properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.gender_placeholder"})},type:"select",optionList:"genders",label:(0,Y.formatMessage)({id:"app.virtual.accounts.gender"})},{name:"birthday",placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.birthday_placeholder"}),options:{rules:[{required:!0,message:(0,Y.formatMessage)({id:"app.virtual.accounts.birthday_required"})}]},type:"date",label:(0,Y.formatMessage)({id:"app.virtual.accounts.birthday"})},{name:"organization_id",options:{},properties:{placeholder:(0,Y.formatMessage)({id:"app.user.mcn.placeholer"})},type:"select",optionList:"mcnList",label:(0,Y.formatMessage)({id:"app.user.mcn"})},{name:"text_price",options:{},properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.recommend.text_price"})},type:"select",optionList:"messageMap",label:(0,Y.formatMessage)({id:"app.virtual.recommend.text_price"})},{name:"video_price",options:{},properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.recommend.video_price"})},type:"select",optionList:"videoMap",label:(0,Y.formatMessage)({id:"app.virtual.recommend.video_price"})},{name:"voice_price",options:{},properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.recommend.voice_price"})},type:"select",optionList:"voiceMap",label:(0,Y.formatMessage)({id:"app.virtual.recommend.voice_price"})},{name:"user_tags",options:{},properties:{mode:"multiple",placeholder:(0,Y.formatMessage)({id:"app.virtual.recommend.tags"})},type:"select",optionList:"tagsMap",label:(0,Y.formatMessage)({id:"app.virtual.recommend.tags"})},{name:"user_interests",options:{},properties:{mode:"multiple",placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.tag_placeholder"}),onChange:function(e){console.log(e,"val,....")}},type:"select",optionList:"user_interests",label:(0,Y.formatMessage)({id:"app.virtual.accounts.tag"})},{name:"nation",options:{},properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.country_placeholder"})},type:"select",optionList:"nation",label:(0,Y.formatMessage)({id:"app.virtual.accounts.country"})},{name:"profile",options:{},properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.brief_placeholder"})},type:"textarea",label:(0,Y.formatMessage)({id:"app.virtual.accounts.brief"})},{name:"avatar",placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.avatar_placeholder"}),options:{rules:[{required:!0,message:(0,Y.formatMessage)({id:"app.virtual.accounts.avatar_required"})}],valuePropName:"fileList",getValueFromEvent:n.normFile},properties:{listType:"picture-card"},type:"upload",label:(0,Y.formatMessage)({id:"app.virtual.accounts.avatar"})},{name:"longitude",properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.longitude_placeholder"}),type:"number"},label:(0,Y.formatMessage)({id:"app.virtual.accounts.longitude"})},{name:"latitude",properties:{placeholder:(0,Y.formatMessage)({id:"app.virtual.accounts.latitude_placeholder"}),type:"number"},label:(0,Y.formatMessage)({id:"app.virtual.accounts.latitude"})}],formItemLayout:{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},matterList:new Map},n.handleOk=function(){var e=n.props,t=e.form,a=t.validateFields,r=t.getFieldsValue,i=(t.getFieldValue,t.resetFields,e.dispatch),l=(e.close,e.record),s=n.state.matterList;a(function(){var e=(0,_.default)(h.default.mark(function e(t){var a,o,u;return h.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return a=r(),o=new FormData,a.recommend_auth&&(a.user_tags||[]).length,Object.keys(a).forEach(function(e){var t=a[e];if(void 0!==t){if("user_interests"==e||"user_tags"==e)return o.append(e,Array.isArray(t)?t.join(","):t);if("birthday"===e)return o.append(e,t instanceof Object?t.format("YYYY-MM-DD"):t);if("multitalingual"===e)return o.append(e,t.join(","));if("object"===typeof t&&t){if(Array.isArray(t)&&t[0].url)return;return o.append(e,t[0].originFileObj,t[0].name)}if("recommend_auth"===e)return o.append(e,+t);o.append(e,t)}}),s.size&&o.append("background",JSON.stringify((0,v.default)(s.values()))),l&&o.append("user_id",l.id),o.append("login_type",l.login_type),console.info("params__",{values:a,params:o,record:l}),e.next=12,i({payload:{params:o},type:"users_info/updateUser"});case 12:u=e.sent,u&&n.handleCancel();case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},n.handleCancel=function(){var e=n.props,t=e.close,a=e.form.resetFields;t(),a()},n.normFile=function(e){return Array.isArray(e)?e:e&&Array.isArray(e.fileList)?"removed"===e.file.status?[]:(n.setState({avatar:window.URL.createObjectURL(e.file.originFileObj)}),e.fileList.slice(-1)):e&&e.fileList},n.preview=function(e){if(e.url)return n.setState({avatar:e.url});n.setState({avatar:window.URL.createObjectURL(e.originFileObj)})},n.crop=function(){var e=n.cropper.current;if(e){var t=n.props.form,a=t.getFieldValue,r=t.setFieldsValue,i=a("avatar");Array.isArray(i)&&(i=i[0]);var l=i.name;e.getCroppedCanvas().toBlob(function(e){console.info("avatarFile__",{avatarFile:i,fileName:l,blobType:e.type,blob:e}),i.type=e.type,i.size=e.size;var t=new File([e],l,{type:e.type});i.originFileObj=t,i.thumbUrl=window.URL.createObjectURL(t),i.url="",i.uid=U(),i.status="new",r({avatar:[i]}),n.setState({avatar:""})})}},n.cancelCrop=function(){n.setState({avatar:""})},n.renderFieldName=function(){(0,E.default)(n);return(0,O.default)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(arguments.length>2&&arguments[2],arguments.length>3&&arguments[3],arguments.length>4&&arguments[4],n.props),r=a.form,i=r.getFieldDecorator,l=(r.setFieldsValue,a.cates,a.id,a.list,n.state),s=(l.fields,l.formItemLayout);"user_interests"==e.name&&t&&t.user_interests&&(e.options.initialValue=t.user_interests.split(",").map(function(e){return+e})),"user_tags"==e.name&&t&&t.user_tags&&(e.options.initialValue=t.user_tags.split(",").map(function(e){return+e})),t&&e.name in t&&"user_interests"!=e.name&&"user_tags"!=e.name&&("upload"===e.type?t[e.name]&&(e.options.initialValue=[{url:t[e.name],name:"".concat(t.nickname,".png"),uid:U()}]):"date"===e.type?e.options.initialValue=""==t[e.name]?null:(0,T.default)(t[e.name],"DD/MM/YYYY"):"nation"===e.name?e.options.initialValue=+t[e.name]:e.options.initialValue=t[e.name]);var o=e.name,u=e.options,h=e.input_type,_=e.placeholder,y=e.label,b=e.type,E=(e.initialValue,e.properties),M=void 0===E?{}:E,k=C.default.createElement(m.default,(0,g.default)({type:h},M)),w=e.optionList;if("string"===typeof w&&(w=n.props[w]||[]),"textarea"===b){var L=m.default.TextArea;k=C.default.createElement(L,M)}if("date"===b&&(k=C.default.createElement(f.default,{className:H("date"),disabledDate:function(e){return e>=new Date}})),"select"===b){var I=S.default.Option,D=(0,v.default)(w).map(function(e){return C.default.createElement(I,{key:e[0],value:e[0]},e[1])});"organization_id"===o?(D=(0,v.default)(w).map(function(e){return C.default.createElement(I,{key:e["id"],value:e["id"]},e["name"])}),k=C.default.createElement(S.default,M,C.default.createElement(I,{key:"0",value:"0"},"\u65e0"),D)):k=C.default.createElement(S.default,M,D)}return"upload"===b&&(u.getValueFromEvent=n.normFile,M.onPreview=n.preview,M.customRequest=function(e){e.file;var t=e.onSuccess;setTimeout(function(){t("ok")},0)},k=C.default.createElement(d.default,M,C.default.createElement(c.default,null,C.default.createElement(p.default,{type:"cloud-upload"})," ",_))),C.default.createElement(x.default.Item,(0,g.default)({key:o},s,{label:y}),i(o,u)(k))},z.default)},n.getMediaMatter=function(e){n.setState(function(t){var a=t.matterList;return a.set(+new Date,e),{matterList:a}})},n.cropper=C.default.createRef(),n}return(0,b.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.record;if(e&&e.background){var t=JSON.parse(e.background),a=new Map;t.map(function(e,t){a.set(t,e)}),this.setState({matterList:a})}}},{key:"render",value:function(){var e=this,t=this.props,a=(t.account,t.visible),n=t.form,r=(n.getFieldDecorator,n.getFieldValue),d=n.getFieldError,c=t.loading,p=t.record,f=this.handleOk,m=this.handleCancel,g=(this.renderFields,this.renderField,this.state),h=g.fields,_=void 0===h?[]:h,y=(g.formItemLayout,g.avatar),b=g.matterList,E=p?(0,Y.formatMessage)({id:"app.virtual.accounts.edit"}):(0,Y.formatMessage)({id:"app.virtual.accounts.add"}),M=_.map(function(t){var a="renderField_".concat(t.name),n=e[a];n||(n=e[a]=e.renderFieldName(t.name));var i,l=d(t.name),s=r(t.name);return"user_interests"===t.name||"user_tags"===t.name||Array.isArray(r(t.name))&&(s=(0,V.default)(r(t.name)[0],"status")),n(t,p,s,l,i)}),k={width:"25%",textAlign:"center",boxShadow:"none",padding:"5px"};return C.default.createElement(C.Fragment,null,C.default.createElement(l.default,{title:E,visible:a,onOk:f,onCancel:m},C.default.createElement(x.default,{autoComplete:"off"},M),C.default.createElement(s.default,null,C.default.createElement(u.default,{span:5},C.default.createElement("p",{className:H("lab")},(0,Y.formatMessage)({id:"app.virtual.recommend.background"}),":")),C.default.createElement(u.default,{span:19},C.default.createElement(o.default,{bordered:!1},!!b.size&&(0,v.default)(b.values()).map(function(t,a){var n=(0,v.default)(b.keys());return C.default.createElement(o.default.Grid,{style:k,key:a},C.default.createElement("div",{className:H("upload_list")},C.default.createElement("div",{className:H("close1"),onClick:function(t){return e.setState(function(e){var t=e.matterList;return t.delete(n[a]),{matterList:t}}),!1}},"X"),1==t.type&&C.default.createElement("div",{className:H("play_icon"),onClick:function(){window.open(t.file,"_blank")}}),C.default.createElement("img",{style:{width:"100%"},src:t.thumbnail,onClick:function(){window.open(t.file,"_blank")}})))}),C.default.createElement(o.default.Grid,{style:k},C.default.createElement(B.default,{callback:this.getMediaMatter})))))),C.default.createElement(l.default,{title:(0,Y.formatMessage)({id:"app.virtual.accounts.avatar_edit"}),onOk:this.crop,onCancel:this.cancelCrop,visible:!!y},C.default.createElement(I.default,{ref:this.cropper,src:y,style:{height:400,width:"100%"},aspectRatio:1,guides:!0})),C.default.createElement("div",{className:H("loading",{hide:!c})},C.default.createElement(i.default,{size:"large"})))}}]),a}(C.default.Component),N=F))||N)||N);t.default=W},dEbH:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=n(a("kLXV")),l=n(a("eHn4"));a("g9YV");var s=n(a("wCAj"));a("DjyN");var o=n(a("NUBc"));a("IzEo");var u=n(a("bx4M"));a("14J3");var d=n(a("BMrR"));a("jCWc");var c=n(a("kPKH"));a("sPJy");var p=n(a("bE4q"));a("Pwec");var f=n(a("CtXQ"));a("+BJd");var m=n(a("mr32"));a("P2fV");var g=n(a("NJEC"));a("+L6B");var h=n(a("2/Rp")),v=n(a("d6i3")),_=n(a("1l/V")),y=n(a("p0pE")),b=n(a("2Taf")),E=n(a("vZ4D")),M=n(a("rlhR")),k=n(a("MhPg")),w=n(a("l4Ni")),x=n(a("ujKo"));a("y8nQ");var S=n(a("Vl3Y"));a("5NDa");var C=n(a("5rEg"));a("iQDF");var L=n(a("+eQT"));a("OaEy");var I=n(a("2fM7")),D=a("ogkD"),R=a("WzQc"),N=a("+n12"),F=n(a("1VNF"));a("Y9L4");var T,O,z,V,Y=n(a("acYs")),A=n(a("mwIZ")),j=a("MuoO"),B=r(a("q1tI")),P=a("LLXN"),q=n(a("LvDl")),U=(n(a("wY1l")),a("fPeI"),n(a("Wtv7")));n(a("e3/Z"));function H(e){return function(){var t,a=(0,x.default)(e);if(W()){var n=(0,x.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,w.default)(this,t)}}function W(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Q=I.default.Option,J=L.default.RangePicker,X=a("wd/R");C.default.Search;function Z(e){return e?parseInt(e||0):0}var K={batchAddVipDay:R.batchAddVipDay,batchAddDiamond:R.batchAddDiamond},G=(T=(0,j.connect)(function(e){var t=e.users,a=t.data,n=a.list,r=a.page,i=a.total_count,l=t.status,s=t.sex,o=t.country,u=t.user_star,d=e.users_info,c=d.userTypesMap,p=d.globalCountryMap,f=e.routing.location.pathname,m=e.memberInfo.data.keys,g=e.mcn.list;return{list:n,page:r,total_count:i,keys:m,pathname:f,status:l,sex:s,country:o,user_star:u,userTypesMap:c,globalCountryMap:p,mcnList:g}}),O=S.default.create(),T(z=O((V=function(e){(0,k.default)(a,e);var t=H(a);function a(e){var n;return(0,b.default)(this,a),n=t.call(this,e),n.SearchResetBtnHandle=function(){n.state.pagination;n.props.form.resetFields(),n.setState({pagination:{page:1,page_size:20,status:"",name:"",user_id:"",sex:"",telephone:"",country:"",begin_time:"",end_time:""}},function(){n.updataConfiList()})},n.SearchBtnHandle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=n.props.dispatch;n.props.form.validateFields(function(e,r){var i=n.state.pagination,l={};if(r.pushtime&&"array"===(0,N.type)(r.pushtime)&&(l={begin_time:X(r.pushtime[0]).format("YYYY-MM-DD")+" 00:00:00",end_time:X(r.pushtime[1]).format("YYYY-MM-DD")+(X(r.pushtime[0]).format("YYYY-MM-DD")==X(r.pushtime[1]).format("YYYY-MM-DD")?" 23:59:59":" 00:00:00")}),delete r["pushtime"],t)return a({type:"users/getList",payload:Object.assign({},i,r,(0,y.default)({export:t,page:1},l))});n.setState({pagination:Object.assign({},i,r,(0,y.default)({page:1},l))},function(){n.updataConfiList()})})},n.onShowSizeChange=function(e,t){var a=n.state.pagination;n.setState({pagination:Object.assign({},a,{page:e,page_size:t})},function(){n.updataConfiList()}),console.log(e,t)},n.handleImgClick=function(e){n.setState({showPreview:!0,previewImg:e})},n.handleCancel=function(){n.setState({showPreview:!1},function(){n.setState({previewImg:""})})},n.validateTel=function(e,t,a){n.props.form;var r=/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/;t&&!r.test(t)?a((0,P.formatMessage)({id:"app.feedback.pleaseRightPhone"})):a()},n.operationStar=function(e,t){(0,R.setUserStar)({user_id:e,user_star:~~t?"0":"1"}).then(function(e){n.updataConfiList()})},n.batchSetIdentity=function(e){var t=e.id,a=e.action,r=n.props.dispatch;r({type:"users_info/batchSetIdentity",payload:{user_ids:t+"",identity:32,action:a}}).then(function(){n.updataConfiList()})},n.updateBackgroundTime=function(e){var t=n.props.dispatch;t({type:"users_info/updateBackgroundTime",payload:{user_id:e}}).then(function(){n.updataConfiList()})},n.updateLastActiveAt=function(e){var t=n.props.dispatch;t({type:"users_info/updateLastActiveAt",payload:{user_id:e}}).then(function(){n.updataConfiList()})},n.state={pagination:{page_size:20,page:1,total_count:e.total_count},addVisible:!1,editVisible:!1,editDataSource:{},showPreview:!1,previewImg:"",showModal:0,user_ids:"",showShard:!1,disbShard:!0,images:[],captions:[],photoIndex:0,isOpen:!1,showEdit:!1,editRecord:{}},q.default.bindAll((0,M.default)(n),["updataConfiList","SearchBtnHandle","SearchResetBtnHandle","addVisbleHandle","handleTableChange","delRole","onCloseEditModel","userEdit"]),n}return(0,E.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.getEnumList().then(function(){e.updataConfiList()})}},{key:"getEnumList",value:function(){var e=(0,_.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"permission/getRoleList"});case 3:return e.next=5,t({type:"permission/getMemberStatusList"});case 5:t({type:"users/getUserSexList"}),t({type:"users/getCountryList"}),t({type:"users_info/getUserTypesMap"}),t({type:"users_info/getGlobalCountryMap"});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updataConfiList",value:function(){var e=this.props.dispatch,t=this.state.pagination;e({type:"users/getList",payload:t})}},{key:"addVisbleHandle",value:function(e){var t=this;this.setState({addVisible:!this.state.addVisible},function(){"refresh"===e&&t.updataConfiList()})}},{key:"handleTableChange",value:function(e){var t=this,a=this.state.pagination;this.setState({pagination:Object.assign({},a,{page:e})},function(){t.updataConfiList()})}},{key:"delRole",value:function(e){var t=this;(0,D.del)({id:e}).then(function(e){e.code||t.updataConfiList()}).catch(function(e){console.log(e)})}},{key:"userEdit",value:function(e){var t=this;this.setState({editDataSource:e},function(){t.onCloseEditModel()})}},{key:"onCloseEditModel",value:function(e){var t=this;this.setState({editVisible:!this.state.editVisible},function(){"refresh"===e&&t.updataConfiList()})}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=(t.page,t.total_count),r=(t.roleList,t.keys,t.pathname,t.form.getFieldDecorator),v=(t.status,t.sex),_=(t.country,t.userTypesMap),y=t.globalCountryMap,b=void 0===y?[]:y,E=t.mcnList,M=this.state,k=(M.addVisible,M.editVisible,M.editDataSource,M.showModal),w=M.user_ids,x=M.user_ids_,L=M.showShard,D=M.disbShard,N=M.isOpen,T=M.images,O=M.photoIndex,z=M.captions,V=this.onShowSizeChange,j=this.handleImgClick,q=this.updataConfiList,H=this,W=[{title:(0,P.formatMessage)({id:"app.user_.operation"}),dataIndex:"operation",key:"operation",width:"180px",fixed:"right",render:function(e,t){return B.default.createElement(B.default.Fragment,null,B.default.createElement(g.default,{title:"\u786e\u5b9a".concat(0==t.recommend_block?"\u6dfb\u52a0\u81f3\u9ed1\u540d\u5355":"\u79fb\u51fa\u9ed1\u540d\u5355","\uff1f"),onConfirm:function(){(0,R.setUserRecBlackList)({action:0==t.recommend_block?"add":"remove",user_id:t.id}).then(function(e){q()})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},B.default.createElement(h.default,{type:0==t.recommend_block?"danger":"primary",size:"small",style:{marginLeft:"8px"}},0==t.recommend_block?"\u6dfb\u52a0\u81f3\u9ed1\u540d\u5355":"\u79fb\u51fa\u9ed1\u540d\u5355")),B.default.createElement(g.default,{title:"\u786e\u5b9a".concat(0==t.is_mcn?"\u8bbe\u7f6e\u8fbe\u4eba":"\u53d6\u6d88\u8fbe\u4eba","\uff1f"),onConfirm:function(){(0,R.batchSetMcnOrRobot)({action:0==t.is_mcn?"add":"remove",user_ids:t.id,task_object:"mcn"}).then(function(e){q()})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},B.default.createElement(h.default,{type:0==t.is_mcn?"primary":"danger",size:"small",style:{marginLeft:"8px",marginTop:"4px"}},0==t.is_mcn?"\u8bbe\u7f6e\u8fbe\u4eba":"\u53d6\u6d88\u8fbe\u4eba")),B.default.createElement("br",null),B.default.createElement(h.default,{type:"primary",size:"small",style:{marginLeft:"8px",marginTop:"4px"},onClick:function(){H.setState({editRecord:t},function(){H.setState({showEdit:!0})})}},"\u7f16\u8f91"))}}],X=[{title:(0,P.formatMessage)({id:"app.user_.user_id"}),dataIndex:"id",key:"id"},{title:(0,P.formatMessage)({id:"app.user_.nick_id"}),dataIndex:"nick_id",key:"nick_id"},{title:"\u6635\u79f0",dataIndex:"nickname",key:"nickname"},{title:(0,P.formatMessage)({id:"app.user_.avatar"}),dataIndex:"avatar",key:"avatar",align:"center",render:function(e){return B.default.createElement("img",{src:"".concat(e,"?x-oss-process=image/resize,w_80"),style:{width:"80px",height:"80px",borderRadius:"100%"},onClick:function(){j(e)}})}},{title:"\u80cc\u666f\u5899",dataIndex:"background_count",key:"background_count",align:"center",render:function(e,t){return B.default.createElement(B.default.Fragment,null,B.default.createElement(m.default,{color:0==e?"grey":"green",style:0==e?{}:{cursor:"pointer"},onClick:function(){if(console.log(1111),e){var a=[],n=[];t.background_list.map(function(e,t){a.push(e.thumbnail),n.push(1==e.type?B.default.createElement(B.default.Fragment,null,B.default.createElement(m.default,{color:"green",onClick:function(){window.open(e.file)}},"\u89c6\u9891"),B.default.createElement("a",{href:e.file,target:"_blank"},e.file)):B.default.createElement(B.default.Fragment,null,B.default.createElement(m.default,{color:"#6656F5",onClick:function(){window.open(e.file)}},"\u56fe\u7247"),B.default.createElement("a",{href:e.file,target:"_blank"},e.file)))}),H.setState({images:a,captions:n},function(){H.setState({isOpen:!0})})}}},0==e?"\u6ca1\u6709\u7167\u7247\u5899":"\u7167\u7247\u5899\u6570".concat(e)),!!e&&B.default.createElement(h.default,{size:"small",type:"primary",style:{marginTop:"5px"},onClick:function(){H.updateBackgroundTime(t.id)}},"\u5237\u65b0\u7167\u7247\u5899"))}},{title:"\u591c\u573a\u4e3b\u64ad",dataIndex:"is_night_girl",render:function(e,t){return B.default.createElement(g.default,{title:e?"\u53d6\u6d88\u591c\u573a\u4e3b\u64ad":"\u8bbe\u7f6e\u4e3a\u591c\u573a\u4e3b\u64ad",okText:(0,P.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,P.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:function(){H.batchSetIdentity({id:t.id,action:e?"remove":"add"})}},B.default.createElement(h.default,{size:"small",type:"".concat(e?"danger":"primary")},e?"\u53d6\u6d88\u591c\u573a\u4e3b\u64ad":"\u8bbe\u7f6e\u4e3a\u591c\u573a\u4e3b\u64ad"))}},{title:"\u662f\u5426\u662f\u8fbe\u4eba",dataIndex:"is_mcn",key:"is_mcn",align:"center",render:function(e){return B.default.createElement(m.default,{color:0==e?"grey":"green"},0==e?"\u975e\u8fbe\u4eba\u8d26\u53f7":"\u8fbe\u4eba\u8d26\u53f7")}},{title:(0,P.formatMessage)({id:"app.user.mcn"}),dataIndex:"organization_id",key:"organization_id",align:"center",render:function(e){return B.default.createElement("div",null,(0,A.default)(E.find(function(t){return t.id==e}),"name"))}},{title:(0,P.formatMessage)({id:"app.virtual.account.type"}),dataIndex:"login_type",key:"login_type",render:function(e){return _?_[+e]:""}},{title:(0,P.formatMessage)({id:"app.user_.username"}),dataIndex:"login_account",align:"center"},{title:(0,P.formatMessage)({id:"app.user_.sex"}),dataIndex:"sex",key:"sex",align:"center",render:function(e){return v[e]}},{title:(0,P.formatMessage)({id:"app.user_.age"}),dataIndex:"age",align:"center",key:"age"},{title:(0,P.formatMessage)({id:"app.user_.area"}),dataIndex:"nation",key:"nation",render:function(e){return!!b.length&&(b.find(function(t){return t.id==e})||{}).name}},{title:(0,P.formatMessage)({id:"app.user_.diamond"}),dataIndex:"diamond",key:"diamond",align:"center"},{title:"\u788e\u94bb\u6570",dataIndex:"diamond_shard",key:"diamond_shard",align:"center"},{title:(0,P.formatMessage)({id:"app.user_.x_coin"}),dataIndex:"x_coin",key:"x_coin",align:"center"},{title:(0,P.formatMessage)({id:"app.user_.last_active_at"}),dataIndex:"last_active_at",key:"last_active_at",align:"center",render:function(e,t){return B.default.createElement(B.default.Fragment,null,B.default.createElement("p",null,e),B.default.createElement(h.default,{size:"small",type:"primary",style:{marginTop:"5px"},onClick:function(){H.updateLastActiveAt(t.id)}},"\u5237\u65b0\u6d3b\u8dc3\u65f6\u95f4"))}},{title:(0,P.formatMessage)({id:"app.user_.time"}),dataIndex:"time",key:"time",align:"center",render:function(e,t){return B.default.createElement(B.Fragment,null,B.default.createElement("p",null,(0,P.formatMessage)({id:"app.seed.update_at"}),": ",t.update_at),B.default.createElement("p",null,(0,P.formatMessage)({id:"app.scene.tools.create_time"}),": ",t.create_at))}}].concat(W);return B.default.createElement(B.default.Fragment,null,B.default.createElement("style",null,"\n            .status-badge .ant-badge-status-dot{\n                height:8px;\n                width:8px\n            }\n              .regDate .ant-calendar-picker{\n                width:100%;\n              }\n            .sup-required{\n                color:#f5222d;\n                margin-right:2px;\n            }\n            .web .ant-modal{\n                width:auto !important\n            }\n            .web .ant-modal .ant-modal-body{\n                padding:16px !important;\n            }\n            .public-DraftStyleDefault-block{\n                margin:0;\n            }\n            "),B.default.createElement("div",{className:U.default.breadcrumbBox},B.default.createElement(p.default,null,B.default.createElement(p.default.Item,null,B.default.createElement(f.default,{type:"lock"}),B.default.createElement("span",null,(0,P.formatMessage)({id:"menu.operation"}))),B.default.createElement(p.default.Item,null,(0,P.formatMessage)({id:"menu.operation.user"})),B.default.createElement(p.default.Item,null,(0,P.formatMessage)({id:"menu.operation.user.list"})))),B.default.createElement("div",{className:U.default.addBtn},B.default.createElement(u.default,{title:(0,P.formatMessage)({id:"menu.operation.user.list"}),className:U.default.card,bordered:!0},B.default.createElement(S.default,{layout:"vertical",hideRequiredMark:!0},B.default.createElement(d.default,{gutter:16},B.default.createElement(c.default,{lg:3,md:12,sm:24},B.default.createElement(S.default.Item,{label:(0,P.formatMessage)({id:"app.user_.user_id"})},r("user_id")(B.default.createElement(C.default,{placeholder:(0,P.formatMessage)({id:"app.users.pleaseID"})})))),B.default.createElement(c.default,{lg:3,md:12,sm:24},B.default.createElement(S.default.Item,{label:(0,P.formatMessage)({id:"app.user_.nick_id"})},r("nick_id")(B.default.createElement(C.default,{placeholder:(0,P.formatMessage)({id:"app.user_.p_nick_id"})})))),B.default.createElement(c.default,{lg:3,md:12,sm:24},B.default.createElement(S.default.Item,{label:(0,P.formatMessage)({id:"app.virtual.account.type"})},r("login_type",{initialValue:""})(B.default.createElement(I.default,null,B.default.createElement(Q,{value:""},(0,P.formatMessage)({id:"app.virtual.account.allType"})),Object.keys(_).map(function(e){return B.default.createElement(Q,{key:e,value:e},_[e])}))))),B.default.createElement(c.default,{lg:3,md:12,sm:24},B.default.createElement(S.default.Item,{label:(0,P.formatMessage)({id:"app.users.sex"})},r("sex",{initialValue:""})(B.default.createElement(I.default,null,B.default.createElement(Q,{value:""},(0,P.formatMessage)({id:"app.users.allSex"})),Object.keys(v).map(function(e){return B.default.createElement(Q,{key:e,value:e},v[e])}))))),B.default.createElement(c.default,{lg:3,md:12,sm:24},B.default.createElement(S.default.Item,{label:"\u9ed1\u540d\u5355\u7528\u6237"},r("recommend_block")(B.default.createElement(I.default,{placeholder:"\u8bf7\u9009\u62e9"},B.default.createElement(Q,{value:"0"},"\u975e\u9ed1\u540d\u5355\u7528\u6237"),B.default.createElement(Q,{value:"1"},"\u9ed1\u540d\u5355\u7528\u6237"))))),B.default.createElement(c.default,{lg:4,md:12,sm:24},B.default.createElement(S.default.Item,{label:"\u8fbe\u4eba\u8d26\u6237"},r("is_mcn")(B.default.createElement(I.default,{placeholder:"\u8bf7\u9009\u62e9"},B.default.createElement(Q,{value:"0"},"\u975e\u8fbe\u4eba\u8d26\u6237"),B.default.createElement(Q,{value:"1"},"\u8fbe\u4eba\u8d26\u6237"))))),B.default.createElement(c.default,{lg:4,md:12,sm:24},B.default.createElement(S.default.Item,{label:(0,P.formatMessage)({id:"app.user.mcn"})},r("organization_id")(B.default.createElement(I.default,{placeholder:(0,P.formatMessage)({id:"app.user.mcn.placeholer"})},E.map(function(e){return B.default.createElement(Q,{key:e.id,value:e.id},e.name)}))))),B.default.createElement(c.default,{lg:4,md:12,sm:24},B.default.createElement(S.default.Item,{label:"\u662f\u5426\u6709\u80cc\u666f\u5899"},r("have_background")(B.default.createElement(I.default,{placeholder:"\u8bf7\u9009\u62e9"},B.default.createElement(Q,{value:"0"},"\u5426"),B.default.createElement(Q,{value:"1"},"\u662f"))))),B.default.createElement(c.default,{span:12},B.default.createElement(S.default.Item,{label:(0,P.formatMessage)({id:"app.user_.register_time"})},r("pushtime")(B.default.createElement(J,{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",placeholder:[(0,P.formatMessage)({id:"app.matters.create_at_start"}),(0,P.formatMessage)({id:"app.matters.create_at_end"})],style:{width:"100%"},onChange:this.changeTimePicked})))),B.default.createElement(c.default,{lg:6,md:12,sm:24},B.default.createElement(h.default,{type:"primary",className:U.default.btnSmt,onClick:this.SearchBtnHandle},(0,P.formatMessage)({id:"app.content.search"})),B.default.createElement(h.default,{type:"primary",className:U.default.btnSmt,onClick:function(t){e.SearchBtnHandle(t,1)},style:{marginLeft:8}},(0,P.formatMessage)({id:"app.content.export"})),B.default.createElement(h.default,{className:U.default.btnSmt,style:{marginLeft:8},onClick:this.SearchResetBtnHandle},(0,P.formatMessage)({id:"app.content.reset"}))))))),B.default.createElement("div",{className:U.default.sub_wrap},B.default.createElement("div",{className:U.default.left_},B.default.createElement(h.default,{disabled:0==k,type:"primary",size:"small",onClick:function(){e.setState({showModal:1})}},"\u6279\u91cf\u589e\u52a0\u94bb\u77f3"),B.default.createElement(h.default,{disabled:0==k,type:"primary",size:"small",onClick:function(){e.setState({showModal:2})}},"\u6279\u91cf\u8bbe\u7f6e\u4e3avip"),B.default.createElement(g.default,{title:"\u786e\u5b9a\u6279\u91cf\u8bbe\u7f6e\u8fbe\u4eba\uff1f",onConfirm:function(){(0,R.batchSetMcnOrRobot)({action:"add",user_ids:x,task_object:"mcn"}).then(function(e){H.updataConfiList(),H.setState({showModal:0,user_ids:"",user_ids_:"",disbShard:!0})})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},B.default.createElement(h.default,{style:{marginLeft:8},disabled:0==k,type:"primary",size:"small"},"\u6279\u91cf\u8bbe\u7f6e\u4e3a\u8fbe\u4eba\u8d26\u6237")),B.default.createElement(g.default,{title:"\u786e\u5b9a\u6279\u91cf\u8bbe\u7f6e\u4e3a\u673a\u5668\u4eba\uff1f",onConfirm:function(){(0,R.batchSetMcnOrRobot)({action:"add",user_ids:x,task_object:"robot"}).then(function(e){H.updataConfiList(),H.setState({showModal:0,user_ids:"",user_ids_:"",disbShard:!0})})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},B.default.createElement(h.default,{style:{marginLeft:8},disabled:0==k,type:"primary",size:"small"},"\u6279\u91cf\u8bbe\u7f6e\u4e3a\u673a\u5668\u4eba\u8d26\u6237")),B.default.createElement(h.default,{disabled:D,type:"primary",size:"small",onClick:function(){e.setState({showShard:!0})}},"\u6279\u91cf\u589e\u52a0\u788e\u94bb")),B.default.createElement("div",{className:U.default.right_},B.default.createElement(o.default,{showTotal:function(e){return(0,P.formatMessage)({id:"app.glob.pagetotal"},{total:e})},pageSizeOptions:["20","30","40"],showSizeChanger:!0,onShowSizeChange:V,current:Z(this.state.pagination.page),pageSize:this.state.pagination.page_size,onChange:this.handleTableChange,total:Z(n),size:"small"}))),B.default.createElement(s.default,(0,l.default)({rowSelection:{onChange:function(t,a){console.log(t,"selectedRowKeys",a),e.setState({user_ids:"".concat(t.join(",")),showModal:0==a.length?0:3,user_ids_:a.map(function(e){return e.id}).join(","),disbShard:!a.length})},selectedRowKeys:w.split(",")},rowKey:"id",columns:X,dataSource:a,pagination:!1,bordered:!0,scroll:{x:3e3}},"rowKey",function(e,t){return"".concat(e.id).concat(t)})),B.default.createElement("div",{className:U.default.rightPagination},B.default.createElement(o.default,{showTotal:function(e){return(0,P.formatMessage)({id:"app.glob.pagetotal"},{total:e})},pageSizeOptions:["20","30","40"],showSizeChanger:!0,onShowSizeChange:V,current:Z(this.state.pagination.page),pageSize:this.state.pagination.page_size,onChange:this.handleTableChange,total:Z(n),size:"small"})),B.default.createElement(i.default,{title:"\u589e\u52a0\u788e\u94bb",visible:L,onOk:function(){(0,R.batchAddDiamondShard)({user_ids:e.state.user_ids_,num:H.setNumInputShrd.input.value}).then(function(e){H.setNumInputShrd.input.value="",H.updataConfiList(),H.setState({showShard:!1,user_ids:"",user_ids_:"",disbShard:!0,showModal:0})})},onCancel:function(){H.setState({showShard:!1})},okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88"},L&&B.default.createElement(C.default,{ref:function(t){return e.setNumInputShrd=t},placeholder:"\u8bf7\u8f93\u5165\u788e\u94bb\u77f3",addonAfter:"\u788e\u94bb"})),B.default.createElement(i.default,{title:1==k?"\u589e\u52a0\u94bb\u77f3":2==k?"\u8bbe\u7f6evip":"",visible:2==k||1==k,onOk:function(){K[2==k?"batchAddVipDay":"batchAddDiamond"]((0,l.default)({user_ids:e.state.user_ids_},2==k?"day_num":"num",H.setNumInput.input.value)).then(function(e){H.setNumInput.input.value="",H.updataConfiList(),H.setState({showModal:0,user_ids:"",user_ids_:"",disbShard:!0})})},onCancel:function(){H.setState({showModal:3})},okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88"},(1==k||2==k)&&B.default.createElement(C.default,{ref:function(t){return e.setNumInput=t},placeholder:1==k?"\u8bf7\u8f93\u5165\u94bb\u77f3\u6570":2==k?"\u8bf7\u8f93\u5165vip\u5929\u6570":"",addonAfter:1==k?"\u94bb\u77f3":2==k?"\u5929":""})),B.default.createElement(i.default,{title:null,visible:this.state.showPreview,onCancel:this.handleCancel,footer:null,closable:!1,centered:!0,maskClosable:!0,wrapClassName:"web"},B.default.createElement("div",{className:"outer-iframe"},B.default.createElement("div",{className:"d-iframe"},!this.state.previewImg&&"loading...",!!this.state.previewImg&&B.default.createElement("img",{src:this.state.previewImg})))),N&&B.default.createElement(F.default,{mainSrc:T[O],nextSrc:T[(O+1)%T.length],prevSrc:T[(O+T.length-1)%T.length],onCloseRequest:function(){return e.setState({isOpen:!1,photoIndex:0})},onMovePrevRequest:function(){return e.setState({photoIndex:(O+T.length-1)%T.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(O+1)%T.length})},imageCaption:z[H.state.photoIndex]}),this.state.showEdit&&B.default.createElement(Y.default,{visible:this.state.showEdit,record:this.state.editRecord,close:function(){e.setState({showEdit:!1},function(){e.updataConfiList()})}}))}}]),a}(B.PureComponent),z=V))||z)||z),$=G;t.default=$},"e3/Z":function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=u,a("5NDa");var r=n(a("5rEg"));a("OaEy");var i=n(a("2fM7")),l=n(a("q1tI")),s=n(a("WCxr")),o=i.default.Option;function u(e){var t=l.default.createElement(i.default,{defaultValue:"1",style:{width:90}},l.default.createElement(o,{value:"1"},"+"),l.default.createElement(o,{value:"0"},"-")),a=[{name:"clickspool\u5e01"},{name:"\u94bb\u77f3"}];return l.default.createElement(l.default.Fragment,null,a.map(function(e,a){return l.default.createElement("div",{className:s.default.input_wrap,key:a},l.default.createElement("div",{className:s.default.input_lebal},e.name,"\uff1a"),l.default.createElement("div",{className:s.default.input_left},l.default.createElement(r.default,{value:111,disabled:!0})),l.default.createElement("div",{className:s.default.input_right},l.default.createElement(r.default,{addonBefore:t,value:"mysite"})),l.default.createElement("div",{className:s.default.input_lebal_end},"=\t4000"))}))}},t1o3:function(e,t,a){e.exports={date:"antd-pro-pages-operation-users-account-edit-date",loading:"antd-pro-pages-operation-users-account-edit-loading",hide:"antd-pro-pages-operation-users-account-edit-hide",upload_list:"antd-pro-pages-operation-users-account-edit-upload_list",close1:"antd-pro-pages-operation-users-account-edit-close1",play_icon:"antd-pro-pages-operation-users-account-edit-play_icon",lab:"antd-pro-pages-operation-users-account-edit-lab"}}}]);