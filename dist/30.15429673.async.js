(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"+QyX":function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("2Taf")),i=n(a("vZ4D")),r=function(){function e(t,a){return(0,l.default)(this,e),this.getFileType=function(e){var t=e.split("."),a="";return void 0!=t&&(t.length<=1&&e.indexOf("=")>-1?(console.log("\u8f93\u5165\u662f\u6587\u4ef6\u5730\u5740\uff1a",t),!1):(a=t[t.length-1],a=a.toLowerCase(),a))},this.video=document.createElement("video"),this.video.preload="metadata",this.video.src=URL.createObjectURL(t),this.init(t,a)}return(0,i.default)(e,[{key:"init",value:function(e,t){var a=this;return new Promise(function(n,l){var i=a.fileLengthFormat(e.size,t),r=a.getFileType(e.name);"mp4"===r?a.video.onloadedmetadata=function(){window.URL.revokeObjectURL(a.video.src);var t=a.video.duration;n({file:e,size:i,duration:t,weight_high:"".concat(a.video.videoWidth,",").concat(a.video.videoHeight)})}:n({file:e,fileSize:fileSize,duration:0,type:r,height:a.video.videoHeight,width:a.video.videoWidth})})}},{key:"fileLengthFormat",value:function(e,t){var a,n=e/1024;if(n>1e3)return this.fileLengthFormat(n,++t);switch(t){case 1:a=n.toFixed(2);break;case 2:a=n.toFixed(2);break;case 3:a=n.toFixed(2);break;case 4:a=n.toFixed(2);break}return+a}}]),e}(),o=r;t.default=o},"1y1O":function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("2Taf")),i=n(a("vZ4D")),r=function(){function e(t){(0,l.default)(this,e),this.getImgWidth=function(e){return new Promise(function(t,a){var n=new FileReader;n.onload=function(a){var n=new Image;n.onload=function(){var a=n.width,l=n.height;t({file:e,weight_high:"".concat(a,",").concat(l)})},n.src=a.target.result},n.readAsDataURL(e)})}}return(0,i.default)(e,[{key:"getURLImgBase64",value:function(e){return new Promise(function(t,a){var n=new Image,l="";n.setAttribute("crossOrigin","anonymous"),n.src=e,n.onload=function(){var e=document.createElement("canvas"),a=n.width,i=n.height;e.width=a,e.height=i,e.getContext("2d").drawImage(n,0,0,a,i),l=e.toDataURL("image/png"),t([l,a,i])}})}}]),e}(),o=r;t.default=o},"9EIe":function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("miYZ");var i=n(a("tsqr"));a("g9YV");var r=n(a("wCAj"));a("P2fV");var o=n(a("NJEC"));a("+BJd");var u=n(a("mr32"));a("IzEo");var d=n(a("bx4M"));a("14J3");var s=n(a("BMrR"));a("+L6B");var c=n(a("2/Rp"));a("jCWc");var f=n(a("kPKH")),m=n(a("2Taf")),p=n(a("vZ4D")),g=n(a("rlhR")),_=n(a("MhPg")),v=n(a("l4Ni")),h=n(a("ujKo"));a("OaEy");var y=n(a("2fM7"));a("y8nQ");var E=n(a("Vl3Y"));a("5NDa");var b,C,k,O,w=n(a("5rEg")),M=l(a("q1tI")),S=a("MuoO"),x=n(a("71zH")),j=a("LLXN"),R=(n(a("3a4m")),n(a("xkPr")));function T(e){return function(){var t,a=(0,h.default)(e);if(P()){var n=(0,h.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,v.default)(this,t)}}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}w.default.Search,E.default.Item,w.default.TextArea;var L=y.default.Option,I=(b=E.default.create(),C=(0,S.connect)(function(e){var t=e.virtualApply,a=t.filter,n=t.list,l=t.commonStatusMap;return{filter:a,list:n,commonStatusMap:l}}),b(k=C((O=function(e){(0,_.default)(a,e);var t=T(a);function a(e){var n;return(0,m.default)(this,a),n=t.call(this,e),n.changeFilter=function(e){var t=n.props.dispatch;return new Promise(function(a){t({type:"virtualApply/filter",payload:{filter:e}}),a()})},n.fetch=function(e){var t=n.props.dispatch;n.changeFilter(e).then(function(){t({type:"virtualApply/fetch"})})},n.onEdit=function(e){n.setState({detail:e||{}},function(){n.setState({showModel:!0})})},n.onClose=function(){n.setState({showModel:!1})},n.onDel=function(e){var t=n.props.dispatch;t({type:"virtualApply/del",payload:{id:e}})},n.onReset=function(){var e=n.props.form.resetFields;e(),n.onSearch()},n.onSearch=function(){var e=n.props.form.validateFields;e(function(e,t){n.fetch(t)})},n.SearchBar=function(){var e=(0,g.default)(n),t=e.props,a=t.form.getFieldDecorator,l=t.commonStatusMap,i=e.onSearch,r=e.onEdit,o=e.onReset;return M.default.createElement(d.default,{className:"styles-card",bordered:!0},M.default.createElement(E.default,null,M.default.createElement(s.default,{gutter:16,className:"regDate"},M.default.createElement(f.default,{lg:6,md:12,sm:24},M.default.createElement(E.default.Item,{label:"ID"},a("id")(M.default.createElement(w.default,{placeholder:(0,j.formatMessage)({id:"app.applyNew.pid"})})))),M.default.createElement(f.default,{lg:6,md:12,sm:24},M.default.createElement(E.default.Item,{label:(0,j.formatMessage)({id:"app.applyNew.title"})},a("title")(M.default.createElement(w.default,{placeholder:(0,j.formatMessage)({id:"app.applyNew.title"})})))),M.default.createElement(f.default,{lg:6,md:12,sm:24},M.default.createElement(E.default.Item,{label:(0,j.formatMessage)({id:"app.applyNew.robot_id"})},a("robot_id")(M.default.createElement(w.default,{placeholder:(0,j.formatMessage)({id:"app.applyNew.robot_id"})})))),M.default.createElement(f.default,{lg:6,md:12,sm:24},M.default.createElement(E.default.Item,{label:(0,j.formatMessage)({id:"app.activity.status"})},a("status")(M.default.createElement(y.default,{placeholder:(0,j.formatMessage)({id:"app.activity.status"})},Object.keys(l).map(function(e,t){return M.default.createElement(L,{value:e,key:t},l[e])}))))),M.default.createElement(f.default,{lg:6,md:12,sm:24},M.default.createElement(c.default,{type:"primary",onClick:i},(0,j.formatMessage)({id:"app.content.search"})),M.default.createElement(c.default,{style:{marginLeft:8},onClick:function(){o()}},"\u91cd\u7f6e"),M.default.createElement(c.default,{style:{marginLeft:8},onClick:function(){r()}},"\u65b0\u589e")))))},n.TableList=function(){var e=n.props,t=e.list,a=e.filter,l=e.commonStatusMap,i=e.dispatch,d=(0,g.default)(n),s=d.onDel,f=d.onEdit,m=[{title:"ID",dataIndex:"id",key:"id",align:"center"},{title:(0,j.formatMessage)({id:"app.applyNew.title"}),dataIndex:"title",key:"title",align:"center"},{title:(0,j.formatMessage)({id:"app.applyNew.robot_id"}),dataIndex:"robot_id",key:"robot_id",align:"center"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",align:"center",render:function(e){return M.default.createElement(u.default,{color:1==e?"green":"grey"},l[e])}},{title:"\u64cd\u4f5c",dataIndex:"active",key:"active",align:"center",render:function(e,t){return M.default.createElement(M.default.Fragment,null,M.default.createElement(o.default,{title:"\u786e\u5b9a\u662f\u5426".concat(0==t.status?"\u4e0a\u67b6":"\u4e0b\u67b6","\uff1f"),onConfirm:function(){i({type:"virtualApply/SetStatus",payload:{id:t.id,status:+!+t.status}})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},M.default.createElement(c.default,{type:0==t.status?"green":"danger",size:"small",style:{marginLeft:"8px"}},0==t.status?"\u4e0a\u67b6":"\u4e0b\u67b6")),M.default.createElement(c.default,{type:"primary",size:"small",onClick:function(){f(t)},style:{marginLeft:"8px"}},"\u7f16\u8f91"),M.default.createElement(o.default,{title:"\u786e\u5b9a\u5220\u9664\uff1f",onConfirm:s.bind(this,t.id),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},M.default.createElement(c.default,{type:"danger",size:"small",style:{marginLeft:"8px"}},"\u5220\u9664")))}}];return M.default.createElement(r.default,{columns:m,dataSource:t,align:"center",bordered:!0,scroll:{x:!0},rowKey:function(e,t){return"".concat(e.id).concat(t)},pagination:{position:"both",pageSize:a.page_size,showSizeChanger:!0,pageSizeOptions:["20","30","40"],onShowSizeChange:n.onShowSizeChange,total:a.total,current:a.page,showTotal:function(e){return(0,j.formatMessage)({id:"app.glob.pagetotal"},{total:a.total})},size:"small",onChange:n.onShowSizeChange}})},n.onShowSizeChange=function(e,t){fetch({page:e,page_size:t})},n.onUpload=function(e){0==e.code?console.log(e,"onUpload opt"):i.default.info(e.msg)},n.state={showModel:!1,detail:{}},n}return(0,p.default)(a,[{key:"render",value:function(){var e=this.TableList,t=this.SearchBar,a=(this.onUpload,this.url,[{icon:"desktop",title:"\u8fd0\u8425\u7ba1\u7406"},{icon:"robot",title:"\u865a\u62df\u7528\u6237\u81ea\u52a8\u56de\u590d"}]),n=this.state,l=n.detail,i=n.showModel,r=this.onClose;return M.default.createElement(M.default.Fragment,null,M.default.createElement(x.default,{items:a}),M.default.createElement(t,null),M.default.createElement(e,null),i&&M.default.createElement(R.default,{detail:l,onClose:r}))}}]),a}(M.Component),k=O))||k)||k),F=I;t.default=F},BqWn:function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Pwec");var i=l(a("CtXQ"));a("+L6B");var r=l(a("2/Rp"));a("jCWc");var o=l(a("kPKH"));a("14J3");var u=l(a("BMrR")),d=n(a("q1tI")),s=l(a("DB4O"));function c(e){return["mp3","acc"].some(function(t){return e.toLowerCase().indexOf(t)>-1})}function f(e){e.onUpload;var t=e.url,a=e.defaulturl,n=(0,d.useRef)(),l=function(){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),n.current.value=null,n.current.dispatchEvent(e)},f=function(t){var a=n.current.files[0];c(a.type)?new s.default(a,1).then(function(t){e.onUpload(Object.assign(Object.assign({},t),{code:0}))}):e.onUpload({msg:"\u683c\u5f0f\u4e0d\u6b63\u786e"})};return d.default.createElement(d.default.Fragment,null,d.default.createElement(u.default,{type:"flex"},d.default.createElement(o.default,{style:{width:"150px"}},d.default.createElement("input",{type:"file",ref:n,style:{display:"none"},onChange:f}),d.default.createElement(r.default,{icon:"cloud-upload",onClick:l},"\u4e0a\u4f20\u97f3\u9891")),d.default.createElement(o.default,{span:12},d.default.createElement("a",{href:a||t,target:"_bank"},(a||t)&&d.default.createElement(i.default,{type:"file-jpg"})))))}var m=f;t.default=m},DB4O:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("2Taf")),i=n(a("vZ4D")),r=function(){function e(t,a){return(0,l.default)(this,e),this.getFileType=function(e){var t=e.split("."),a="";return void 0!=t&&(t.length<=1&&e.indexOf("=")>-1?(console.log("\u8f93\u5165\u662f\u6587\u4ef6\u5730\u5740\uff1a",t),!1):(a=t[t.length-1],a=a.toLowerCase(),a))},this.audio=document.createElement("Audio"),this.audio.preload="metadata",this.audio.src=URL.createObjectURL(t),this.init(t,a)}return(0,i.default)(e,[{key:"init",value:function(e,t){var a=this;return new Promise(function(n,l){var i=a.fileLengthFormat(e.size,t);a.getFileType(e.name);a.audio.onloadedmetadata=function(){window.URL.revokeObjectURL(a.audio.src);var t=a.audio.duration;n({file:e,size:i,duration:t})}})}},{key:"fileLengthFormat",value:function(e,t){var a,n=e/1024;if(n>1e3)return this.fileLengthFormat(n,++t);switch(t){case 1:a=n.toFixed(2);break;case 2:a=n.toFixed(2);break;case 3:a=n.toFixed(2);break;case 4:a=n.toFixed(2);break}return+a}}]),e}(),o=r;t.default=o},Lv8A:function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var i=l(a("2/Rp"));a("jCWc");var r=l(a("kPKH"));a("14J3");var o=l(a("BMrR")),u=n(a("q1tI")),d=l(a("+QyX"));function s(e){return["mp4"].some(function(t){return e.toLowerCase().indexOf(t)>-1})}function c(e){e.onUpload;var t=e.url,a=e.defaulturl,n=(0,u.useRef)(),l=function(){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),n.current.value=null,n.current.dispatchEvent(e)},c=function(t){var a=n.current.files[0];s(a.type)?new d.default(a,1).then(function(t){e.onUpload(Object.assign(Object.assign({},t),{code:0}))}):e.onUpload({msg:"\u683c\u5f0f\u4e0d\u6b63\u786e"})};return u.default.createElement(u.default.Fragment,null,u.default.createElement(o.default,{type:"flex"},u.default.createElement(r.default,{style:{width:"150px"}},u.default.createElement("input",{type:"file",ref:n,style:{display:"none"},onChange:c}),u.default.createElement(i.default,{icon:"cloud-upload",onClick:l},"\u4e0a\u4f20\u89c6\u9891")),u.default.createElement(r.default,{span:12},u.default.createElement("a",{href:a||t,target:"_bank"},(a||t)&&u.default.createElement("video",{src:a||t,style:{width:"100px",height:"100px"}})))))}var f=c;t.default=f},"b0J/":function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var i=l(a("2/Rp"));a("jCWc");var r=l(a("kPKH"));a("14J3");var o=l(a("BMrR")),u=n(a("q1tI")),d=l(a("1y1O"));function s(e){return["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"].some(function(t){return e.toLowerCase().indexOf(t)>-1})}function c(e){e.onUpload;var t=e.url,a=e.defaulturl,n=(0,u.useRef)(),l=function(){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),n.current.value=null,n.current.dispatchEvent(e)},c=function(t){var a=n.current.files[0];s(a.type)?(new d.default).getImgWidth(a).then(function(t){e.onUpload(Object.assign(Object.assign({},t),{code:0}))}):e.onUpload({msg:"\u683c\u5f0f\u4e0d\u6b63\u786e"})};return u.default.createElement(u.default.Fragment,null,u.default.createElement(o.default,{type:"flex"},u.default.createElement(r.default,{style:{width:"150px"}},u.default.createElement("input",{type:"file",ref:n,style:{display:"none"},onChange:c}),u.default.createElement(i.default,{icon:"cloud-upload",onClick:l},"\u4e0a\u4f20\u56fe\u7247")),u.default.createElement(r.default,{span:12},u.default.createElement("a",{href:a||t,target:"_bank"},(a||t)&&u.default.createElement("img",{src:a||t,style:{width:"100px",height:"100px"}})))))}var f=c;t.default=f},xkPr:function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("BoS7");var i=l(a("Sdc0"));a("/zsF");var r=l(a("PArb"));a("y8nQ");var o=l(a("Vl3Y"));a("2qtc");var u=l(a("kLXV"));a("Xi6J");var d=l(a("kl6h"));a("jCWc");var s=l(a("kPKH"));a("14J3");var c=l(a("BMrR"));a("miYZ");var f=l(a("tsqr")),m=l(a("2Taf")),p=l(a("vZ4D")),g=l(a("rlhR")),_=l(a("MhPg")),v=l(a("l4Ni")),h=l(a("ujKo"));a("+L6B");var y=l(a("2/Rp"));a("OaEy");var E=l(a("2fM7"));a("5NDa");var b=l(a("5rEg")),C=n(a("q1tI")),k=a("MuoO"),O=l(a("wd/R")),w=l(a("BqWn")),M=l(a("Lv8A")),S=l(a("b0J/"));function x(e){return function(){var t,a=(0,h.default)(e);if(j()){var n=(0,h.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,v.default)(this,t)}}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var R=function(e,t,a,n){var l,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(r=(i<3?l(r):i>3?l(t,a,r):l(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},T=(b.default.TextArea,E.default.Option),P=y.default.Group,L=function(e){(0,_.default)(a,e);var t=x(a);function a(e){var n;return(0,m.default)(this,a),n=t.call(this,e),n.onOk=function(){var e=n.props,t=e.form.validateFields,a=e.dispatch,l=e.detail,i=e.onClose,r=n.state,o=r.condition_m_list,u=r.son_condition_m_list,d=r.send_time_info_later,s=r.mess,c=r.send_type,m=r.sel_mode;"undefined"!==typeof s.message_type?1!=o.lenght||o[0].begin_time?t(function(e,t){if(!e){var n=o.map(function(e){return{key:"time_range",value:JSON.stringify(e)}}),r=[];1==u.lenght&&""===u[0].key||(r=u.map(function(e){return{key:e.key,call_rule_id:e.call_rule_id,value:e.value,comment:e.comment}})),a({type:"virtualApply/".concat(l.id?"modify":"add"),payload:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l),t),s),{message_type:7==s.message_type?0:+s.message_type,condition_list:JSON.stringify(n)}),Object.assign({},d)),{son_condition_list:JSON.stringify(r),send_type:+!!c,send_time_type:0==m?1:0,is_root:t.is_root?1:0,status:+!!t.status})}).then(function(e){0==e.code&&i()})}}):f.default.warn("\u8bf7\u8f93\u5165\u89c4\u5219"):f.default.warn("\u8bf7\u9009\u62e9\u6d88\u606f\u7c7b\u578b")},n.onChangeSelTime=function(e){n.setState({sel_mode:e})},n.onPutOffClickStart=function(e){if(e){var t=e.format("HH:mm");n.setState(function(e){var a=e.send_time_info_later;return a.send_timing=t,{send_time_info_later:a}})}},n.onChangeTime=function(e){var t=e.target.value,a=n.state.sel_mode;(/^[1-9]\d*$/.test(t)||0==t)&&n.setState(function(e){var n=e.send_time_info_later;return 1==a?n.send_day_later=t:n.after_seconds=t,{send_time_info_later:n}})},n.PutOff=function(){var e=(0,g.default)(n),t=e.onChangeSelTime,a=e.onPutOffClickStart,l=e.onChangeTime,i=n.state,r=i.send_time_info_later,o=r.after_seconds,u=r.send_timing,f=r.send_day_later,m=i.sel_mode,p=u?{value:(0,O.default)(u,"HH:mm")}:{},_=C.default.createElement(E.default,{value:m+"",style:{width:80},onChange:t},C.default.createElement(T,{value:"0"},"\u79d2"),C.default.createElement(T,{value:"1"},"\u5929"));return C.default.createElement(c.default,null,C.default.createElement(s.default,{span:8,className:"lab"},"\u7b2cN\u5929(0=>\u5f53\u5929)"),C.default.createElement(s.default,{span:16},C.default.createElement(b.default,{addonAfter:_,placeholder:1==m?"\u53d1\u9001\u65f6\u95f4(Day)":"\u53d1\u9001\u65f6\u95f4(s)",onChange:l,value:1==m?f:o})),1==m&&C.default.createElement(C.default.Fragment,null,C.default.createElement(s.default,{span:8,className:"lab",style:{marginTop:"3px"}},"\u53d1\u9001\u65f6\u95f4\u70b9"),C.default.createElement(s.default,{span:16},C.default.createElement(d.default,Object.assign({onChange:a},p,{style:{marginTop:"3px",width:"100%"},className:"__TimePicker__",placeholder:"\u53d1\u9001\u65f6\u95f4\u70b9",format:"HH:mm"})))))},n.onChangeMessageTypeMap=function(e){n.setState(function(t){var a=t.mess;return a.remote_url="",a.message_type=e,7==e?{mess:a,send_type:2}:{mess:a}})},n.onUpload=function(e){var t=n.props.dispatch;0==e.code?(t({type:"virtualApply/uploadMedia",payload:{multiMedia:e.file}}).then(function(t){console.log(t,"ress"),t.code||n.setState(function(a){var n=a.mess;return{mess:Object.assign(Object.assign(Object.assign({},n),e),{file:null,url:t.data.path,remote_url:t.data.url})}})}),console.log(e,"onUpload opt")):f.default.info(e.msg)},n.onChangeMessageContent=function(e){var t=e.target.value;n.setState(function(e){var a=e.mess;return a.content=t,{mess:a}})},n.onChangeMessageGift=function(e){n.setState(function(t){var a=t.mess;return a.gift_id=e,{mess:a}})},n.SelMess=function(){var e=(0,g.default)(n),t=e.props,a=t.messageTypeMap,l=t.giftMap,i=t.detail,r=i.remote_url,o=i.message_type,u=e.state,d=u.mess,f=d.message_type,m=d.content,p=d.gift_id,_=(u.send_type,e.onChangeMessageTypeMap),v=e.onUpload,h=e.onChangeMessageContent,y=e.onChangeMessageGift,k=p?{value:p}:{};return C.default.createElement(c.default,null,C.default.createElement(s.default,{span:8,className:"lab"},"\u6d88\u606f\u7c7b\u578b"),C.default.createElement(s.default,{span:16},C.default.createElement(E.default,{placeholder:"\u8bf7\u9009\u62e9\u6d88\u606f\u7c7b\u578b",style:{width:"100%"},onChange:_,value:n.state.mess.message_type},Object.keys(Object.assign({},a)).map(function(e,t){return C.default.createElement(T,{value:e,key:t},a[e])}))),"undefined"!=typeof f&&C.default.createElement(s.default,{span:8,className:"lab",style:{marginTop:"5px"}},"\u5185\u5bb9"),C.default.createElement(s.default,{span:16,style:{marginTop:"5px"}},(1==f||4==f)&&C.default.createElement(S.default,Object.assign({},{onUpload:v,defaulturl:n.state.mess.remote_url,url:1==o||4==o?r:""})),(6==f||2==f)&&C.default.createElement(M.default,Object.assign({},{onUpload:v,defaulturl:n.state.mess.remote_url,url:2==o||6==o?r:""})),3==f&&C.default.createElement(w.default,Object.assign({},{onUpload:v,defaulturl:n.state.mess.remote_url,url:3==o?r:""})),(0==f||7==f)&&C.default.createElement(b.default,{value:m,onChange:h,placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9"}),5==f&&C.default.createElement(E.default,Object.assign({placeholder:"\u8bf7\u9009\u62e9\u6d88\u606f\u7c7b\u578b",style:{width:"100%"}},k,{onChange:y}),l.map(function(e,t){return C.default.createElement(T,{value:e.id,key:t},C.default.createElement(C.default.Fragment,null,C.default.createElement("img",{src:e.icon,style:{width:"30px",height:"30px"}}),"".concat(e.id," ").concat(e.name," ").concat(e.name," $").concat(e.price)))}))))},n.onConditionClickStart=function(e,t){if(t){var a=t.format("HH:mm");n.setState(function(t){var n=t.condition_m_list,l=n[e];return l.begin_time=a,n[e]=l,{condition_m_list:n}})}},n.onConditionClickEnd=function(e,t){if(t){var a=t.format("HH:mm");n.setState(function(t){var n=t.condition_m_list,l=n[e];return l.end_time=a,n[e]=l,{condition_m_list:n}})}},n.onConditionChange=function(e,t){var a=t.target.value;(/^[1-9]\d*$/.test(a)||0==a)&&n.setState(function(t){var n=t.condition_m_list,l=n[e];return l.match_message_count=a,n[e]=l,{condition_m_list:n}})},n.addCondition=function(e){n.setState(function(t){var a=t.condition_m_list,n={begin_time:"",end_time:"",match_message_count:""};return a.splice(e+1,0,n),{condition_m_list:a}})},n.delCondition=function(e){n.setState(function(t){var a=t.condition_m_list;if(a.length>1)return a.splice(e,1),{condition_m_list:a}})},n.Condition=function(){var e=(0,g.default)(n),t=e.onConditionClickStart,a=e.onConditionClickEnd,l=e.onConditionChange,i=e.addCondition,r=e.delCondition,o=n.state.condition_m_list;return C.default.createElement(c.default,null,C.default.createElement(s.default,{span:8,className:"lab"},"\u89c4\u5219\u5217\u8868"),C.default.createElement(s.default,{span:16},o.map(function(e,o){var u=e.begin_time,f=e.end_time,m=e.match_message_count,p=u?{value:(0,O.default)(u,"HH:mm")}:{},_=f?{value:(0,O.default)(f,"HH:mm")}:{};return C.default.createElement(c.default,{style:{marginTop:"3px"},align:"middle",justify:"center",type:"flex",key:o},C.default.createElement(s.default,{span:16},C.default.createElement(d.default,Object.assign({onChange:t.bind((0,g.default)(n),o)},p,{className:"__TimePicker__",placeholder:"\u5f00\u59cb\u65f6\u95f4",format:"HH:mm"})),C.default.createElement(d.default,Object.assign({onChange:a.bind((0,g.default)(n),o)},_,{className:"__TimePicker__ s_nth",placeholder:"\u7ed3\u675f\u65f6\u95f4",format:"HH:mm"})),C.default.createElement(b.default,{onChange:l.bind((0,g.default)(n),o),value:m,placeholder:"\u5339\u914d\u6d88\u606f\u6570",style:{width:"203px",marginTop:"3px"}})),C.default.createElement(s.default,{span:8},C.default.createElement(P,null,C.default.createElement(y.default,{type:"danger",size:"small",onClick:r.bind((0,g.default)(n),o)},"\u51cf\u53bb"),C.default.createElement(y.default,{type:"primary",size:"small",onClick:i.bind((0,g.default)(n),o)},"\u589e\u52a0"))))})))},n.onSonConditionChange=function(e,t,a){n.setState(function(n){var l=n.son_condition_m_list,i=l[e];return i[t]=a,l[e]=i,{son_condition_m_list:l}})},n.onSonInputChange=function(e,t,a){var l=a.target.value;n.setState(function(a){var n=a.son_condition_m_list,i=n[e];return i[t]=l,n[e]=i,{son_condition_m_list:n}})},n.addSonCondition=function(e){n.setState(function(t){var a=t.son_condition_m_list,n={key:"",call_rule_id:"",value:"",comment:""};return a.splice(e+1,0,n),{son_condition_m_list:a}})},n.delSonCondition=function(e){n.setState(function(t){var a=t.son_condition_m_list;if(a.length>1)return a.splice(e,1),{son_condition_m_list:a}})},n.SonCondition=function(){var e=(0,g.default)(n),t=e.props,a=t.noRootRules,l=t.subConditionKeyMap,i=e.state.son_condition_m_list,r=e.delSonCondition,o=e.addSonCondition,u=e.onSonConditionChange,d=e.onSonInputChange;return C.default.createElement(c.default,null,C.default.createElement(s.default,{span:8,className:"lab"},"\u5b50\u89c4\u5219\u5217\u8868"),C.default.createElement(s.default,{span:16},i.map(function(e,t){var i=e.key?{value:e.key}:{},f=e.call_rule_id?{value:e.call_rule_id}:{},m=e.value?{value:e.value}:{},p=e.comment?{value:e.comment}:{};return C.default.createElement(c.default,{style:{marginTop:"3px"},align:"middle",justify:"center",type:"flex",key:t},C.default.createElement(s.default,{span:16},C.default.createElement(E.default,Object.assign({placeholder:"\u9009\u62e9\u5b50\u89c4\u5219",style:{width:203},onChange:u.bind((0,g.default)(n),t,"key")},i),l.map(function(e,t){return C.default.createElement(T,{key:t,value:e.value},e.name)})),C.default.createElement(E.default,Object.assign({placeholder:"\u9009\u62e9\u975eROOT\u89c4\u5219",style:{width:203,marginTop:"3px"},onChange:u.bind((0,g.default)(n),t,"call_rule_id")},f),!!Object.keys(a).length&&a.map(function(e,t){return C.default.createElement(T,{key:t,value:e.id},e.title)})),C.default.createElement(b.default,Object.assign({},m,{placeholder:"\u5b50\u89c4\u5219\u503c",onChange:d.bind((0,g.default)(n),t,"value"),style:{width:"203px",marginTop:"3px"}})),C.default.createElement(b.default,Object.assign({},p,{placeholder:"\u63cf\u8ff0",onChange:d.bind((0,g.default)(n),t,"comment"),style:{width:"203px",marginTop:"3px"}}))),C.default.createElement(s.default,{span:8},C.default.createElement(P,null,C.default.createElement(y.default,{type:"danger",size:"small",onClick:r.bind((0,g.default)(n),t)},"\u51cf\u53bb"),C.default.createElement(y.default,{type:"primary",size:"small",onClick:o.bind((0,g.default)(n),t)},"\u589e\u52a0"))))})))},n.state={condition_m_list:[{begin_time:"",end_time:"",match_message_count:""}],son_condition_m_list:[{key:"",call_rule_id:"",value:"",comment:""}],send_time_info_later:{send_day_later:"",send_timing:"",after_seconds:""},sel_mode:"0",mess:{message_type:void 0,content:"",remote_url:""},send_type:"1"},n}return(0,p.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.detail,t=e.id,a=e.condition_list,n=e.son_condition_list,l=e.send_time_type,i=e.content,r=e.remote_url,o=e.send_day_later,u=e.gift_id,d=e.send_timing,s=e.after_seconds,c=e.message_type,f=e.send_type;"undefined"!==typeof t&&this.setState(function(e){var t=e.condition_m_list,m=e.son_condition_m_list,p=[],g=[];return a&&JSON.parse(n).map(function(e){p.push(JSON.parse(e.value))}),n&&JSON.parse(n).map(function(e){g.push(e)}),{son_condition_m_list:g.length?g:m,condition_m_list:p.length?p:t,send_time_info_later:{send_day_later:o,send_timing:d,after_seconds:s},mess:{remote_url:r,message_type:0==c&&2==f?7:c,content:i,gift_id:u},sel_mode:1==l?0:1,send_type:f}})}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.onClose,n=e.detail,l=e.detail,d=l.title,f=l.robot_id,m=l.rule_message_count,p=l.rule_message_interval,g=(l.message_type,l.is_root),_=l.rule_type,v=(l.send_type,l.status),h=void 0!==v&&v,y=(e.messageTypeMap,e.sendTypeMap,e.ruleTypeMap),k=(e.dispatch,this.Condition),O=this.SonCondition,w=this.PutOff,M=this.SelMess,S=this.onOk,x={labelCol:{span:8},wrapperCol:{span:16}};return C.default.createElement(u.default,{title:"".concat(Object.keys(n).length?"\u7f16\u8f91":"\u65b0\u589e"),centered:!0,visible:!0,onOk:function(){return S()},onCancel:function(){return a()},className:"i_edit"},C.default.createElement("style",null,"\n             .i_edit .ant-upload.ant-upload-select{\n                  display:block\n              }\n              .lab{\n                white-space: nowrap;\n                text-overflow: ellipsis;\n                color: rgba(0, 0, 0, 0.85);\n                position: relative;\n                text-align: right;\n                top: 5px;\n              }\n              .lab::after {\n                content: ':';\n                position: relative;\n                top: -0.5px;\n                margin: 0 8px 0 2px;\n            }\n            .__TimePicker__{\n              width:100px;\n            }\n            .__TimePicker__.s_nth{\n              margin-left:3px\n            }\n            "),C.default.createElement(o.default.Item,Object.assign({},x,{label:"\u6a21\u677f\u540d\u79f0"}),t("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"}],initialValue:d})(C.default.createElement(b.default,{placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"}))),C.default.createElement(o.default.Item,Object.assign({},x,{label:"\u8fd0\u8425\u8d26\u53f7"}),t("robot_id",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fd0\u8425\u8d26\u53f7"}],initialValue:f})(C.default.createElement(b.default,{placeholder:"\u8bf7\u8f93\u5165\u8fd0\u8425\u8d26\u53f7"}))),C.default.createElement(M,null),C.default.createElement(c.default,null,C.default.createElement(k,null),C.default.createElement(O,null)),C.default.createElement(r.default,null),C.default.createElement(c.default,null,C.default.createElement(s.default,{style:{fontWeight:"bold"}},"\u53d1\u9001\u6761\u4ef6")),C.default.createElement(o.default.Item,Object.assign({},x,{label:"\u53d1\u9001\u6d88\u606f\u89c4\u5219\u7c7b\u578b"}),t("rule_type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u53d1\u9001\u6d88\u606f\u89c4\u5219\u7c7b\u578b"}],initialValue:_})(C.default.createElement(E.default,{placeholder:"\u8bf7\u9009\u62e9\u53d1\u9001\u6d88\u606f\u89c4\u5219\u7c7b\u578b",style:{width:"100%"}},Object.keys(y).map(function(e,t){return C.default.createElement(T,{value:e,key:t},y[e])})))),C.default.createElement(o.default.Item,Object.assign({},x,{label:"\u53d1\u9001\u6d88\u606f\u6570"}),t("rule_message_count",{initialValue:m})(C.default.createElement(b.default,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u6d88\u606f\u6570"}))),C.default.createElement(o.default.Item,Object.assign({},x,{label:"\u53d1\u9001\u65f6\u95f4\u95f4\u9694\uff08\u79d2\uff09"}),t("rule_message_interval",{initialValue:p})(C.default.createElement(b.default,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u65f6\u95f4\u95f4\u9694\uff08\u79d2)"}))),C.default.createElement(w,null),C.default.createElement(o.default.Item,Object.assign({},x,{label:"IS_ROOT"}),t("is_root",{initialValue:!!+g,valuePropName:"checked"})(C.default.createElement(i.default,null))),C.default.createElement(o.default.Item,Object.assign({},x,{label:"\u662f\u5426\u4e0a\u67b6"}),t("status",{initialValue:!!+h,valuePropName:"checked"})(C.default.createElement(i.default,null))))}}]),a}(C.Component);L=R([o.default.create(),(0,k.connect)(function(e){var t=e.virtualApply,a=t.statusMap,n=t.messageTypeMap,l=t.sendTypeMap,i=t.conditionKeyMap,r=t.subConditionKeyMap,o=t.noRootRules,u=t.giftMap,d=t.ruleTypeMap;return{statusMap:a,messageTypeMap:n,sendTypeMap:l,conditionKeyMap:i,subConditionKeyMap:r,noRootRules:o,giftMap:u,ruleTypeMap:d}})],L);var I=L;t.default=I}}]);