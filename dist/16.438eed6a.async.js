(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{Glmp:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=n(a("wCAj"));a("+L6B");var i=n(a("2/Rp"));a("sPJy");var o=n(a("bE4q"));a("Pwec");var d=n(a("CtXQ")),u=n(a("p0pE")),s=n(a("gWZ8"));a("P2fV");var f=n(a("NJEC")),c=n(a("rlhR"));a("giR+");var p=n(a("fyUT")),m=n(a("2Taf")),v=n(a("vZ4D")),g=n(a("MhPg")),h=n(a("l4Ni")),y=n(a("ujKo")),b=n(a("Y/ft"));a("OaEy");var E=n(a("2fM7"));a("5NDa");var M=n(a("5rEg"));a("y8nQ");var x,C,k,I=n(a("Vl3Y")),w=a("+n12"),V=a("K0tr"),S=a("MuoO"),T=r(a("q1tI")),L=n(a("LvDl")),P=a("LLXN"),R=a("fPeI"),K=n(a("M6bh")),O=n(a("fYmc"));function D(e){return function(){var t,a=(0,y.default)(e);if(B()){var n=(0,y.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,h.default)(this,t)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var N=T.default.createContext(),_=I.default.Item,q=M.default.TextArea,j=(E.default.Option,M.default.Search),A=function(e){var t=e.form,a=(e.index,(0,b.default)(e,["form","index"]));return T.default.createElement(N.Provider,{value:t},T.default.createElement("tr",a))},X=I.default.create()(A),Y=function(e){(0,g.default)(a,e);var t=D(a);function a(){var e;(0,m.default)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),e.getInput=function(){return"number"===e.props.inputType?T.default.createElement(p.default,null):"area"===e.props.inputType?T.default.createElement(q,null):T.default.createElement(M.default,null)},e}return(0,v.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editing,n=t.dataIndex,r=t.title,l=(t.inputType,t.record),i=(t.index,(0,b.default)(t,["editing","dataIndex","title","inputType","record","index"]));return T.default.createElement(N.Consumer,null,function(t){var o=t.getFieldDecorator;return T.default.createElement("td",i,a?T.default.createElement(_,{style:{margin:0}},o(n,{rules:[{required:!0,message:"Please Input"+r+"!"}],initialValue:l[n]})(e.getInput())):i.children)})}}]),a}(T.default.Component),F=(x=(0,S.connect)(function(e){var t=e.versions,a=e.routing.location.pathname,n=e.memberInfo.data.keys;return{versions:t,keys:n,pathname:a}}),x((k=function(e){(0,g.default)(a,e);var t=D(a);function a(e){var n;return(0,m.default)(this,a),n=t.call(this,e),n.isEditing=function(e){return e.id===n.state.editingKey},n.cancel=function(){n.setState({editingKey:""})},n.handleCancel=function(){n.setState({visible:!1})},n.closeVersionsModel=function(e){n.setState({modalVisible:!1},function(){e&&n.updataConfiList()})},n.state={modalVisible:!1,editingKey:"",pagination:{page:1,total_page:0},breadcrumb:(0,P.formatMessage)({id:"menu.system.versions"}),tableLocal:{filterTitle:(0,P.formatMessage)({id:"app.table.filterTitle"}),filterConfirm:(0,P.formatMessage)({id:"app.table.filterConfirm"}),filterReset:(0,P.formatMessage)({id:"app.table.filterReset"}),emptyText:(0,P.formatMessage)({id:"app.table.emptyText"})}},n.columns=[{title:"id",dataIndex:"id",width:"80",editable:!1},{title:(0,P.formatMessage)({id:"app.versions.table.version"}),dataIndex:"version",width:"80",editable:!0},{title:(0,P.formatMessage)({id:"app.versions.table.info"}),dataIndex:"info",width:"200",editable:!0,tag:"area"},{title:(0,P.formatMessage)({id:"app.versions.table.url"}),dataIndex:"url",width:"150",editable:!0},{title:(0,P.formatMessage)({id:"app.versions.table.menberid"}),dataIndex:"member_id",width:"80",editable:!1},{title:(0,P.formatMessage)({id:"app.versions.table.creatTime"}),dataIndex:"create_time",width:"150",editable:!1},{title:(0,P.formatMessage)({id:"app.versions.table.platform"}),dataIndex:"platform",width:"80",editable:!1,render:function(e){return T.default.createElement("span",null,(0,w.getPlatform)(e))}},{title:(0,P.formatMessage)({id:"app.versions.table.operation"}),dataIndex:"operation",render:function(e,t){var a=n.isEditing(t);return T.default.createElement("div",null,a?T.default.createElement("span",null,T.default.createElement(N.Consumer,null,function(e){return T.default.createElement("a",{href:"#",onClick:function(){return n.save(e,t.id)},style:{marginRight:8}},(0,P.formatMessage)({id:"app.versions.save"}))}),T.default.createElement(f.default,{title:"Sure to cancel?",onConfirm:function(){return n.cancel(t.id)}},T.default.createElement("a",null,(0,P.formatMessage)({id:"app.versions.cancel"})))):T.default.createElement("div",null,T.default.createElement("a",{onClick:function(){return n.edit(t.id)}},(0,P.formatMessage)({id:"app.versions.edit"}))))}}],n.addVersions=n.addVersions.bind((0,c.default)(n)),n.save=n.save.bind((0,c.default)(n)),n.updataConfiList=n.updataConfiList.bind((0,c.default)(n)),n.onSearch=n.onSearch.bind((0,c.default)(n)),n}return(0,v.default)(a,[{key:"componentDidMount",value:function(){this.updataConfiList()}},{key:"save",value:function(e,t){var a=this,n=this.props.versions.data;e.validateFields(function(e,r){if(!e){var l=(0,s.default)(n),i=l.findIndex(function(e){return t==e.id});i>-1?((0,V.modify)(L.default.merge({},n[i],r)).then(function(e){e.code||a.updataConfiList()}),a.setState({editingKey:""})):a.setState({editingKey:""})}})}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"addVersions",value:function(){this.setState({modalVisible:!0},function(){})}},{key:"onSearch",value:function(e){var t=this;this.setState({pagination:{page:1,app_version:e.trim()}},function(){t.updataConfiList()})}},{key:"updataConfiList",value:function(){var e=this.props.dispatch,t=this.state.pagination;e({type:"versions/getConfigList",payload:t})}},{key:"render",value:function(){var e=this,t=this.props,a=t.versions,n=t.keys,r=t.pathname,s=this.state,f=s.breadcrumb,c=s.modalVisible,p=s.tableLocal,m={body:{row:X,cell:Y}},v=this.columns.map(function(t){if(!t.editable)return t;var a="text";return t.tag&&(a="area"),(0,u.default)({},t,{onCell:function(n){return{record:n,inputType:a,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(n)}}})});return T.default.createElement("div",null,T.default.createElement("div",{className:O.default.breadcrumbBox},T.default.createElement(o.default,null,T.default.createElement(o.default.Item,null,T.default.createElement(d.default,{type:"lock"}),T.default.createElement("span",null,(0,P.formatMessage)({id:"menu.system"}))),T.default.createElement(o.default.Item,null,f))),T.default.createElement("div",{className:O.default.addBtn},T.default.createElement("div",null,"array"==(0,w.type)(n)&&n.indexOf((0,R.getKey)(r,R.operationEnum.select))>-1&&T.default.createElement(j,{placeholder:(0,P.formatMessage)({id:"app.versions.inputVersion"}),enterButton:(0,P.formatMessage)({id:"app.pages.search"}),size:"default",onSearch:this.onSearch})),T.default.createElement("div",{className:O.default.btnBox},"array"==(0,w.type)(n)&&n.indexOf((0,R.getKey)(r,R.operationEnum.add))>-1&&T.default.createElement(i.default,{type:"primary",onClick:this.addVersions},(0,P.formatMessage)({id:"app.versions.add"}))),T.default.createElement("div",null),T.default.createElement("div",null)),"array"==(0,w.type)(n)&&n.indexOf((0,R.getKey)(r,R.operationEnum.select))>-1&&T.default.createElement(l.default,{components:m,bordered:!0,dataSource:a.data,pagination:!1,columns:v,rowClassName:"editable-row",locale:p,rowKey:function(e,t){return"".concat(e.id).concat(t)}}),T.default.createElement(K.default,{modalVisible:c,onCloseModel:this.closeVersionsModel}))}}]),a}(T.PureComponent),C=k))||C),J=F;t.default=J},M6bh:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=n(a("kLXV")),i=n(a("jehZ")),o=n(a("2Taf")),d=n(a("vZ4D")),u=n(a("MhPg")),s=n(a("l4Ni")),f=n(a("ujKo"));a("OaEy");var c=n(a("2fM7"));a("5NDa");var p=n(a("5rEg"));a("y8nQ");var m,v,g,h=n(a("Vl3Y")),y=a("K0tr"),b=r(a("q1tI")),E=a("LLXN");function M(e){return function(){var t,a=(0,f.default)(e);if(x()){var n=(0,f.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,s.default)(this,t)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var C=h.default.Item,k=p.default.TextArea,I=c.default.Option,w=(m=h.default.create(),m((g=function(e){(0,u.default)(a,e);var t=M(a);function a(e){var n;return(0,o.default)(this,a),n=t.call(this,e),n.onOk=function(){var e=n.props,t=e.form,a=e.onCloseModel;t.validateFields(function(e,t){e||(0,y.add)(t).then(function(e){e.code||a(1)}).catch(function(e){console.log(e)})})},n.onCancel=function(){var e=n.props.onCloseModel;e()},n}return(0,d.default)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},t=this.props,a=t.form.getFieldDecorator,n=t.modalVisible;return b.default.createElement(l.default,{title:(0,E.formatMessage)({id:"app.versions.edit"}),visible:n,cancelText:(0,E.formatMessage)({id:"app.model.cancel"}),okText:(0,E.formatMessage)({id:"app.model.okText"}),onOk:this.onOk,onCancel:this.onCancel},b.default.createElement(h.default,null,b.default.createElement(C,(0,i.default)({},e,{label:(0,E.formatMessage)({id:"app.versions.table.version"})}),a("version",{rules:[{required:!0,message:(0,E.formatMessage)({id:"app.versions.inputVersion"})}]})(b.default.createElement(p.default,null))),b.default.createElement(C,(0,i.default)({},e,{label:(0,E.formatMessage)({id:"app.versions.table.url"})}),a("url",{rules:[{required:!0,message:(0,E.formatMessage)({id:"app.versions.inputUrl"})}]})(b.default.createElement(p.default,null))),b.default.createElement(C,(0,i.default)({},e,{label:(0,E.formatMessage)({id:"app.versions.table.platform"})}),a("platform",{initialValue:"1"})(b.default.createElement(c.default,null,b.default.createElement(I,{value:"1"},(0,E.formatMessage)({id:"app.platform"})),b.default.createElement(I,{value:"2"},"IOS")))),b.default.createElement(C,(0,i.default)({},e,{label:(0,E.formatMessage)({id:"app.versions.table.info"})}),a("info")(b.default.createElement(k,{rows:4})))))}}]),a}(b.default.Component),v=g))||v),V=w;t.default=V},fYmc:function(e,t,a){e.exports={rightPagination:"antd-pro-pages-system-versions-rightPagination",breadcrumbBox:"antd-pro-pages-system-versions-breadcrumbBox",addBtn:"antd-pro-pages-system-versions-addBtn",btnBox:"antd-pro-pages-system-versions-btnBox"}}}]);