(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{NlUn:function(e,t,a){e.exports={operate:"antd-pro-pages-operation-message-template-style-operate",icon:"antd-pro-pages-operation-message-template-style-icon",handle:"antd-pro-pages-operation-message-template-style-handle","operations-wraper":"antd-pro-pages-operation-message-template-style-operations-wraper",edit:"antd-pro-pages-operation-message-template-style-edit",danger:"antd-pro-pages-operation-message-template-style-danger",delete:"antd-pro-pages-operation-message-template-style-delete antd-pro-pages-operation-message-template-style-danger",mrm:"antd-pro-pages-operation-message-template-style-mrm",search:"antd-pro-pages-operation-message-template-style-search",list:"antd-pro-pages-operation-message-template-style-list",avatar:"antd-pro-pages-operation-message-template-style-avatar",time:"antd-pro-pages-operation-message-template-style-time",divide:"antd-pro-pages-operation-message-template-style-divide",date:"antd-pro-pages-operation-message-template-style-date",loading:"antd-pro-pages-operation-message-template-style-loading",hide:"antd-pro-pages-operation-message-template-style-hide"}},Sqrn:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var o=r(a("wCAj"));a("/zsF");var s=r(a("PArb"));a("P2fV");var l=r(a("NJEC"));a("+BJd");var i=r(a("mr32")),p=r(a("2Taf")),c=r(a("vZ4D")),d=r(a("MhPg")),f=r(a("l4Ni")),u=r(a("ujKo")),m=a("MuoO"),g=n(a("q1tI")),h=a("LLXN"),y=r(a("71zH")),v=r(a("TtxD")),b=r(a("Sr7O")),M=r(a("UbMB")),E=r(a("NlUn"));function w(e){return function(){var t,a=(0,u.default)(e);if(S()){var n=(0,u.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,f.default)(this,t)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _=function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s},x=M.default.bind(E.default),R=function(e){(0,d.default)(a,e);var t=w(a);function a(e){var n;return(0,p.default)(this,a),n=t.call(this,e),n.showEdit=function(e,t){e.preventDefault(),t&&n.setState({editRecord:t}),n.setState({editShowing:!0})},n.showAdd=function(){n.setState({addShowing:!0})},n.hideAdd=function(){n.setState({addShowing:!1})},n.hideEdit=function(){n.setState({editShowing:!1,editRecord:null})},n.deleteRecord=function(e){var t=n.props.dispatch;t({type:"template/delete",payload:e})},n.putOnline=function(e){n.props.dispatch({type:"template/patchStatus",payload:{id:e,status:1}})},n.putOffline=function(e){n.props.dispatch({type:"template/patchStatus",payload:{id:e,status:0}})},n.search=function(e){n.setState({search:e});var t=n.props,a=t.pageSize,r=t.page,o=void 0===r?1:r;n.props.dispatch({type:"template/updateState",payload:{filter:e}}),n.props.dispatch({payload:Object.assign(Object.assign({},e),{page:o,pageSize:a}),type:"template/fetch"})},n.onShowSizeChange=function(e,t){n.props.dispatch({type:"template/changePageSize",payload:{page:e,pageSize:t}}),n.fetchPage(e,t)},n.fetchPage=function(e,t){var a=n.state.search,r=void 0===a?{}:a;n.props.dispatch({type:"template/fetch",payload:Object.assign({page:e,page_size:t},r)})},n.state={editShowing:!1},n}return(0,c.default)(a,[{key:"render",value:function(){var e=[{icon:"desktop",title:(0,h.formatMessage)({id:"menu.operation"})},{icon:"robot",title:(0,h.formatMessage)({id:"menu.operation.xiaomishutemplate"})}],t=this.props,a=t.list,n=t.total,r=t.page,p=t.pageSize,c=t.tags,d=t.statuses,f=this.state,u=(f.editShowing,f.addShowing),m=f.editRecord,M=this.showEdit,w=this.hideEdit,S=this.deleteRecord,_=this.hideAdd,R=this.showAdd,k=this.search,N=this.putOnline,O=this.putOffline,P=[{title:(0,h.formatMessage)({id:"app.message.template.id"}),dataIndex:"id",align:"center"},{title:(0,h.formatMessage)({id:"app.virtual.accounts.time"}),dataIndex:"time",align:"center",render:function(e,t){return g.default.createElement(g.Fragment,null,g.default.createElement("div",{className:x("time")},(0,h.formatMessage)({id:"app.group.list.edit_time"}),": ",t.update_at),g.default.createElement("div",{className:x("time")},(0,h.formatMessage)({id:"app.group.list.create_time"}),": ",t.create_at))}},{title:(0,h.formatMessage)({id:"app.group.list.sort"}),dataIndex:"sort",align:"center"},{title:(0,h.formatMessage)({id:"app.message.template.name"}),dataIndex:"name",align:"center"},{title:(0,h.formatMessage)({id:"app.message.template.content"}),dataIndex:"content",align:"center",width:300},{title:(0,h.formatMessage)({id:"app.message.template.creater"}),dataIndex:"operate_nickname",align:"center"},{title:(0,h.formatMessage)({id:"app.group.tag.status"}),dataIndex:"status",align:"center",render:function(e,t){var a,n;return 0===+e?(a="gray",n=(0,h.formatMessage)({id:"app.group.tag.offline"})):(a="blue",n=(0,h.formatMessage)({id:"app.group.tag.online"})),g.default.createElement(i.default,{color:a},n)}},{title:(0,h.formatMessage)({id:"app.virtual.accounts.operation"}),dataIndex:"operation",align:"center",render:function(e,t){var a,n,r,o=(0,h.formatMessage)({id:"app.scene.tools.delete"});if(0==t.status)!1,a=(0,h.formatMessage)({id:"app.scene.category.online"}),n=g.default.createElement(l.default,{title:(0,h.formatMessage)({id:"app.scene.category.online_hint"}),okText:(0,h.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,h.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:function(){N(t.id)}},g.default.createElement("a",{href:"#",className:E.default.edit},a));else{!0,a=(0,h.formatMessage)({id:"app.scene.category.offline"});var i=(0,h.formatMessage)({id:"app.scene.category.offline_hint"});t.tool_count>0&&(i=(0,h.formatMessage)({id:"app.scene.category.has_tool_offline_hint"})),n=g.default.createElement(l.default,{title:i,okText:(0,h.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,h.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:function(){O(t.id)}},g.default.createElement("a",{href:"#",className:"".concat(E.default.edit," ").concat(E.default.danger)},a))}return r=g.default.createElement(l.default,{title:(0,h.formatMessage)({id:"app.scene.tools.delete_confirm"}),okText:(0,h.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,h.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:function(){S(t)}},g.default.createElement("a",{href:"#",className:E.default.delete},o)),g.default.createElement("div",{className:E.default.handle},g.default.createElement("a",{href:"#",className:E.default.edit,onClick:function(e){M(e,t)}},(0,h.formatMessage)({id:"app.scene.tools.handle.edit"})),g.default.createElement(s.default,{type:"vertical"}),n,g.default.createElement(s.default,{type:"vertical"}),r)}}];return g.default.createElement(g.Fragment,null,g.default.createElement(y.default,{items:e}),g.default.createElement("div",{className:x("operate")},g.default.createElement(v.default,{statuses:d,search:k,addTitle:(0,h.formatMessage)({id:"app.message.template.add"}),add:R,tags:c})),g.default.createElement(o.default,{className:x("list"),bordered:!0,rowKey:"id",columns:P,dataSource:a,pagination:{position:"both",pageSize:p,showSizeChanger:!0,pageSizeOptions:["20","30","40"],onShowSizeChange:this.onShowSizeChange,total:n,current:r,showTotal:function(e){return(0,h.formatMessage)({id:"app.glob.pagetotal"},{total:e})},size:"small",onChange:this.fetchPage}}),u&&g.default.createElement(b.default,{caption:(0,h.formatMessage)({id:"app.message.template.add"}),visible:u,close:_}),m&&g.default.createElement(b.default,{caption:(0,h.formatMessage)({id:"app.message.template.edit"}),id:m.id,record:m,visible:!!this.state.editRecord,close:w}))}}]),a}(g.PureComponent);R=_([(0,m.connect)(function(e){var t=e.template,a=t.list,n=t.total,r=t.page,o=t.pageSize,s=t.tags,l=t.statuses,i=void 0===l?[]:l;return{list:a,total:n,page:r,pageSize:o,tags:s,statuses:i}})],R);var k=R;t.default=k},Sr7O:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var o=r(a("kLXV"));a("P2fV");var s=r(a("NJEC"));a("y8nQ");var l=r(a("Vl3Y"));a("BoS7");var i=r(a("Sdc0"));a("5NDa");var p=r(a("5rEg")),c=r(a("d6i3")),d=r(a("2Taf")),f=r(a("vZ4D")),u=r(a("rlhR")),m=r(a("MhPg")),g=r(a("l4Ni")),h=r(a("ujKo")),y=a("MuoO"),v=n(a("q1tI")),b=a("LLXN"),M=r(a("Wwog")),E=r(a("Y+p1"));function w(e){return function(){var t,a=(0,h.default)(e);if(S()){var n=(0,h.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,g.default)(this,t)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _=function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s},x=function(e,t,a,n){function r(e){return e instanceof a?e:new a(function(t){t(e)})}return new(a||(a=Promise))(function(a,o){function s(e){try{i(n.next(e))}catch(e){o(e)}}function l(e){try{i(n["throw"](e))}catch(e){o(e)}}function i(e){e.done?a(e.value):r(e.value).then(s,l)}i((n=n.apply(e,t||[])).next())})},R=function(e){(0,m.default)(a,e);var t=w(a);function a(e){var n;return(0,d.default)(this,a),n=t.call(this,e),n.state={visible:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},fields:[{name:"name",placeholder:(0,b.formatMessage)({id:"app.message.template.name_placeholder"}),options:{rules:[{required:!0,message:(0,b.formatMessage)({id:"app.scene.category.name_required"})}]},label:(0,b.formatMessage)({id:"app.message.template.name"})},{name:"content",placeholder:(0,b.formatMessage)({id:"app.message.template.content_placeholder"}),options:{rules:[]},properties:{autoSize:!0},type:"textarea",label:(0,b.formatMessage)({id:"app.message.template.content"})},{name:"sort",placeholder:(0,b.formatMessage)({id:"app.scene.category.sort_placeholder"}),options:{rules:[]},input_type:"number",label:(0,b.formatMessage)({id:"app.scene.category.sort"})},{name:"status",options:{valuePropName:"checked",initialValue:!1,rules:[]},type:"switch",label:(0,b.formatMessage)({id:"app.scene.category.switch"})}]},n.cancelSwitch=function(){n.props.form.setFieldsValue({status:!0})},n.confirmSwitch=function(){n.props.form.setFieldsValue({status:!1})},n.handleCancel=function(){n.setState({visible:!1}),n.props.form.resetFields(),n.props.close()},n.handleOk=function(){return x((0,u.default)(n),void 0,void 0,c.default.mark(function e(){var t,a,n,r,o,s,l,i,p=this;return c.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.props,a=t.form,n=a.validateFields,r=a.getFieldsValue,o=a.resetFields,s=t.dispatch,l=t.close,i=t.id,n(function(e){return x(p,void 0,void 0,c.default.mark(function t(){var a,n,p;return c.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:if(a=r(),n=new FormData,a.status=!0===a.status?1:0,a.is_recommend=!0===a.is_recommend?1:0,Object.keys(a).forEach(function(e){var t=a[e];if(void 0!==t){if("object"===typeof t&&t){if(Array.isArray(t)&&t[0].url)return;return n.append(e,t[0].originFileObj,t[0].name)}n.append(e,t)}}),i&&n.append("id",i),console.info("params__",{values:a,params:n,id:i}),!i){t.next=15;break}return t.next=12,s({payload:{params:n,id:i},type:"template/patch"});case 12:t.t0=t.sent,t.next=18;break;case 15:return t.next=17,s({payload:n,type:"template/create"});case 17:t.t0=t.sent;case 18:p=t.t0,p&&(l(),o());case 20:case"end":return t.stop()}},t)}))});case 2:case"end":return e.stop()}},e,this)}))},n.normFile=function(e){return Array.isArray(e)?e:e&&Array.isArray(e.fileList)?e.fileList.slice(-1):e&&e.fileList},n.renderFieldName=function(){var e=(0,u.default)(n);return(0,M.default)(function(t,a,r){var o=n.props,c=o.form.getFieldDecorator,d=o.id,f=n.state.formItemLayout,u=t.name,m=t.options,g=t.input_type,h=t.placeholder,y=t.label,M=t.type,E=t.properties,w=void 0===E?{}:E,S=v.default.createElement(p.default,{type:g,placeholder:h}),_=!1,x="";if(t.name in a&&("switch"===t.type?t.options.initialValue=!!+a[t.name]:t.options.initialValue=a[t.name]),"switch"===M&&(d&&!0===m.initialValue&&"status"===t.name&&(_=!0,x=a.tool_count>0?(0,b.formatMessage)({id:"app.scene.category.has_tool_offline_hint"}):(0,b.formatMessage)({id:"app.scene.category.offline_hint"})),S=v.default.createElement(i.default,null)),"textarea"===M){var R=p.default.TextArea;S=v.default.createElement(R,Object.assign({},w))}return v.default.createElement(l.default.Item,Object.assign({key:u},f,{label:y}),_?v.default.createElement(s.default,{title:x,okText:(0,b.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,b.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",onCancel:e.cancelSwitch,onConfirm:e.confirmSwitch},c(u,m)(S)):c(u,m)(S))},E.default)},n}return(0,f.default)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.fields,r=this.props,s=r.visible,i=r.form,p=i.getFieldError,c=i.getFieldValue,d=r.caption,f=(r.id,r.list,r.record),u=void 0===f?{}:f,m=this.handleOk,g=this.handleCancel,h=n.map(function(t){var a="renderField_".concat(t.name),n=e[a];n||(n=e[a]=e.renderFieldName());var r=p(t.name),o=c(t.name);return n(t,u,o,r)});return v.default.createElement(o.default,{title:d,visible:a||s,onOk:m,onCancel:g},v.default.createElement(l.default,{autoComplete:"off"},h))}}]),a}(v.PureComponent);R=_([(0,y.connect)(function(e){var t=e.template.list;return{list:t}}),l.default.create()],R);var k=R;t.default=k},TtxD:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var o=r(a("2/Rp"));a("5NDa");var s=r(a("5rEg"));a("jCWc");var l=r(a("kPKH"));a("14J3");var i=r(a("BMrR"));a("y8nQ");var p=r(a("Vl3Y"));a("OaEy");var c=r(a("2fM7")),d=r(a("2Taf")),f=r(a("vZ4D")),u=r(a("MhPg")),m=r(a("l4Ni")),g=r(a("ujKo")),h=n(a("q1tI")),y=a("LLXN"),v=r(a("kRXd"));function b(e){return function(){var t,a=(0,g.default)(e);if(M()){var n=(0,g.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,m.default)(this,t)}}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var E=function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s},w=function(e){(0,u.default)(a,e);var t=b(a);function a(){var e;return(0,d.default)(this,a),e=t.apply(this,arguments),e.handleValues=function(){e.props.form.validateFields(function(t,a){t||e.props.search(a)})},e.reset=function(){e.props.form.resetFields(),e.props.search()},e}return(0,f.default)(a,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.statuses,n=c.default.Option,r=Object.keys(a).map(function(e){return h.default.createElement(n,{key:e,value:e},a[e])});return h.default.createElement(p.default,{autoComplete:"off",className:v.default["search-wraper"]},h.default.createElement(i.default,{className:"operation-bar ".concat(v.default.operations),gutter:10,type:"flex"},h.default.createElement(l.default,{span:8},h.default.createElement(i.default,{className:v.default.row},h.default.createElement("div",{className:v.default.operation},t("name")(h.default.createElement(s.default,{placeholder:(0,y.formatMessage)({id:"app.message.template.search.name"}),onPressEnter:this.handleValues}))),h.default.createElement("div",{className:v.default.operation},t("status")(h.default.createElement(c.default,{placeholder:(0,y.formatMessage)({id:"app.scene.tools.search.status"})},h.default.createElement(n,{value:"",className:v.default.all},(0,y.formatMessage)({id:"app.scene.tools.search.allstatus"})),r))))),h.default.createElement(l.default,{span:9},h.default.createElement("div",{className:v.default["operation-btn"]},h.default.createElement(o.default,{type:"primary",icon:"search",onClick:this.handleValues},(0,y.formatMessage)({id:"app.scene.tools.search.btn"}))),h.default.createElement("div",{className:v.default["operation-btn"]},h.default.createElement(o.default,{type:"primary",onClick:this.reset},(0,y.formatMessage)({id:"app.scene.tools.search.reset"})))),h.default.createElement(l.default,{span:7,className:v.default.pullright},h.default.createElement("div",{className:v.default["operation-btn"]},h.default.createElement(o.default,{type:"primary",onClick:this.props.add},this.props.addTitle)))))}}]),a}(h.PureComponent);w=E([p.default.create()],w);var S=w;t.default=S},kRXd:function(e,t,a){e.exports={operation:"antd-pro-pages-operation-message-template-components-operation-bar.css-operation","operation-btn":"antd-pro-pages-operation-message-template-components-operation-bar.css-operation-btn","search-wraper":"antd-pro-pages-operation-message-template-components-operation-bar.css-search-wraper","search-btn":"antd-pro-pages-operation-message-template-components-operation-bar.css-search-btn",all:"antd-pro-pages-operation-message-template-components-operation-bar.css-all",offline:"antd-pro-pages-operation-message-template-components-operation-bar.css-offline",row:"antd-pro-pages-operation-message-template-components-operation-bar.css-row",pullright:"antd-pro-pages-operation-message-template-components-operation-bar.css-pullright"}}}]);