(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[64],{b7TT:function(t,e,a){"use strict";var n=a("g09b");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("d6i3")),u=n(a("p0pE")),s=n(a("jehZ")),i=n(a("cr+I")),c=a("eHEb");function l(){return{state:{list:[],total:null,pages:null,page:null,pageSize:20,cates:[],statuses:["0","1"],positions:new Map,clients:new Map,loading:!1,filter:{}},reducers:{updateState:function(t,e){var a=(0,s.default)({},e.payload);return(0,u.default)({},t,a)},save:function(t,e){var a=e.payload,n=a.list,r=a.total,s=a.pages;return(0,u.default)({},t,{list:n,total:r,pages:s})},saveCates:function(t,e){var a=e.payload.cates;return(0,u.default)({},t,{cates:a})},saveStatuses:function(t,e){var a=e.payload.statuses;return(0,u.default)({},t,{statuses:a})},savePositions:function(t,e){var a=e.payload.positions,n=new Map;return Array.isArray(a)&&a.map(function(t){n.set(t.value,t.key)}),(0,u.default)({},t,{positions:n})},saveClients:function(t,e){var a=e.payload.clients,n=new Map;return Object.keys(a).map(function(t){n.set(t,a[t])}),(0,u.default)({},t,{clients:n})},saveSingle:function(t,e){var a=e.payload.item,n=(0,u.default)({},t),r=n.list;return r=r.map(function(t){return t.id===a.id?a:t}),(0,u.default)({},t,{list:r})},batchSaveStatus:function(t,e){var a=e.payload,n=a.ids,r=a.status,s=a.failCates,i=(0,u.default)({},t),c=i.list;return c=c.map(function(t){return n.indexOf(t.id)>-1&&-1===s.indexOf(t.cate_id)&&(t.status=r),t}),(0,u.default)({},t,{list:c})},deleteUpdate:function(t,e){var a=e.payload.deletedId,n="".concat(a).split(","),r=t.list;return r=r.filter(function(t){return-1===n.indexOf("".concat(t.id))}),(0,u.default)({},t,{list:r})},changePageSize:function(t,e){var a=e.payload,n=a.page,r=a.pageSize;return(0,u.default)({},t,{page:n,pageSize:r})}},effects:{create:r.default.mark(function t(e,a){var n,u,s,i;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload,u=a.call,s=a.put,t.next=4,u(c.create,n);case 4:if(i=t.sent,!i||0!==i.code){t.next=9;break}return t.next=8,s({type:"reload"});case 8:return t.abrupt("return",i);case 9:case"end":return t.stop()}},t)}),upload:r.default.mark(function t(e,a){var n,u,s,i;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload,u=a.call,s=a.put,t.next=4,u(c.upload,n);case 4:if(i=t.sent,!i||0!==i.code){t.next=9;break}return t.next=8,s({type:"reload"});case 8:return t.abrupt("return",i);case 9:case"end":return t.stop()}},t)}),patch:r.default.mark(function t(e,a){var n,u,s,i,l,d;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload,u=n.params,s=n.id,i=a.call,l=a.put,t.next=4,i(c.patch,u);case 4:if(d=t.sent,!d||0!==d.code){t.next=9;break}return t.next=8,l({type:"fetchSingle",payload:{id:s}});case 8:return t.abrupt("return",d);case 9:case"end":return t.stop()}},t)}),patchStatus:r.default.mark(function t(e,a){var n,u,s,i,l,d;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload,u=n.status,s=n.id,i=a.call,l=a.put,t.next=4,i(c.patchStatus,{status:u,id:s});case 4:if(d=t.sent,!d||0!==d.code){t.next=9;break}return t.next=8,l({type:"fetchSingle",payload:{id:s}});case 8:return t.abrupt("return",d);case 9:case"end":return t.stop()}},t)}),getImportTemplate:r.default.mark(function t(e,a){var n,u,s;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=a.call,a.put,t.next=3,n(c.getImportTemplate);case 3:u=t.sent,s=u.data,s&&s.advert_import_template&&window.open(s.advert_import_template);case 6:case"end":return t.stop()}},t)}),fetchClients:function(t){var e=r.default.mark(a);function a(a,n){var u=arguments;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.delegateYield(t.apply(this,u),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}},e,this)}return a.toString=function(){return t.toString()},a}(r.default.mark(function t(e,a){var n,u,s,i;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=a.call,u=a.put,t.next=3,n(fetchClients);case 3:return s=t.sent,i=s.data,t.next=7,u({type:"saveClients",payload:{clients:i}});case 7:case"end":return t.stop()}},t)})),fetchStatuses:r.default.mark(function t(e,a){var n,u,s,i;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=a.call,u=a.put,t.next=3,n(c.fetchStatuses);case 3:return s=t.sent,i=s.data,t.next=7,u({type:"saveStatuses",payload:{statuses:i}});case 7:case"end":return t.stop()}},t)}),fetch:r.default.mark(function t(e,a){var n,u,i,l,d,p,o,f,h;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=a.call,u=a.put,i=(0,s.default)({},e.payload),l=i.page,t.next=5,n(c.fetch,i);case 5:if(d=t.sent,p=d.data,o=p.list,f=p.total_count,h=p.total_page,t.t0=l,!t.t0){t.next=14;break}return t.next=14,u({type:"updateState",payload:{page:l}});case 14:return t.next=16,u({type:"save",payload:{list:o,total:f,pages:h}});case 16:case"end":return t.stop()}},t)}),fetchSingle:r.default.mark(function t(e,a){var n,u,s,i,l;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload.id,u=a.call,s=a.put,t.next=4,u(c.fetch,{id:n});case 4:if(i=t.sent,!i||0!==i.code){t.next=9;break}return l=i.data.list.filter(function(t){return t.id==n})[0],t.next=9,s({type:"saveSingle",payload:{item:l}});case 9:case"end":return t.stop()}},t)}),batchModify:r.default.mark(function t(e,a){var n,u,s,i,l,d,p;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload,u=n.id,s=n.status,i=a.call,l=a.put,t.next=4,i(c.batchModify,{id:u,status:s});case 4:return d=t.sent,p=d.data,console.info("data_batchmodify",p),t.next=9,l({type:"batchSaveStatus",payload:{ids:u,status:s,failCates:Array.isArray(p)&&p||[]}});case 9:case"end":return t.stop()}},t)}),delete:r.default.mark(function t(e,a){var n,u,s;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload.ids,u=a.call,s=a.put,console.info("id",n),t.next=5,u(c.deleteData,{ids:n});case 5:return t.next=7,s({type:"deleteUpdate",payload:{deletedId:n}});case 7:case"end":return t.stop()}},t)}),reload:r.default.mark(function t(e,a){var n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=a.put,a.select,t.next=3,n({type:"fetch"});case 3:case"end":return t.stop()}},t)})},subscriptions:{setup:function(t){var e=t.dispatch,a=t.history;return a.listen(function(t){var a=t.pathname,n=t.search,r=i.default.parse(n);"/operation/advertisement"===a&&e({type:"fetch",payload:r})})}}}}var d=l();e.default=d},eHEb:function(t,e,a){"use strict";var n=a("g09b");Object.defineProperty(e,"__esModule",{value:!0}),e.create=i,e.upload=l,e.fetch=p,e.getImportTemplate=f,e.deleteData=v;var r=n(a("d6i3")),u=n(a("1l/V")),s=n(a("t3Un"));function i(t){return c.apply(this,arguments)}function c(){return c=(0,u.default)(r.default.mark(function t(e){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.default)("/admin/gift/addTool",{method:"POST",headers:{"Content-Type":""},body:e}));case 1:case"end":return t.stop()}},t)})),c.apply(this,arguments)}function l(t){return d.apply(this,arguments)}function d(){return d=(0,u.default)(r.default.mark(function t(e){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.default)("/ad/advertising/importCsv",{method:"POST",headers:{"Content-Type":""},body:e}));case 1:case"end":return t.stop()}},t)})),d.apply(this,arguments)}function p(t){return o.apply(this,arguments)}function o(){return o=(0,u.default)(r.default.mark(function t(e){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.default)("/ad/advertising/getList",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)})),o.apply(this,arguments)}function f(t){return h.apply(this,arguments)}function h(){return h=(0,u.default)(r.default.mark(function t(e){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.default)("/ad/advertising/getImportTemplate",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)})),h.apply(this,arguments)}function v(t){return y.apply(this,arguments)}function y(){return y=(0,u.default)(r.default.mark(function t(e){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.default)("/ad/advertising/deleteData",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}));case 1:case"end":return t.stop()}},t)})),y.apply(this,arguments)}}}]);