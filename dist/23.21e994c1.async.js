(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"6gDs":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV"));a("+L6B");var d=l(a("2/Rp"));a("IzEo");var u=l(a("bx4M"));a("sPJy");var c=l(a("bE4q"));a("i5XK");var s=l(a("jq9l"));a("P2fV");var i=l(a("NJEC"));a("/zsF");var f=l(a("PArb"));a("14J3");var o=l(a("BMrR"));a("jCWc");var m=l(a("kPKH"));a("Pwec");var p=l(a("CtXQ")),g=l(a("d6i3")),y=l(a("1l/V"));a("miYZ");var v=l(a("tsqr")),k=l(a("2Taf")),E=l(a("vZ4D")),b=l(a("rlhR")),h=l(a("MhPg")),M=l(a("l4Ni")),C=l(a("ujKo"));a("y8nQ");var w=l(a("Vl3Y"));a("OaEy");var x=l(a("2fM7"));a("5NDa");var _=l(a("5rEg"));a("B9cy");var L=l(a("Ol7k"));a("iQDF");var D,R,N,I,S=l(a("+eQT")),G=a("+n12"),P=a("tQjW"),j=a("MuoO"),A=l(a("wY1l")),H=n(a("q1tI")),O=a("LLXN"),z=l(a("LvDl")),B=(a("fPeI"),l(a("shAx")));function T(e){return function(){var t,a=(0,C.default)(e);if(F()){var l=(0,C.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,M.default)(this,t)}}function F(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}S.default.RangePicker,a("wd/R"),L.default.Sider,L.default.Content;var J=_.default.TextArea;_.default.Search,x.default.Option;var V=(D=(0,j.connect)(function(e){var t=e.customer,a=t.feedbackData,l=t.category,n=t.statusList,r=t.customer.customer_list,d=e.routing.location.pathname,u=e.memberInfo.data.keys;return{feedbackData:a,keys:u,pathname:d,category:l,statusList:n,customer_list:r}}),R=w.default.create(),D(N=R((I=function(e){(0,h.default)(a,e);var t=T(a);function a(e){var l;return(0,k.default)(this,a),l=t.call(this,e),l.replySubmit=function(e){var t=l.state.reply_content;if(!t.trim())return l.clickReply(),void v.default.error("".concat((0,O.formatMessage)({id:"app.feedback.pleaseReply"})));(0,P.reply)({ids:l.props.feedbackData.id+"",status:2,reply_content:t}).then(function(e){e&&!e.code&&l.updataConfiList()})},l.rejectHandel=function(){(0,P.reply)({ids:l.props.feedbackData.id+"",status:3}).then(function(e){e&&!e.code&&l.updataConfiList()})},l.handleCancel=function(){l.setState({imgModel:!1})},l.imgshow=function(e){var t=l.props.feedbackData;l.setState({currImg:t.pic_url[e],imgModel:!0})},l.clickReply=function(){document.getElementsByTagName("textarea")[0].focus()},l.changeContent=function(e){var t=e.target.value;l.setState({reply_content:t},function(){console.log(l.state.reply_content)})},l.state={imgModel:!1,currImg:"",isCommit:!0,inputOnFocus:"",reply_content:""},z.default.bindAll((0,b.default)(l),["updataConfiList"]),l}return(0,E.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.getEnumList().then(function(){e.updataConfiList()})}},{key:"getEnumList",value:function(){var e=(0,y.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,function(){t({type:"permission/getRoleList"})}();case 3:return e.next=5,function(){t({type:"permission/getMemberStatusList"})}();case 5:t({type:"customer/getCategory"}),t({type:"customer/getAllVersion"}),t({type:"customer/getFeedbackStatusList"}),t({type:"customer/getCustomer"});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updataConfiList",value:function(){var e=this.props.dispatch,t=this.props.computedMatch.params;e({type:"customer/getOneFeedback",payload:t})}},{key:"render",value:function(){var e,t=this,a=this.props,l=a.feedbackData,n=(a.roleList,a.statusList,a.keys,a.pathname,a.category,a.version,a.customer_list,a.form.getFieldDecorator,this.state.isCommit,{width:"25%",textAlign:"left"}),g={background:"#4fbcff",width:"60px",height:"60px",color:"#fff",borderRadius:"50%",lineHeight:"60px",textAlign:"center"},y=function(){return l.nickname?H.default.createElement("div",{style:g},l.nickname.slice(0,1)):H.default.createElement("div",{style:g},H.default.createElement(p.default,{style:{fontSize:"24px",lineHeight:"60px",color:"#fff"},type:"user"}))},v=function(){return l.operater_nickname?H.default.createElement("div",{style:g},l.operater_nickname.slice(0,1)):H.default.createElement("div",{style:g},H.default.createElement(p.default,{style:{fontSize:"24px",lineHeight:"60px",color:"#fff"},type:"user"}))},k=function(e){if("array"!==(0,G.type)(e.listImage))return H.default.createElement("span",null);var a=e.listImage.map(function(e,a){return H.default.createElement(m.default,{key:a,span:8},H.default.createElement("img",{onClick:function(e){t.imgshow(a)},style:{width:"120px",cursor:"pointer"},key:a,src:e}))});return H.default.createElement(o.default,{gutter:16,style:{width:"400px"}},a)};e=1==l.status?[H.default.createElement("span",null,(0,O.formatMessage)({id:"app.feedback.solve"})),H.default.createElement("span",{onClick:this.clickReply,className:B.default.greenHuifu}," ",H.default.createElement(f.default,{type:"vertical"}),(0,O.formatMessage)({id:"app.feedback.reply"})),H.default.createElement("span",null,H.default.createElement(f.default,{type:"vertical"}),H.default.createElement(i.default,{title:(0,O.formatMessage)({id:"app.feedback.makesureREJECT"}),onConfirm:function(){return t.rejectHandel()}},H.default.createElement("a",{href:"#",className:B.default.dengerColor},(0,O.formatMessage)({id:"app.feedback.reject"}))))]:2==l.status?[H.default.createElement("span",{className:B.default.greenHuifu},(0,O.formatMessage)({id:"app.feedback.solved"}))]:[H.default.createElement("span",{className:B.default.redBohui},(0,O.formatMessage)({id:"app.feedback.rejected"}))];var E=function(t){var a=t.children;return H.default.createElement(s.default,{actions:e,author:H.default.createElement("a",null,l.nickname),avatar:H.default.createElement(y,null),content:H.default.createElement("div",null,H.default.createElement("p",null,l.content),H.default.createElement(k,{listImage:l.pic_url||[]}))},a)};return H.default.createElement("div",null,H.default.createElement("style",null,"\n            .web .ant-modal-content {\n                  position: relative;\n                  background-color: #000 !important;\n                  border: 0;\n                  border-radius: 4px;\n                  background-clip: padding-box;\n                  box-shadow: 0 0 0 rgba(0, 0, 0, 0) !important;\n                }\n            .web .ant-modal-body {\n              padding: 0 !important;\n              font-size: 0 !important;\n              line-height: 1 !important;\n            }\n            "),H.default.createElement("div",{className:B.default.breadcrumbBox},H.default.createElement(c.default,null,H.default.createElement(c.default.Item,null,H.default.createElement(p.default,{type:"lock"}),H.default.createElement("span",null,(0,O.formatMessage)({id:"menu.feedback"}))),H.default.createElement(c.default.Item,null,H.default.createElement(A.default,{to:"/feedback/customer"},(0,O.formatMessage)({id:"menu.feedback.customer"}))),H.default.createElement(c.default.Item,null,(0,O.formatMessage)({id:"app.feedback.feeddetail"})))),H.default.createElement("div",{className:B.default.addBtn},H.default.createElement(u.default,{title:(0,O.formatMessage)({id:"app.feedback.feeddetail"}),className:"styles-card",bordered:!0},H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.nickname"}),":",l.nickname),H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.feedbackID"}),":",l.user_id),H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.phone"}),":",l.tell),H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.phonetype"}),":",l.device_brand," ",l.device_version),l.lat&&H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.zone"}),":",l.device_ip," lat:",l.lat," lon:",l.lon),!l.lat&&H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.zone"}),":",l.device_ip),H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.networkstatus"}),":",l.network),H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.os"}),":",l.OSVersion),H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.appversions"}),":",l.version),H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.issueCategory"}),":",l.category_data&&l.category_data.name||""),H.default.createElement(u.default.Grid,{style:n},(0,O.formatMessage)({id:"app.feedback.resolveDate"}),":",l.update_time))),H.default.createElement(u.default,{bordered:!0},H.default.createElement(E,null,2==l.status&&H.default.createElement(s.default,{author:H.default.createElement("a",null,l.operater_nickname),avatar:H.default.createElement(v,null),content:H.default.createElement("div",null,H.default.createElement("p",null,l.reply_content))}))),!(1!=l.status)&&H.default.createElement(u.default,{title:(0,O.formatMessage)({id:"app.feedback.reply"}),style:{borderTop:0}},H.default.createElement(J,{rows:4,onChange:this.changeContent}),H.default.createElement(d.default,{type:"primary",style:{marginTop:"10px",float:"right"},onClick:this.replySubmit},(0,O.formatMessage)({id:"app.feedback.reply"}))),H.default.createElement(r.default,{title:null,visible:this.state.imgModel,onCancel:this.handleCancel,footer:null,closable:!1,centered:!0,maskClosable:!0,wrapClassName:"web"},H.default.createElement("div",{className:"outer-iframe"},H.default.createElement("div",{className:"d-iframe"},H.default.createElement("img",{src:this.state.currImg})))))}}]),a}(H.PureComponent),N=I))||N)||N),q=V;t.default=q}}]);