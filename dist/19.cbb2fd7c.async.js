(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{yVde:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var r=l(a("wCAj"));a("P2fV");var i=l(a("NJEC"));a("+BJd");var u=l(a("mr32"));a("IzEo");var o=l(a("bx4M"));a("14J3");var c=l(a("BMrR"));a("+L6B");var d=l(a("2/Rp"));a("jCWc");var f=l(a("kPKH")),s=l(a("2Taf")),p=l(a("vZ4D")),m=l(a("rlhR")),h=l(a("MhPg")),v=l(a("l4Ni")),y=l(a("ujKo"));a("OaEy");var g=l(a("2fM7"));a("y8nQ");var E=l(a("Vl3Y"));a("5NDa");var b,w,M,O,S=l(a("5rEg")),x=n(a("q1tI")),k=a("MuoO"),j=l(a("71zH")),z=a("LLXN"),C=(l(a("3a4m")),l(a("z8Mz"))),I=l(a("HejF"));function V(e){return function(){var t,a=(0,y.default)(e);if(D()){var l=(0,y.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,v.default)(this,t)}}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}S.default.Search,E.default.Item,S.default.TextArea;var R=g.default.Option,L=(b=E.default.create(),w=(0,k.connect)(function(e){var t=e.webVersion,a=t.filter,l=t.list,n=t.statusMap,r=void 0===n?{}:n,i=t.countryMap,u=void 0===i?[]:i;return{filter:a,list:l,statusMap:r,countryMap:u}}),b(M=w((O=function(e){(0,h.default)(a,e);var t=V(a);function a(e){var l;return(0,s.default)(this,a),l=t.call(this,e),l.changeFilter=function(e){var t=l.props.dispatch;return new Promise(function(a){t({type:"webVersion/filter",payload:{filter:e}}),a()})},l.fetch=function(e){var t=l.props.dispatch;l.changeFilter(e).then(function(){t({type:"webVersion/fetch"})})},l.onEdit=function(e){l.setState({detail:e||{}},function(){l.setState({showModel:!0})})},l.onClose=function(){l.setState({showModel:!1})},l.onDel=function(e){var t=l.props.dispatch;t({type:"webVersion/del",payload:{id:e}})},l.onSearch=function(){var e=l.props.form.validateFields;e(function(e,t){l.fetch(t)})},l.SearchBar=function(){var e=(0,m.default)(l),t=e.props,a=t.form.getFieldDecorator,n=t.countryMap,r=e.onSearch,i=e.onEdit,u={labelCol:{span:8},wrapperCol:{span:16}};return x.default.createElement(o.default,{className:"styles-card",bordered:!0},x.default.createElement(E.default,u,x.default.createElement(c.default,{gutter:16,className:"regDate"},x.default.createElement(f.default,{lg:6,md:12,sm:24},x.default.createElement(E.default.Item,{label:"\u5b89\u5353\u7248\u672c"},a("version")(x.default.createElement(S.default,{placeholder:"\u8bf7\u8f93\u5165\u5b89\u5353\u7248\u672c"})))),x.default.createElement(f.default,{lg:6,md:12,sm:24},x.default.createElement(E.default.Item,{label:"\u6295\u653e\u56fd\u5bb6"},a("nation")(x.default.createElement(g.default,{placeholder:"\u8bf7\u9009\u62e9\u6295\u653e\u56fd\u5bb6"},n.map(function(e){return x.default.createElement(R,{key:e.id,value:e.id},e.name)}))))),x.default.createElement(f.default,{lg:6,md:12,sm:24},x.default.createElement(d.default,{type:"primary",onClick:r},(0,z.formatMessage)({id:"app.content.search"})),x.default.createElement(d.default,{style:{marginLeft:8},onClick:function(){i()}},"\u65b0\u589e")))))},l.TableList=function(){var e=l.props,t=e.list,a=e.filter,n=e.statusMap,o=e.dispatch,c=e.countryMap,f=(0,m.default)(l),s=f.onDel,p=f.onEdit,h=[{title:"id",dataIndex:"id",key:"id"},{title:"\u5bf9\u5e94\u5b89\u5353\u7248\u672c",dataIndex:"version",key:"version"},{title:"\u6295\u653e\u56fd\u5bb6",dataIndex:"nation",key:"nation",render:function(e){return(c.find(function(t){return t.id==e})||{})["name"]||"\u9ed8\u8ba4"}},{title:"\u8bf4\u660e",dataIndex:"info",key:"info"},{title:"MD5\u503c",dataIndex:"md5",key:"md5"},{title:"zip\u5305\u5730\u5740",dataIndex:"url",key:"url",width:"160px"},{title:"\u8be6\u7ec6\u914d\u7f6e",dataIndex:"ext_json",key:"ext_json",width:"200px"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return x.default.createElement(u.default,{color:1==e?"green":"grey"},n[e])}},{title:"\u64cd\u4f5c",dataIndex:"active",key:"active",render:function(e,t){return x.default.createElement(x.default.Fragment,null,x.default.createElement("b",null,"(",/f1s1\.cn/.test(I.default)?"\u6d4b\u8bd5\u73af\u5883":"\u751f\u4ea7\u73af\u5883",")"),x.default.createElement(i.default,{title:"\u786e\u5b9a\u5220\u9664\uff1f",onConfirm:function(){o({type:"webVersion/SetStatus",payload:{id:t.id,status:+!+t.status}})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},x.default.createElement(d.default,{type:0==t.status?"green":"danger",size:"small",style:{marginLeft:"8px"}},0==t.status?"\u4e0a\u67b6":"\u4e0b\u67b6")),x.default.createElement(d.default,{type:"primary",size:"small",onClick:function(){p(t)},style:{marginLeft:"8px"}},"\u7f16\u8f91"),x.default.createElement(i.default,{title:"\u786e\u5b9a\u5220\u9664\uff1f",onConfirm:s.bind(this,t.id),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},x.default.createElement(d.default,{type:"danger",size:"small",style:{marginLeft:"8px"}},"\u5220\u9664")))}}];return x.default.createElement(r.default,{columns:h,dataSource:t,align:"center",bordered:!0,scroll:{x:!0},rowKey:function(e,t){return"".concat(e.id).concat(t)},pagination:{position:"both",pageSize:a.page_size,showSizeChanger:!0,pageSizeOptions:["20","30","40"],onShowSizeChange:l.onShowSizeChange,total:a.total,current:a.page,showTotal:function(e){return(0,z.formatMessage)({id:"app.glob.pagetotal"},{total:a.total})},size:"small",onChange:l.onShowSizeChange}})},l.onShowSizeChange=function(e,t){fetch({page:e,page_size:t})},l.state={showModel:!1,detail:{}},l}return(0,p.default)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.TableList,t=this.SearchBar,a=[{icon:"desktop",title:"\u7cfb\u7edf\u7ba1\u7406"},{icon:"robot",title:"H5\u672c\u5730\u7ba1\u7406"}],l=this.state,n=l.detail,r=l.showModel,i=this.onClose;return x.default.createElement(x.default.Fragment,null,x.default.createElement(j.default,{items:a}),x.default.createElement(t,null),x.default.createElement(e,null),r&&x.default.createElement(C.default,{detail:n,onClose:i}))}}]),a}(x.Component),M=O))||M)||M),N=L;t.default=N},z8Mz:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("BoS7");var r=n(a("Sdc0"));a("Pwec");var i=n(a("CtXQ"));a("+L6B");var u=n(a("2/Rp"));a("DZo9");var o=n(a("8z0m"));a("OaEy");var c=n(a("2fM7"));a("y8nQ");var d=n(a("Vl3Y"));a("2qtc");var f=n(a("kLXV"));a("miYZ");var s=n(a("tsqr")),p=n(a("2Taf")),m=n(a("vZ4D")),h=n(a("MhPg")),v=n(a("l4Ni")),y=n(a("ujKo"));a("5NDa");var g=n(a("5rEg")),E=l(a("q1tI")),b=a("MuoO"),w=n(a("HejF"));function M(e){return function(){var t,a=(0,y.default)(e);if(O()){var l=(0,y.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,v.default)(this,t)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var S=function(e,t,a,l){var n,r=arguments.length,i=r<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,a):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,l);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},x=g.default.TextArea,k=function(e){(0,h.default)(a,e);var t=M(a);function a(e){var l;return(0,p.default)(this,a),l=t.call(this,e),l.onOk=function(){var e=l.props,t=e.form.validateFields,a=e.dispatch,n=e.detail,r=e.onClose;e.countryMap;t(function(e,t){if(!e){var l=(t.url[0].url||t.url[0].response.path).replace(/(.*\/)*([^.]+).*/gi,"$2"),i=t.ext_json;try{i=JSON.stringify(JSON.parse(t.ext_json))}catch(e){return void s.default.error("\u4e0d\u662f\u6b63\u786ejson\u683c\u5f0f")}a({type:"webVersion/".concat(n.id?"modify":"save"),payload:Object.assign(Object.assign(Object.assign({},n),t),{md5:l,url:t.url[0].url||t.url[0].response.url,ext_json:i,status:+!!t.status})}).then(function(e){0==e.code&&r()})}})},l.normFile=function(e){return console.log(e),Array.isArray(e)?e:"error"!=e.file.status&&-1!=e.file.type.indexOf("zip")?e&&[e.fileList[e.fileList.length-1]]:void 0},l.state={fileList:[]},l}return(0,m.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.detail.url;if(e){var t=e.replace(/(.*\/)*([^.]+).*/gi,"$2"),a=e?{uid:t,name:"".concat(t,".zip"),status:"done",url:e}:null;this.setState({fileList:[a]})}}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.countryMap,l=e.onClose,n=e.detail,s=e.detail,p=s.version,m=s.nation,h=s.info,v=s.ext_json,y=void 0===v?'{ "vip": "vip.html", "recommend": "recommend.html", "wallet": "wallet.html#wallet", "recharge": "wallet.html#wallet/recharge", "pay": "wallet.html#wallet/pay" }':v,b=s.status,M=void 0!==b&&b,O=e.dispatch,S=this.onOk,k={labelCol:{span:8},wrapperCol:{span:16}},j={multiple:!1};return E.default.createElement(f.default,{title:"".concat(Object.keys(n).length?"\u7f16\u8f91":"\u65b0\u589e").concat(/f1s1\.cn/.test(w.default)?"":"\u751f\u4ea7\u73af\u5883"),centered:!0,visible:!0,onOk:function(){return S()},onCancel:function(){return l()},className:"i_edit"},E.default.createElement("style",null,"\n             .i_edit .ant-upload.ant-upload-select{\n                  display:block\n              }\n            "),E.default.createElement(d.default.Item,Object.assign({},k,{label:"\u5b89\u5353\u7248\u672c"}),t("version",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bf9\u5e94\u7684\u5b89\u5353\u7248\u672c"}],initialValue:p})(E.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u5bf9\u5e94\u7684\u5b89\u5353\u7248\u672c"}))),E.default.createElement(d.default.Item,Object.assign({},k,{label:"\u6295\u653e\u56fd\u5bb6"}),t("nation","0"===m?{}:{initialValue:m})(E.default.createElement(c.default,{placeholder:"\u8bf7\u9009\u62e9\u6295\u653e\u56fd\u5bb6",style:{width:"100%"}},E.default.createElement(c.default.Option,{key:0,value:"0"},"\u9ed8\u8ba4"),a.map(function(e){return E.default.createElement(c.default.Option,{key:e.id,value:""+e.id},e.name)})))),E.default.createElement(d.default.Item,Object.assign({},k,{label:"h5 zip\u5305"}),t("url",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20zip\u6587\u4ef6\u5305"}],initialValue:this.state.fileList,valuePropName:"fileList",getValueFromEvent:this.normFile,trigger:"onChange"})(E.default.createElement(o.default,Object.assign({},j,{customRequest:function(e){var t=e.file,a=e.onSuccess,l=e.onError,n=new FormData;n.append("multiMedia",t),O({type:"webVersion/uploadMedia",payload:{multiMedia:t}}).then(function(e){e.code?l({}):a(e.data,t)})},beforeUpload:function(e,t){if(-1==e.type.indexOf("zip"))return!1}}),E.default.createElement(u.default,null,E.default.createElement(i.default,{type:"upload"})," \u4e0a\u4f20zip\u5305")))),E.default.createElement(d.default.Item,Object.assign({},k,{label:"h5 zip\u5305\u63cf\u8ff0"}),t("info",{initialValue:h})(E.default.createElement(g.default,{placeholder:"zip\u5305\u63cf\u8ff0"}))),E.default.createElement(d.default.Item,Object.assign({},k,{label:"\u8f93\u5165JSON\u914d\u7f6e"}),t("ext_json",{rules:[{required:!0,message:"\u8f93\u5165JSON\u914d\u7f6e"}],initialValue:y})(E.default.createElement(x,{placeholder:"\u8f93\u5165JSON\u914d\u7f6e",autoSize:{minRows:4}}))),E.default.createElement(d.default.Item,Object.assign({},k,{label:"\u662f\u5426\u4e0a\u67b6"}),t("status",{initialValue:!!+M,valuePropName:"checked"})(E.default.createElement(r.default,null))))}}]),a}(E.Component);k=S([d.default.create(),(0,b.connect)(function(e){var t=e.webVersion,a=t.filter,l=t.list,n=t.statusMap,r=t.countryMap,i=void 0===r?[]:r;return{filter:a,list:l,statusMap:n,countryMap:i}})],k);var j=k;t.default=j}}]);