(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{phja:function(e,t,a){"use strict";var i=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DjyN");var d=i(a("NUBc"));a("g9YV");var l=i(a("wCAj"));a("sPJy");var r=i(a("bE4q"));a("Pwec");var o=i(a("CtXQ")),u=i(a("d6i3")),s=i(a("1l/V")),c=i(a("2Taf")),f=i(a("vZ4D")),p=i(a("rlhR")),h=i(a("MhPg")),m=i(a("l4Ni")),b=i(a("ujKo"));a("5NDa");var v,y,g,k=i(a("5rEg")),E=a("o/YY"),C=(a("+n12"),i(a("wd/R")),a("MuoO")),_=n(a("q1tI")),L=a("LLXN"),x=(a("fPeI"),i(a("ZagU"))),w=i(a("yf4A"));function I(e){return function(){var t,a=(0,b.default)(e);if(S()){var i=(0,b.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,m.default)(this,t)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var M=k.default.Search;function D(e){return e?parseInt(e||0):0}var P=(v=(0,C.connect)(function(e){var t=e.permission,a=t.roleList,i=t.statusList,n=t.orderList,d=e.routing.location.pathname,l=e.memberInfo.data.keys;return{data:n,roleList:a,statusList:i,keys:l,pathname:d}}),v((g=function(e){(0,h.default)(a,e);var t=I(a);function a(e){var i;return(0,c.default)(this,a),i=t.call(this,e),i.lockHandle=function(e,t){var a=e.id;1!=t?(0,E.unlockMember)({member_id:a}).then(function(e){e.code||i.updataConfiList()}):(0,E.lockMember)({member_id:a}).then(function(e){e.code||i.updataConfiList()})},i.state={pagination:{page:1,total_page:0,page_size:20},addVisible:!1,editVisible:!1,editDataSource:{},isEditPw:!1},i.updataConfiList=i.updataConfiList.bind((0,p.default)(i)),i.onSearch=i.onSearch.bind((0,p.default)(i)),i.addVisbleHandle=i.addVisbleHandle.bind((0,p.default)(i)),i.handleTableChange=i.handleTableChange.bind((0,p.default)(i)),i.delRole=i.delRole.bind((0,p.default)(i)),i.onCloseEditModel=i.onCloseEditModel.bind((0,p.default)(i)),i.userEdit=i.userEdit.bind((0,p.default)(i)),i}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.updataConfiList()}},{key:"onSearch",value:function(e){var t=this;this.setState({pagination:{page:1,uid:e.trim()}},function(){t.updataConfiList()})}},{key:"getEnumList",value:function(){var e=(0,s.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,function(){t({type:"permission/getRoleList"})}();case 3:return e.next=5,function(){t({type:"permission/getMemberStatusList"})}();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updataConfiList",value:function(){var e=this.props.dispatch,t=this.state.pagination;e({type:"permission/fetchOrderList",payload:t})}},{key:"addVisbleHandle",value:function(e){var t=this;this.setState({addVisible:!this.state.addVisible},function(){"refresh"===e&&t.updataConfiList()})}},{key:"handleTableChange",value:function(e){var t=this.props.dispatch;t({type:"permission/getPublisherList",payload:{page:e,page_size:20}})}},{key:"delRole",value:function(e){var t=this;(0,E.del)({member_id:e}).then(function(e){e.code||t.updataConfiList()})}},{key:"userEdit",value:function(e,t){var a=this;this.setState({editDataSource:e,isEditPw:t||!1},function(){a.onCloseEditModel()})}},{key:"onCloseEditModel",value:function(e){var t=this;this.setState({editVisible:!this.state.editVisible},function(){"refresh"===e&&t.updataConfiList()})}},{key:"render",value:function(){var e=this.props,t=e.data,a=(e.roleList,e.statusList,e.keys,e.pathname,this.state),i=(a.addVisible,a.editVisible),n=a.editDataSource,u=a.isEditPw,s=[{title:"ID",dataIndex:"id",key:"id"},{title:"User ID",dataIndex:"uid",key:"uid"},{title:"Order ID",dataIndex:"order_id",key:"order_id"},{title:"Order type",dataIndex:"order_type",key:"order_type"},{title:"Order title",dataIndex:"order_title",key:"order_title"},{title:"Book id",dataIndex:"book_id",key:"book_id"},{title:"Chapter id",dataIndex:"chapter_id",key:"chapter_id"},{title:"Coins amount",dataIndex:"coins_amount",key:"coins_amount"},{title:"Created time",dataIndex:"created_at",key:"created_at"},{title:"Updated time",dataIndex:"updated_at",key:"updated_at"}];return _.default.createElement("div",null,_.default.createElement("style",null,"\n            .status-badge .ant-badge-status-dot{\n                height:8px;\n                width:8px\n            }\n            "),_.default.createElement("div",{className:x.default.breadcrumbBox},_.default.createElement(r.default,{style:{borderBottom:" 1px solid #ccc",paddingBottom:" 10px"}},_.default.createElement(r.default.Item,null,_.default.createElement(o.default,{type:"user"}),_.default.createElement("span",null,(0,L.formatMessage)({id:"menu.opUser"}))))),_.default.createElement("div",{className:x.default.addBtn},_.default.createElement("div",null,_.default.createElement(M,{placeholder:"User ID",enterButton:(0,L.formatMessage)({id:"app.pages.search"}),size:"default",onSearch:this.onSearch})),_.default.createElement("div",{className:x.default.btnBox}),_.default.createElement("div",null),_.default.createElement("div",null)),_.default.createElement(l.default,{columns:s,dataSource:t.data,pagination:!1,bordered:!0,scroll:{x:1300},rowKey:function(e,t){return"".concat(e.id).concat(t)}}),_.default.createElement("div",{className:x.default.rightPagination},_.default.createElement(d.default,{showTotal:function(e){return(0,L.formatMessage)({id:"app.glob.pagetotal"},{total:e})},current:D(t.page),pageSize:this.state.pagination.page_size||20,onChange:this.handleTableChange,total:D(t.total_count)})),i&&_.default.createElement(w.default,{visible:i,editDataSource:n,onCallback:this.onCloseEditModel,isEditPw:u}))}}]),a}(_.PureComponent),y=g))||y),V=P;t.default=V}}]);