(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{"/ZW3":function(e,t,a){e.exports={auto:"antd-pro-pages-operation-message-faq-auto-auto",list:"antd-pro-pages-operation-message-faq-auto-list"}},UC6Q:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("d6i3")),s=n(a("1l/V"));a("DjyN");var o=n(a("NUBc")),i=n(a("p0pE"));a("g9YV");var d=n(a("wCAj"));a("IzEo");var u=n(a("bx4M"));a("+L6B");var c=n(a("2/Rp"));a("14J3");var f=n(a("BMrR"));a("jCWc");var m=n(a("kPKH")),p=n(a("eHn4")),g=n(a("2Taf")),h=n(a("vZ4D")),v=n(a("rlhR")),y=n(a("MhPg")),_=n(a("l4Ni")),E=n(a("ujKo"));a("y8nQ");var b=n(a("Vl3Y"));a("iQDF");var x=n(a("+eQT"));a("5NDa");var k=n(a("5rEg"));a("OaEy");var M,S,w,q,R=n(a("2fM7")),C=n(a("ICWT")),I=a("+n12"),L=n(a("c0LQ")),N=a("VkhE"),T=n(a("P0iv")),B=a("MuoO"),P=r(a("q1tI")),D=n(a("LvDl")),F=(n(a("wY1l")),n(a("3a4m")),a("LLXN")),V=(n(a("Wwog")),n(a("UbMB"))),j=(n(a("UiDi")),n(a("frkn"))),O=n(a("zBCB")),U=n(a("jJkL"));function Y(e){return function(){var t,a=(0,E.default)(e);if(z()){var n=(0,E.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,_.default)(this,t)}}function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var W=R.default.Option,H=(k.default.Search,a("wd/R"),V.default.bind(U.default)),X=(x.default.MonthPicker,x.default.RangePicker),A=(M=b.default.create(),S=(0,B.connect)(function(e){var t=e.mess,a=t.feedList,n=t.feedRecentList,r=t.feedTypes,l=t.replyFeedParams,s=t.serviceMember,o=t.versions,i=t.feedStatuses,d=t.searchUsers,u=t.searchUsersTel,c=e.memberInfo.data.assistant_id;return{feedList:a,feedRecentList:n,feedTypes:r,replyFeedParams:l,serviceMember:s,versions:o,feedStatuses:i,searchUsers:d,assistant_id:c,searchUsersTel:u}}),M(w=S((q=function(e){(0,y.default)(a,e);var t=Y(a);function a(e){var n;return(0,g.default)(this,a),n=t.call(this,e),n.handleSubmit=function(e){console.info("handleSubmit__t",e);var t=n.props.form.getFieldsValue,a=t(),r=n.state,l=r.telephone,s=r.nickname,o=n.props,i=o.searchUsers,d=o.searchUsersTel,u={};if(a.faqtime&&(u.create_time_start=a.faqtime[0],u.create_time_end=a.faqtime[1],a.faqtime=null),a.dealtime&&(u.reply_time_start=a.dealtime[0],u.reply_time_end=a.dealtime[1],a.dealtime=null),l){var c=d.filter(function(e){return e["telephone"]==l});c.length&&(u.user_id=c[0]["id"])}if(s){var f=i.filter(function(e){return e["nickname"]==s});f.length&&(u.user_id=f[0]["id"])}e.export=void 0===e.export?0:e.export,n.setState(function(t){var n=t.filters;return Object.assign(n,a,u,Object.keys(e).length?e:{page:1})},function(){n.getList()})},n.handleOnReset=function(){n.telephoneRef.current;n.props.form.resetFields(),n.setState({telephone:"",nickname:"",filters:{page_size:20,page:1}},function(){n.getList()})},n.handleTableChange=function(e,t){n.handleSubmit({page:e})},n.onShowSizeChange=function(e,t){n.handleSubmit({page_size:t,page:e})},n.onChangeSearch=function(e,t){var a=n.props.dispatch;n.setState((0,p.default)({},e,t)),a("telephone"!=e?{type:"mess/getSearchUsers",payload:(0,p.default)({},e,t)}:{type:"mess/getSearchUsersTel",payload:(0,p.default)({},e,t)})},n.FormSearch=function(){var e=n.props.form.getFieldDecorator,t=n.props,a=t.searchUsers,r=t.feedStatuses,l=t.serviceMember,s=t.versions,o=t.searchUsersTel,i=n.state,d=(i.result,i.category,i.autocomplete,i.telephone,i.nickname,(0,v.default)(n)),p=d.onChangeSearch;return P.default.createElement("div",{className:U.default.addBtn},P.default.createElement(u.default,{title:(0,F.formatMessage)({id:"menu.operation.activity"}),className:U.default.card,bordered:!0},P.default.createElement(b.default,{layout:"vertical",hideRequiredMark:!0},P.default.createElement(f.default,{gutter:10},P.default.createElement(m.default,{lg:8,md:12,sm:24},P.default.createElement(b.default.Item,{label:(0,F.formatMessage)({id:"operation.messagefaq.faqtime"})},e("faqtime")(P.default.createElement(X,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}})))),P.default.createElement(m.default,{lg:8,md:12,sm:24},P.default.createElement(b.default.Item,{label:(0,F.formatMessage)({id:"operation.messagefaq.dealtime"})},e("dealtime")(P.default.createElement(X,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}})))),P.default.createElement(m.default,{lg:4,md:12,sm:24},P.default.createElement("div",{style:{color:"#000000d9"}},(0,F.formatMessage)({id:"operation.messagefaq.nickname"})),P.default.createElement(j.default,{style:{width:"100%",marginTop:"8px"},placeholder:(0,F.formatMessage)({id:"operation.messagefaq.nickname"}),onChange:p,dataSource:a,ref:n.nicknameRef,tag:"nickname",value:n.state.nickname})),P.default.createElement(m.default,{lg:4,md:12,sm:24},P.default.createElement("div",{style:{color:"#000000d9"}},(0,F.formatMessage)({id:"operation.messagefaq.tel"})),P.default.createElement(j.default,{style:{width:"100%",marginTop:"8px"},placeholder:(0,F.formatMessage)({id:"operation.messagefaq.tel"}),onChange:p,dataSource:o,ref:n.telephoneRef,tag:"telephone",value:n.state.telephone}))),P.default.createElement(f.default,{gutter:10},P.default.createElement(m.default,{lg:4,md:12,sm:24},P.default.createElement(b.default.Item,{label:(0,F.formatMessage)({id:"operation.messagefaq.uuid"})},e("user_id",{initialValue:""})(P.default.createElement(k.default,{placeholder:(0,F.formatMessage)({id:"operation.messagefaq.uuid"})})))),P.default.createElement(m.default,{lg:4,md:12,sm:24},P.default.createElement(b.default.Item,{label:(0,F.formatMessage)({id:"operation.messagefaq.version"})},e("version",{initialValue:""})(P.default.createElement(R.default,null,P.default.createElement(W,{value:""},(0,F.formatMessage)({id:"operation.messagefaq.allversion"})),s.map(function(e,t){return P.default.createElement(W,{value:e.value,key:t},e.key)}))))),P.default.createElement(m.default,{lg:4,md:12,sm:24},P.default.createElement(b.default.Item,{label:(0,F.formatMessage)({id:"operation.messagefaq.status"})},e("reply_status",{initialValue:""})(P.default.createElement(R.default,null,P.default.createElement(W,{value:""},(0,F.formatMessage)({id:"operation.messagefaq.allstatus"})),Object.keys(r).map(function(e,t){return P.default.createElement(W,{value:e,key:t},r[e])}))))),P.default.createElement(m.default,{lg:4,md:12,sm:24},P.default.createElement(b.default.Item,{label:(0,F.formatMessage)({id:"operation.messagefaq.service"})},e("member_id",{initialValue:""})(P.default.createElement(R.default,null,P.default.createElement(W,{value:""},(0,F.formatMessage)({id:"operation.messagefaq.allservice"})),l.map(function(e,t){return P.default.createElement(W,{value:e.id,key:t},e.nickname)}))))),P.default.createElement(m.default,{lg:8,md:12,sm:24,style:{paddingTop:"28px"}},P.default.createElement(c.default,{type:"primary",onClick:n.handleSubmit.bind((0,v.default)(n),{})},(0,F.formatMessage)({id:"form.operation.search"})),P.default.createElement(c.default,{style:{marginLeft:"8px"},type:"primary",onClick:n.handleSubmit.bind((0,v.default)(n),{export:1})},(0,F.formatMessage)({id:"app.content.export"})),P.default.createElement(c.default,{style:{marginLeft:"8px"},onClick:n.handleOnReset},(0,F.formatMessage)({id:"form.operation.reset"})))))))},n.TableList=function(){var e=n.props,t=e.feedList.list,a=e.feedStatuses,r=e.serviceMember,l=[{title:"ID",dataIndex:"id",key:"id",width:"80px"},{title:(0,F.formatMessage)({id:"operation.messagefaq.uuid"}),dataIndex:"user_id",key:"user_id",width:"80px"},{title:"NickID",dataIndex:"nick_id",key:"nick_id",width:"80px"},{title:(0,F.formatMessage)({id:"operation.messagefaq.nickname"}),dataIndex:"nickname",key:"nickname",width:"80px"},{title:(0,F.formatMessage)({id:"operation.messagefaq.tel"}),dataIndex:"telephone",key:"telephone",width:"80px"},{title:(0,F.formatMessage)({id:"operation.messagefaq.time"}),dataIndex:"time",key:"time",width:"100px",render:function(e,t){return P.default.createElement(P.Fragment,null,P.default.createElement("p",null,(0,F.formatMessage)({id:"operation.messagefaq.faqtime"}),":",t.create_at),!!t.reply_time&&P.default.createElement("p",null,(0,F.formatMessage)({id:"operation.messagefaq.dealtime"}),":",t.reply_time))}},{title:(0,F.formatMessage)({id:"operation.messagefaq.version"}),dataIndex:"version",key:"version",width:"80px"},{title:(0,F.formatMessage)({id:"operation.messagefaq.lastContent"}),dataIndex:"content",key:"content",width:"300px",render:function(e,t){return P.default.createElement(P.Fragment,null,P.default.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-all"}},e||t.file_url))}},{title:(0,F.formatMessage)({id:"operation.messagefaq.status"}),dataIndex:"reply_status",key:"reply_status",width:"80px",render:function(e){return P.default.createElement("span",{style:{color:0==e?"#f85a62":"#52c41a"}},a[e])}},{title:(0,F.formatMessage)({id:"operation.messagefaq.dealservice"}),dataIndex:"admin_uid",key:"admin_uid",width:"80px",render:function(e){return e&&0!=e?r.filter(function(t){return t.id==e})[0]["nickname"]:""}},{title:(0,F.formatMessage)({id:"operation.messagepush.operation"}),width:"100px",render:function(e,t){return P.default.createElement("div",null,P.default.createElement(c.default,{type:"primary",onClick:n.onChanggeModel.bind((0,v.default)(n),t)},(0,F.formatMessage)({id:"operation.messagefaq.reply"})))}}];return P.default.createElement(d.default,{columns:l,dataSource:t,pagination:!1,bordered:!0,scroll:{x:1300},rowKey:function(e,t){return"".concat(e.id).concat(t)}})},n.getList=function(){var e=n.props.dispatch,t=n.state.filters;e({type:"mess/feedList",payload:(0,I.momentToString)(t)})},n.keepLastIndex=function(e){if(n.setState({focus:!0}),window.getSelection){e.focus();var t=window.getSelection();t.selectAllChildren(e),t.collapseToEnd()}else if(document.selection){t=document.selection.createRange();t.moveToElementText(e),t.collapse(!1),t.select()}},n.scrollBottom=function(){var e=n.modelRef.current;e&&(e.scrollTop=e.scrollHeight)},n.onSendMsgblur=function(){n.setState({focus:!1})},n.onSendMsgFocus=function(){n.setState({focus:!0})},n.onSendMsgChange=function(e){var t=e.target.value,a=n.props,r=a.dispatch,l=a.feedRecentList,s=n.state.replay.user_id;n.setState({html:t},function(){var e=l[D.default.cloneDeep(l).findIndex(function(e){return e.user_id==s})]["id"];t.trim()?r({type:"mess/addReplyParamsReducer",payload:{user_id:s,message_type:0,id:e,content:t}}):r({type:"mess/rmReplyParamsReducer",payload:{user_id:s,message_type:0,id:e}})})},n.onsubmitHandle=function(){var e=n.props,t=e.replyFeedParams,a=e.dispatch,r=n.state.replay.user_id,l=n.contentEditable.current;t.length&&(n.setState({disabled:!0}),t.map(function(e){(0,N.replyFeed)((0,i.default)({},e,{content:(0,I.delHtmlTag)(e.content||"")})).then(function(t){n.setState({disabled:!1}),t.code||(l.value="",a({type:"mess/rmReplyParamsReducer",payload:[]}),a({type:"mess/feedRecentList",payload:{user_id:r}}).then(function(){n.scrollBottom(),n.getList()}),0==e.message_type?n.setState({html:""}):T.default.trigger("removeMedia"))})}))},n.onChanggeModel=function(e){var t=n.props.dispatch;return t({type:"mess/rmReplyParamsReducer",payload:[]}),n.setState({html:""}),e.id&&e.user_id?void n.setState({replay:{user_id:e.user_id},send_msg_nickname:e.nickname},function(){n.setState(function(e){var t=e.isShowModel;return{isShowModel:!t}},function(){1==n.state.isShowModel?(n.contentEditable.current.focus(),document.body.style.overflow="hidden"):document.body.style.overflow="auto"})}):void n.setState(function(e){var t=e.isShowModel;return{isShowModel:!t}},function(){1==n.state.isShowModel?document.body.style.overflow="hidden":document.body.style.overflow="auto"})},n.getMediaMatter=function(e,t){var a=n.props,r=a.dispatch,l=a.feedRecentList,s=n.state.replay.user_id,o=l[D.default.cloneDeep(l).reverse().findIndex(function(e){return e.user_id==s})]["id"];r(t?{type:"mess/rmReplyParamsReducer",payload:e}:{type:"mess/addReplyParamsReducer",payload:(0,i.default)({user_id:s,id:o},e)})},n.render=function(){var e=n.props.feedList,t=n.state,a=t.focus,r=t.isShowModel,l=t.filters,s=l.page_size,i=l.page,d=[{icon:"desktop",name:(0,F.formatMessage)({id:"menu.operation"})},{name:(0,F.formatMessage)({id:"menu.operation.xiaomishupush"})}],u=(0,v.default)(n),f=u.FormSearch,m=u.TableList,p=u.scrollBottom;return P.default.createElement(P.Fragment,null,P.default.createElement(C.default,{src:d}),P.default.createElement(f,null),P.default.createElement(m,null),P.default.createElement("div",{className:U.default.rightPagination},P.default.createElement(o.default,{showTotal:function(e){return(0,F.formatMessage)({id:"app.glob.pagetotal"},{total:e})},pageSizeOptions:["20","30","40"],showSizeChanger:!0,onShowSizeChange:n.onShowSizeChange,current:(0,I.toParseInt)(i)||1,pageSize:s,onChange:n.handleTableChange,total:(0,I.toParseInt)(e.total_count)})),r&&P.default.createElement("div",null,P.default.createElement("div",{className:U.default.mask}),P.default.createElement("div",{className:U.default.model},P.default.createElement("div",{className:U.default.header},P.default.createElement("div",{className:U.default.title},n.state.send_msg_nickname||"".concat((0,F.formatMessage)({id:"form.operation.user"}),"_").concat(n.state.replay.user_id)),P.default.createElement("div",{className:U.default.close,onClick:n.onChanggeModel},"X")),P.default.createElement("div",{className:U.default.message_wrap,ref:n.modelRef},P.default.createElement(O.default,{scrollBottom:p,userId:n.state.replay.user_id})),P.default.createElement("div",{className:H("footer",{white:a})},P.default.createElement("textarea",{type:"text",ref:n.contentEditable,className:U.default.mess_input,value:n.state.html,disabled:!1,onChange:n.onSendMsgChange,onFocus:n.onSendMsgFocus,onBlur:n.onSendMsgblur}),P.default.createElement("div",{className:U.default.send_btn_wrap},P.default.createElement("div",{className:H("placeholder")}),P.default.createElement("div",{className:H("media")},P.default.createElement(L.default,{uploadName:(0,F.formatMessage)({id:"form.operation.uploadaffix"}),changePostion:!0,hidden:!0,callback:n.getMediaMatter})),P.default.createElement("div",{className:H("btn")},P.default.createElement(c.default,{type:"primary",disabled:n.state.disabled,onClick:n.onsubmitHandle},(0,F.formatMessage)({id:"form.operation.sendMsg"}))))))))},n.contentEditable=P.default.createRef(),n.modelRef=P.default.createRef(),n.nicknameRef=P.default.createRef(),n.telephoneRef=P.default.createRef(),n.state={focus:!1,html:"",isShowModel:!1,category:"",result:[],autocomplete:!0,telephone:"",nickname:"",send_msg_nickname:"",filters:{page:1,page_size:20},replay:{user_id:""},disabled:!1},n}return(0,h.default)(a,[{key:"componentDidMount",value:function(){var e=(0,s.default)(l.default.mark(function e(){var t,a,n,r=this;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.props.dispatch,a=this.contentEditable.current,n=this,T.default.on("disabled",function(e){var t=e.disabled;n.setState({disabled:t})}),a&&this.keepLastIndex(a),Promise.all([t({type:"mess/feedTypes"}),t({type:"mess/getVersions"}),t({type:"mess/getServiceMember"}),t({type:"mess/getFeedStatuses"})]).then(function(){r.getList()});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),a}(P.PureComponent),w=q))||w)||w);t.default=A},frkn:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,s,o,i=n(a("2Taf")),d=n(a("vZ4D")),u=n(a("MhPg")),c=n(a("l4Ni")),f=n(a("ujKo")),m=(n(a("ICWT")),a("+n12"),a("MuoO")),p=r(a("q1tI")),g=(n(a("wY1l")),n(a("3a4m")),a("LLXN"),n(a("Y+p1"))),h=n(a("UbMB")),v=n(a("/ZW3"));function y(e){return function(){var t,a=(0,f.default)(e);if(_()){var n=(0,f.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,c.default)(this,t)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}a("wd/R");var E=h.default.bind(v.default),b=(l=(0,m.connect)(function(e){var t=e.mess,a=t.feedRecentList,n=t.feedTypes,r=e.memberInfo.data.assistant_id;return{feedRecentList:a,feedTypes:n,assistant_id:r}}),l((o=function(e){(0,u.default)(a,e);var t=y(a);function a(e){var n;return(0,i.default)(this,a),n=t.call(this,e),n.componentDidMount=function(){},n.onChange=function(e){var t=e.target.value,a=n.props,r=a.onChange,l=a.tag;n.setState({value:t},function(){r(l,t)})},n.onSelect=function(e){var t=n.props,a=t.onChange,r=t.tag;n.setState({value:e,show:!1,select:!0},function(){a(r,e)})},n.onBlur=function(){setTimeout(function(){n.setState({show:!1})},500)},n.state={feedRecentList:[],value:"",select:!1,dataSource:[],show:!1},n}return(0,d.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.style,r=t.placeholder,l=t.ref,s=t.tag,o=this.state,i=o.show,d=o.value,u=o.dataSource;return p.default.createElement("div",{className:E("auto",a||""),style:n},p.default.createElement("input",{onBlur:this.onBlur,placeholder:r,ref:l,onChange:this.onChange,value:d}),i&&p.default.createElement("ul",{className:E("list")},u.map(function(t,a){return p.default.createElement("li",{key:a,onClick:e.onSelect.bind(e,t[s])},t[s])})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.dataSource,n=e.value,r=t.select;return(0,g.default)(a,t.dataSource)?n!=t.stateValue?{value:n}:null:{dataSource:a,show:!!a.length&&!r,select:!1}}}]),a}(p.PureComponent),s=o))||s);t.default=b},jJkL:function(e,t,a){e.exports={addBtn:"antd-pro-pages-operation-message-faq-index-addBtn",btnBox:"antd-pro-pages-operation-message-faq-index-btnBox",breadcrumb_Box:"antd-pro-pages-operation-message-faq-index-breadcrumb_Box",detail_title:"antd-pro-pages-operation-message-faq-index-detail_title",right:"antd-pro-pages-operation-message-faq-index-right",required:"antd-pro-pages-operation-message-faq-index-required",rightPagination:"antd-pro-pages-operation-message-faq-index-rightPagination",mask:"antd-pro-pages-operation-message-faq-index-mask",model:"antd-pro-pages-operation-message-faq-index-model",header:"antd-pro-pages-operation-message-faq-index-header",title:"antd-pro-pages-operation-message-faq-index-title",close:"antd-pro-pages-operation-message-faq-index-close",message_wrap:"antd-pro-pages-operation-message-faq-index-message_wrap",mess_container:"antd-pro-pages-operation-message-faq-index-mess_container",avatar:"antd-pro-pages-operation-message-faq-index-avatar",creat_time:"antd-pro-pages-operation-message-faq-index-creat_time",mess_content:"antd-pro-pages-operation-message-faq-index-mess_content",left:"antd-pro-pages-operation-message-faq-index-left",img_mess:"antd-pro-pages-operation-message-faq-index-img_mess",video_mess:"antd-pro-pages-operation-message-faq-index-video_mess",voice:"antd-pro-pages-operation-message-faq-index-voice",beat_wrap:"antd-pro-pages-operation-message-faq-index-beat_wrap",line1:"antd-pro-pages-operation-message-faq-index-line1",active:"antd-pro-pages-operation-message-faq-index-active",line:"antd-pro-pages-operation-message-faq-index-line",line2:"antd-pro-pages-operation-message-faq-index-line2",line3:"antd-pro-pages-operation-message-faq-index-line3",line4:"antd-pro-pages-operation-message-faq-index-line4",line5:"antd-pro-pages-operation-message-faq-index-line5",footer:"antd-pro-pages-operation-message-faq-index-footer",white:"antd-pro-pages-operation-message-faq-index-white",mess_input:"antd-pro-pages-operation-message-faq-index-mess_input",send_btn_wrap:"antd-pro-pages-operation-message-faq-index-send_btn_wrap",placeholder:"antd-pro-pages-operation-message-faq-index-placeholder",media:"antd-pro-pages-operation-message-faq-index-media",btn:"antd-pro-pages-operation-message-faq-index-btn",mask1:"antd-pro-pages-operation-message-faq-index-mask1",matter1:"antd-pro-pages-operation-message-faq-index-matter1"}},zBCB:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,s,o,i=n(a("eHn4")),d=n(a("2Taf")),u=n(a("vZ4D")),c=n(a("rlhR")),f=n(a("MhPg")),m=n(a("l4Ni")),p=n(a("ujKo")),g=(n(a("ICWT")),a("+n12"),a("MuoO")),h=r(a("q1tI")),v=(n(a("wY1l")),n(a("i8i4"))),y=(n(a("3a4m")),a("LLXN"),n(a("Wwog"))),_=n(a("Y+p1")),E=n(a("UbMB")),b=n(a("BkRI")),x=n(a("jJkL"));function k(e){return function(){var t,a=(0,p.default)(e);if(M()){var n=(0,p.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,m.default)(this,t)}}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}a("wd/R");var S=E.default.bind(x.default),w=(l=(0,g.connect)(function(e){var t=e.mess,a=t.feedRecentList,n=t.feedTypes,r=e.memberInfo.data.assistant_id;return{feedRecentList:a,feedTypes:n,assistant_id:r}}),l((o=function(e){(0,f.default)(a,e);var t=k(a);function a(e){var n;return(0,d.default)(this,a),n=t.call(this,e),n.componentDidMount=function(){var e=n.state.mustscrollBottom;n.getList(e),n.setState({mustscrollBottom:!1}),n.time=setInterval(function(){n.getList()},5e3)},n.getList=function(e){var t=n.props,a=t.scrollBottom,r=t.dispatch,l=t.userId,s=n.state.mustscrollBottom;r({type:"mess/feedRecentList",payload:{user_id:l}}).then(function(){console.log(e,s,"flag||mustscrollBottom"),(e||s)&&(a(),n.setState({mustscrollBottom:!1}))})},n.onClickContainer=function(e,t){n.setState({filters:e,clickVoiceIndexes:t},function(){"VOICE"!=e.object_name?n.createMatterWrap():n.playMedia()})},n.playMedia=function(){var e=(0,c.default)(n),t=n.state,a=t.filters.file_url,r=t.clickVoiceIndexes,l=document.getElementById("audio_box");l.src===a?l.paused?(e.setState({clickVoiceIndexes:r}),l.play()):(e.setState({clickVoiceIndexes:""}),l.pause()):(l.src=a,e.setState({clickVoiceIndexes:r}),l.play()),l.addEventListener("ended",function(){e.setState({clickVoiceIndexes:""})},!1)},n.componentWillUnmount=function(){clearInterval(n.time)},n.createMatterWrap=function(){var e=n.state.filters,t=e.file_url,a=e.object_name;document.body.appendChild(n.el),document.body.style.overflow="hidden",v.default.render(h.default.createElement(h.Fragment,null,h.default.createElement("div",{className:x.default.mask1,onClick:n.removeChild}),h.default.createElement("div",{className:x.default.matter1},("VIDEO"==a||"GIF"==a)&&h.default.createElement("video",{src:t,autoPlay:!0,loop:!0,muted:!0}),"IMAGE"==a&&h.default.createElement("img",{src:t}))),n.el)},n.removeChild=function(){document.body.removeChild(n.el)},n.ContainerList=(0,y.default)(function(e,t,a){var r=(0,b.default)(e).reverse(),l=function(e,t){return(0,E.default)(x.default[e],(0,i.default)({},x.default["active"],a===t))};return r.length?h.default.createElement("ul",null,r.map(function(e,a){var r=function(){var r="";return"TEXT"==e.object_name?(r=S("mess_content",(0,i.default)({},e.user_id==t?"right":"left",!0)),h.default.createElement(h.Fragment,null,h.default.createElement("div",{className:x.default.creat_time},e.create_at),h.default.createElement("div",{className:r},e.content))):"IMAGE"==e.object_name?(r=S("img_mess",(0,i.default)({},e.user_id==t?"right":"left",!0)),h.default.createElement(h.Fragment,null,h.default.createElement("div",{className:x.default.creat_time},e.create_at),h.default.createElement("div",{className:r,onClick:n.onClickContainer.bind((0,c.default)(n),e,a)},h.default.createElement("img",{src:e.file_url})))):"VIDEO"==e.object_name||"GIF"==e.object_name?(r=S("video_mess",(0,i.default)({},e.user_id==t?"right":"left",!0)),h.default.createElement(h.Fragment,null,h.default.createElement("div",{className:x.default.creat_time},e.create_at),h.default.createElement("div",{className:r,onClick:n.onClickContainer.bind((0,c.default)(n),e,a)},h.default.createElement("video",{src:e.file_url,autoPlay:!0,loop:!0,muted:!0})))):"VOICE"==e.object_name?(r=S("voice",(0,i.default)({},e.user_id==t?"right":"left",!0)),h.default.createElement(h.Fragment,null,h.default.createElement("div",{className:x.default.creat_time},e.create_at),h.default.createElement("div",{onClick:n.onClickContainer.bind((0,c.default)(n),e,a),className:r,style:{width:"".concat(25+52.4*Math.min((e.duration||30)/60,1),"%")}},h.default.createElement("i",null,parseInt(e.duration||0),h.default.createElement("sup",null,"\u3003")),h.default.createElement("div",{className:x.default["beat_wrap"]},h.default.createElement("span",{className:l("line1",a)}),h.default.createElement("span",{className:l("line2",a)}),h.default.createElement("span",{className:l("line3",a)}),h.default.createElement("span",{className:l("line4",a)}),h.default.createElement("span",{className:l("line5",a)}))))):void 0};return h.default.createElement("li",{key:a},h.default.createElement("div",{className:x.default.mess_container,key:a},r()))})):null}),n.time=null,n.el=document.createElement("div"),n.state={feedRecentList:[],filters:{},clickVoiceIndexes:"",mustscrollBottom:!0},n}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props.assistant_id,t=this.state,a=t.feedRecentList,n=t.clickVoiceIndexes,r=this.ContainerList;return h.default.createElement(h.Fragment,null,r(a,e,n),h.default.createElement("audio",{id:"audio_box",style:{display:"none"},loop:!1}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.feedRecentList;return(0,_.default)(a,t.feedRecentList)?null:{feedRecentList:a,mustscrollBottom:!0}}}]),a}(h.PureComponent),s=o))||s);t.default=w}}]);