(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"9x7n":function(e,t,a){e.exports={operate:"antd-pro-pages-operation-virtual-account-account-list-operate",search:"antd-pro-pages-operation-virtual-account-account-list-search",list:"antd-pro-pages-operation-virtual-account-account-list-list",avatar:"antd-pro-pages-operation-virtual-account-account-list-avatar",time:"antd-pro-pages-operation-virtual-account-account-list-time",delete:"antd-pro-pages-operation-virtual-account-account-list-delete",edit:"antd-pro-pages-operation-virtual-account-account-list-edit",divide:"antd-pro-pages-operation-virtual-account-account-list-divide"}},HFLH:function(e,t,a){e.exports={date:"antd-pro-pages-operation-virtual-account-account-edit-date",loading:"antd-pro-pages-operation-virtual-account-account-edit-loading",hide:"antd-pro-pages-operation-virtual-account-account-edit-hide",upload_list:"antd-pro-pages-operation-virtual-account-account-edit-upload_list",close1:"antd-pro-pages-operation-virtual-account-account-edit-close1",play_icon:"antd-pro-pages-operation-virtual-account-account-edit-play_icon",lab:"antd-pro-pages-operation-virtual-account-account-edit-lab"}},aiTV:function(e,t,a){"use strict";var r=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=r(a("kLXV")),l=r(a("jehZ")),o=r(a("p0pE")),s=r(a("2Taf")),u=r(a("vZ4D")),d=r(a("MhPg")),c=r(a("l4Ni")),p=r(a("ujKo"));a("OaEy");var f=r(a("2fM7"));a("5NDa");var m=r(a("5rEg"));a("y8nQ");var g,v,h,y,M=r(a("Vl3Y")),b=(a("K0tr"),a("MuoO")),_=n(a("q1tI")),E=a("LLXN");function w(e){return function(){var t,a=(0,p.default)(e);if(k()){var r=(0,p.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,c.default)(this,t)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var x=M.default.Item,S=(m.default.TextArea,f.default.Option,g=M.default.create(),v=(0,b.connect)(),g(h=v((y=function(e){(0,d.default)(a,e);var t=w(a);function a(){var e;(0,s.default)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),e.onOk=function(){var t=e.props,a=t.form,r=t.onCloseModel,n=t.dispatch,i=t.giftInfo;a.validateFields(function(e,t){e||n({type:"accounts/uploadGift",payload:(0,o.default)({},i,t)}).then(function(e){0==e.code&&r()})})},e.onCancel=function(){var t=e.props.onCloseModel;t()},e}return(0,u.default)(a,[{key:"render",value:function(){var e={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},t=this.props,a=t.form.getFieldDecorator,r=t.modalVisible,n=t.giftInfo;return _.default.createElement(i.default,{title:(0,E.formatMessage)({id:"app.versions.edit"}),visible:r,cancelText:(0,E.formatMessage)({id:"app.model.cancel"}),okText:(0,E.formatMessage)({id:"app.model.okText"}),onOk:this.onOk,onCancel:this.onCancel},_.default.createElement(M.default,null,_.default.createElement(x,(0,l.default)({},e,{label:"\u793c\u54c1Key\u503c"}),a("stat_key",(0,o.default)({rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u793c\u54c1Key\u503c"}]},n.stat_key?{initialValue:n.stat_key}:{}))(_.default.createElement(m.default,null))),_.default.createElement(x,(0,l.default)({},e,{label:"\u793c\u54c1\u6570\u91cf"}),a("num",(0,o.default)({rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u793c\u54c1\u6570\u91cf"}]},void 0!=n.num?{initialValue:n.num}:{}))(_.default.createElement(m.default,null)))))}}]),a}(_.default.Component),h=y))||h)||h),L=S;t.default=L},oTMn:function(e,t,a){"use strict";var r=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=r(a("kLXV"));a("g9YV");var l=r(a("wCAj"));a("sPJy");var o=r(a("bE4q"));a("Pwec");var s=r(a("CtXQ"));a("/zsF");var u=r(a("PArb"));a("P2fV");var d=r(a("NJEC"));a("+BJd");var c=r(a("mr32"));a("IzEo");var p=r(a("bx4M"));a("14J3");var f=r(a("BMrR"));a("+L6B");var m=r(a("2/Rp"));a("jCWc");var g=r(a("kPKH")),v=r(a("p0pE")),h=r(a("2Taf")),y=r(a("vZ4D")),M=r(a("MhPg")),b=r(a("l4Ni")),_=r(a("ujKo"));a("y8nQ");var E=r(a("Vl3Y"));a("5NDa");var w,k,x,S,L=r(a("5rEg")),I=a("MuoO"),C=n(a("q1tI")),F=a("LLXN"),R=r(a("UbMB")),N=r(a("vG42")),V=r(a("9x7n")),D=r(a("aiTV"));function O(e){return function(){var t,a=(0,_.default)(e);if(T()){var r=(0,_.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,b.default)(this,t)}}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var A=R.default.bind(V.default),q=(L.default.Search,w=E.default.create(),k=(0,I.connect)(function(e){var t=e.accounts,a=t.giftList,r=t.list,n=t.total,i=t.page,l=t.pageSize,o=t.genders,s=void 0===o?new Map:o,u=t.nation,d=void 0===u?new Map:u,c=t.user_interests,p=void 0===c?new Map:c,f=t.userTypesMap,m=t.tagsMap,g=void 0===m?new Map:m;return{giftList:a,userTypesMap:f,tagsMap:g,list:r,genders:s,nation:d,user_interests:p,total:n,page:i,pageSize:l}}),w(x=k((S=function(e){(0,M.default)(a,e);var t=O(a);function a(){var e;(0,h.default)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),e.state={editShowing:!1,modalVisible:!1,showGiftModal:!1,giftInfo:{}},e.showEdit=function(t,a){t.preventDefault(),a&&e.setState({editRecord:a}),e.setState({editShowing:!0})},e.showAdd=function(){e.setState({addShowing:!0})},e.hideAdd=function(){e.setState({addShowing:!1})},e.hideEdit=function(){e.setState({editShowing:!1,editRecord:null})},e.deleteRecord=function(t){var a=e.props.dispatch;a({type:"accounts/delete",payload:t})},e.search=function(t){var a=e.props.dispatch;a({type:"accounts/fetch",payload:{nickname:t}})},e.onShowSizeChange=function(t,a){e.props.dispatch({type:"accounts/changePageSize",payload:{page:t,pageSize:a}}),e.fetchPage(t,a)},e.fetchPage=function(t,a){var r=e.state.search,n=void 0===r?{}:r;e.props.dispatch({type:"accounts/fetch",payload:(0,v.default)({page:t,page_size:a},n)})},e.SearchBtnHandle=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=e.props.dispatch;e.props.form.validateFields(function(e,t){a({type:"accounts/fetch",payload:(0,v.default)({},t)})})},e.SearchResetBtnHandle=function(){var t=e.props.dispatch;e.props.form.resetFields(),t({type:"accounts/fetch"})},e}return(0,y.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.list,r=t.genders,n=(t.countries,t.tags,t.total),h=t.page,y=t.pageSize,M=t.nation,b=t.user_interests,_=t.userTypesMap,w=t.tagsMap,k=this.state,x=(k.editShowing,k.addShowing),S=k.editRecord,I=this.showEdit,R=this.hideEdit,O=this.deleteRecord,T=this.hideAdd,q=this.showAdd,P=(this.search,this.props.form.getFieldDecorator),j=this,z=C.default.createElement("div",{className:A("operate")},C.default.createElement(p.default,{className:V.default.card,bordered:!1},C.default.createElement(E.default,{layout:"vertical",hideRequiredMark:!0},C.default.createElement(f.default,{gutter:16},C.default.createElement(g.default,{lg:4,md:12,sm:24},C.default.createElement(E.default.Item,{label:(0,F.formatMessage)({id:"app.virtual.accounts.id"})},P("id")(C.default.createElement(L.default,{placeholder:(0,F.formatMessage)({id:"app.virtual.accounts.id"})})))),C.default.createElement(g.default,{lg:5,md:12,sm:24},C.default.createElement(E.default.Item,{label:(0,F.formatMessage)({id:"app.settings.basic.nickname"})},P("nickname")(C.default.createElement(L.default,{placeholder:(0,F.formatMessage)({id:"app.settings.basic.nickname"})})))),C.default.createElement(g.default,{lg:5,md:12,sm:24},C.default.createElement(E.default.Item,{label:(0,F.formatMessage)({id:"app.user_.username"})},P("login_account")(C.default.createElement(L.default,{placeholder:(0,F.formatMessage)({id:"app.user_.username"})})))),C.default.createElement(g.default,{lg:10,md:12,sm:24},C.default.createElement(m.default,{type:"primary",style:{marginTop:29},className:V.default.btnSmt,onClick:this.SearchBtnHandle},(0,F.formatMessage)({id:"app.content.search"})),C.default.createElement(m.default,{className:V.default.btnSmt,style:{marginLeft:8,marginTop:29},onClick:this.SearchResetBtnHandle},(0,F.formatMessage)({id:"app.content.reset"})),C.default.createElement(m.default,{className:V.default.btnSmt,style:{marginLeft:8,marginTop:29},onClick:q,type:"primary"},(0,F.formatMessage)({id:"app.virtual.accounts.add"}))))))),Y=[{title:(0,F.formatMessage)({id:"app.virtual.accounts.id"}),dataIndex:"id",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.accounts.avatar"}),dataIndex:"avatar",align:"center",render:function(e,t){return C.default.createElement("img",{className:V.default.avatar,src:"".concat(e,"?x-oss-process=image/resize,l_60"),alt:t.name})}},{title:(0,F.formatMessage)({id:"app.settings.basic.nickname"}),dataIndex:"nickname",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.account.type"}),dataIndex:"login_type",align:"center",render:function(e){return _?_[e]:""}},{title:(0,F.formatMessage)({id:"app.user_.username"}),dataIndex:"login_account",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.accounts.phone"}),dataIndex:"telephone",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.accounts.gender"}),dataIndex:"sex",align:"center",render:function(e){return r.get(e)}},{title:(0,F.formatMessage)({id:"app.virtual.accounts.birthday"}),dataIndex:"birthday",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.recommend.text_price"}),dataIndex:"text_price",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.recommend.video_price"}),dataIndex:"video_price",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.recommend.voice_price"}),dataIndex:"voice_price",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.accounts.country"}),dataIndex:"nation",align:"nation",render:function(e){return M.get(+e)||""}},{title:(0,F.formatMessage)({id:"app.virtual.accounts.tag"}),dataIndex:"user_interests",align:"center",render:function(e){return e?e.split(",").map(function(e,t){var a=b.get(+e)||"";return C.default.createElement(c.default,{key:t},a.length>12?a.replace(/^(.{5}).*(.{3})$/,"$1..."):a)}):""}},{title:(0,F.formatMessage)({id:"app.virtual.recommend.tags"}),dataIndex:"user_tags",align:"center",render:function(e){return e||w?e.split(",").map(function(e,t){var a=w.get(+e)||"";return C.default.createElement(c.default,{key:t},a.length>12?a.replace(/^(.{5}).*(.{3})$/,"$1..."):a)}):""}},{title:(0,F.formatMessage)({id:"app.virtual.accounts.brief"}),dataIndex:"profile",align:"center"},{title:(0,F.formatMessage)({id:"app.virtual.accounts.time"}),dataIndex:"time",align:"center",render:function(e,t){return C.default.createElement(C.Fragment,null,C.default.createElement("div",{className:A("time")},"\u66f4\u65b0\u65f6\u95f4: ",t.update_at),C.default.createElement("div",{className:A("time")},"\u6dfb\u52a0\u65f6\u95f4: ",t.create_at))}},{title:(0,F.formatMessage)({id:"app.virtual.accounts.operation"}),dataIndex:"operation",align:"center",width:"120px",fixed:"right",render:function(e,t){var a=C.default.createElement(d.default,{title:(0,F.formatMessage)({id:"app.scene.tools.delete_confirm"}),okText:(0,F.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,F.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:function(){O(t)}},C.default.createElement("div",null,C.default.createElement("a",{href:"#",className:V.default.delete},(0,F.formatMessage)({id:"app.scene.tools.delete"}))));return C.default.createElement("div",{className:V.default.handle},C.default.createElement("div",null,C.default.createElement("a",{href:"#",className:V.default.edit,onClick:function(e){e.preventDefault(),setTimeout(function(){j.setState({showGiftModal:!0,giftInfo:{user_id:t.id}})}),j.props.dispatch({type:"accounts/fetchGiftList",payload:{user_id:t.id}}).then(function(e){console.log(e,"res")})}},"\u67e5\u770b\u793c\u7269")),C.default.createElement(u.default,{className:A("divide")}),C.default.createElement("div",null,C.default.createElement("a",{href:"#",className:V.default.edit,onClick:function(e){I(e,t)}},(0,F.formatMessage)({id:"app.scene.tools.handle.edit"}))),C.default.createElement(u.default,{className:A("divide")}),a)}}],B=[{title:"\u793c\u7269key\u503c",dataIndex:"stat_key",width:150},{title:"\u793c\u7269\u6570\u91cf",dataIndex:"num",width:150},{title:"\u64cd\u4f5c",dataIndex:"opt",width:150,render:function(e,t){return C.default.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),j.setState({giftInfo:(0,v.default)({},j.state.giftInfo,t)},function(){j.setState({modalVisible:!0})})}},"\u7f16\u8f91")}}];return C.default.createElement(C.Fragment,null,C.default.createElement(o.default,{className:"breadcrumb-box",separator:"/"},C.default.createElement(o.default.Item,null,C.default.createElement(s.default,{type:"lock"})," ",(0,F.formatMessage)({id:"menu.operation"})),C.default.createElement(o.default.Item,null,(0,F.formatMessage)({id:"menu.operation.user.virtualaccount"}))),z,C.default.createElement(l.default,{scroll:{x:!0},className:A("list"),bordered:!0,rowKey:"id",columns:Y,dataSource:a,pagination:{position:"both",pageSize:y,showSizeChanger:!0,pageSizeOptions:["20","30","40"],onShowSizeChange:this.onShowSizeChange,total:n,current:h,showTotal:function(e){return(0,F.formatMessage)({id:"app.glob.pagetotal"},{total:e})},size:"small",onChange:this.fetchPage}}),C.default.createElement(i.default,{visible:this.state.showGiftModal,footer:null,title:"\u793c\u7269\u5217\u8868",onCancel:function(){e.setState({showGiftModal:!1})}},C.default.createElement(m.default,{onClick:function(){e.setState({giftInfo:{user_id:e.state.giftInfo.user_id}},function(){e.setState({modalVisible:!0})})}},"\u65b0\u589e\u793c\u7269"),C.default.createElement(l.default,{columns:B,dataSource:this.props.giftList,scroll:{y:240},rowKey:function(e){return e.stat_key}})),x&&C.default.createElement(N.default,{visible:x,close:T}),S&&C.default.createElement(N.default,{record:S,visible:!!this.state.editRecord,close:R}),this.state.modalVisible&&C.default.createElement(D.default,{onCloseModel:function(){e.setState({modalVisible:!1})},modalVisible:this.state.modalVisible,giftInfo:this.state.giftInfo}))}}]),a}(C.PureComponent),x=S))||x)||x),P=q;t.default=P},vG42:function(e,t,a){"use strict";var r=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=r(a("W9HT"));a("2qtc");var l=r(a("kLXV"));a("14J3");var o=r(a("BMrR"));a("IzEo");var s=r(a("bx4M"));a("jCWc");var u=r(a("kPKH"));a("BoS7");var d=r(a("Sdc0"));a("DZo9");var c=r(a("8z0m"));a("+L6B");var p=r(a("2/Rp"));a("Pwec");var f=r(a("CtXQ"));a("iQDF");var m=r(a("+eQT"));a("5NDa");var g=r(a("5rEg")),v=r(a("jehZ")),h=r(a("d6i3")),y=r(a("gWZ8")),M=r(a("1l/V")),b=r(a("2Taf")),_=r(a("vZ4D")),E=r(a("rlhR")),w=r(a("MhPg")),k=r(a("l4Ni")),x=r(a("ujKo"));a("y8nQ");var S=r(a("Vl3Y"));a("OaEy");var L=r(a("2fM7")),I=n(a("q1tI")),C=a("MuoO"),F=r(a("wyMu"));a("YQfW");var R,N,V,D,O=r(a("wd/R")),T=r(a("Wwog")),A=r(a("Y+p1")),q=r(a("mwIZ")),P=a("LLXN"),j=r(a("UbMB")),z=r(a("HFLH")),Y=r(a("orAa"));function B(e){return function(){var t,a=(0,x.default)(e);if(X()){var r=(0,x.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,k.default)(this,t)}}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var H=a("xDdU"),G=j.default.bind(z.default),K=(L.default.Option,R=(0,C.connect)(function(e){var t=e.accounts,a=t.loading,r=t.genders,n=t.user_interests,i=t.nation,l=t.videoMap,o=t.messageMap,s=t.voiceMap,u=t.tagsMap;return{loading:a,genders:r,user_interests:n,nation:i,videoMap:l,messageMap:o,voiceMap:s,tagsMap:u}}),N=S.default.create(),R(V=N((D=function(e){(0,w.default)(a,e);var t=B(a);function a(e){var r;return(0,b.default)(this,a),r=t.call(this,e),r.state={fields:[{name:"nickname",options:{rules:[{required:!0,message:(0,P.formatMessage)({id:"app.virtual.accounts.name_required"})},{max:20,message:(0,P.formatMessage)({id:"app.virtual.accounts.name_verify"})}]},properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.name_placeholder"})},label:(0,P.formatMessage)({id:"app.settings.basic.nickname"})},{name:"login_account",options:{rules:[{required:!0,message:(0,P.formatMessage)({id:"app.user_.username"})}]},properties:{placeholder:(0,P.formatMessage)({id:"app.user_.username"})},label:(0,P.formatMessage)({id:"app.user_.username"})},{name:"sex",options:{rules:[{required:!0,message:(0,P.formatMessage)({id:"app.virtual.accounts.gender_required"})}]},properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.gender_placeholder"})},type:"select",optionList:"genders",label:(0,P.formatMessage)({id:"app.virtual.accounts.gender"})},{name:"birthday",placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.birthday_placeholder"}),options:{rules:[{required:!0,message:(0,P.formatMessage)({id:"app.virtual.accounts.birthday_required"})}]},type:"date",label:(0,P.formatMessage)({id:"app.virtual.accounts.birthday"})},{name:"text_price",options:{},properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.recommend.text_price"})},type:"select",optionList:"messageMap",label:(0,P.formatMessage)({id:"app.virtual.recommend.text_price"})},{name:"video_price",options:{},properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.recommend.video_price"})},type:"select",optionList:"videoMap",label:(0,P.formatMessage)({id:"app.virtual.recommend.video_price"})},{name:"voice_price",options:{},properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.recommend.voice_price"})},type:"select",optionList:"voiceMap",label:(0,P.formatMessage)({id:"app.virtual.recommend.voice_price"})},{name:"user_tags",options:{},properties:{mode:"multiple",placeholder:(0,P.formatMessage)({id:"app.virtual.recommend.tags"})},type:"select",optionList:"tagsMap",label:(0,P.formatMessage)({id:"app.virtual.recommend.tags"})},{name:"user_interests",options:{rules:[{required:!0,message:(0,P.formatMessage)({id:"app.virtual.accounts.tag_required"})}]},properties:{mode:"multiple",placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.tag_placeholder"}),onChange:function(e){console.log(e,"val,....")}},type:"select",optionList:"user_interests",label:(0,P.formatMessage)({id:"app.virtual.accounts.tag"})},{name:"nation",options:{rules:[{required:!0,message:(0,P.formatMessage)({id:"app.virtual.accounts.country_required"})}]},properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.country_placeholder"})},type:"select",optionList:"nation",label:(0,P.formatMessage)({id:"app.virtual.accounts.country"})},{name:"profile",options:{rules:[{required:!0,message:(0,P.formatMessage)({id:"app.virtual.accounts.brief_required"})},{max:100,message:(0,P.formatMessage)({id:"app.scene.tools.name_verify"})}]},properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.brief_placeholder"})},type:"textarea",label:(0,P.formatMessage)({id:"app.virtual.accounts.brief"})},{name:"avatar",placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.avatar_placeholder"}),options:{rules:[{required:!0,message:(0,P.formatMessage)({id:"app.virtual.accounts.avatar_required"})}],valuePropName:"fileList",getValueFromEvent:r.normFile},properties:{listType:"picture-card"},type:"upload",label:(0,P.formatMessage)({id:"app.virtual.accounts.avatar"})},{name:"longitude",properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.longitude_placeholder"}),type:"number"},label:(0,P.formatMessage)({id:"app.virtual.accounts.longitude"})},{name:"latitude",properties:{placeholder:(0,P.formatMessage)({id:"app.virtual.accounts.latitude_placeholder"}),type:"number"},label:(0,P.formatMessage)({id:"app.virtual.accounts.latitude"})}],formItemLayout:{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},matterList:new Map},r.handleOk=function(){var e=r.props,t=e.form,a=t.validateFields,n=t.getFieldsValue,i=(t.getFieldValue,t.resetFields),l=e.dispatch,o=e.close,s=e.record,u=r.state.matterList;a(function(){var e=(0,M.default)(h.default.mark(function e(t){var a,r,d;return h.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(a=n(),r=new FormData,a.recommend_auth&&(a.user_tags||[]).length,Object.keys(a).forEach(function(e){var t=a[e];if(void 0!==t){if("user_interests"==e||"user_tags"==e)return r.append(e,Array.isArray(t)?t.join(","):t);if("birthday"===e)return r.append(e,t instanceof Object?t.format("YYYY-MM-DD"):t);if("multitalingual"===e)return r.append(e,t.join(","));if("object"===typeof t&&t){if(Array.isArray(t)&&t[0].url)return;return r.append(e,t[0].originFileObj,t[0].name)}if("recommend_auth"===e)return r.append(e,+t);r.append(e,t)}}),u.size&&r.append("background",JSON.stringify((0,y.default)(u.values()))),s&&r.append("user_id",s.id),console.info("params__",{values:a,params:r,record:s}),!s){e.next=15;break}return e.next=12,l({payload:{params:r,id:s.id},type:"accounts/patch"});case 12:e.t0=e.sent,e.next=18;break;case 15:return e.next=17,l({payload:r,type:"accounts/create"});case 17:e.t0=e.sent;case 18:d=e.t0,d&&(o(),i());case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},r.handleCancel=function(){var e=r.props,t=e.close,a=e.form.resetFields;t(),a()},r.normFile=function(e){return Array.isArray(e)?e:e&&Array.isArray(e.fileList)?"removed"===e.file.status?[]:(r.setState({avatar:window.URL.createObjectURL(e.file.originFileObj)}),e.fileList.slice(-1)):e&&e.fileList},r.preview=function(e){if(e.url)return r.setState({avatar:e.url});r.setState({avatar:window.URL.createObjectURL(e.originFileObj)})},r.crop=function(){var e=r.cropper.current;if(e){var t=r.props.form,a=t.getFieldValue,n=t.setFieldsValue,i=a("avatar");Array.isArray(i)&&(i=i[0]);var l=i.name;e.getCroppedCanvas().toBlob(function(e){console.info("avatarFile__",{avatarFile:i,fileName:l,blobType:e.type,blob:e}),i.type=e.type,i.size=e.size;var t=new File([e],l,{type:e.type});i.originFileObj=t,i.thumbUrl=window.URL.createObjectURL(t),i.url="",i.uid=H(),i.status="new",n({avatar:[i]}),r.setState({avatar:""})})}},r.cancelCrop=function(){r.setState({avatar:""})},r.renderFieldName=function(){(0,E.default)(r);return(0,T.default)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(arguments.length>2&&arguments[2],arguments.length>3&&arguments[3],arguments.length>4&&arguments[4],r.props),n=a.form,i=n.getFieldDecorator,l=(n.setFieldsValue,a.cates,a.id,a.list,r.state),o=(l.fields,l.formItemLayout);"user_interests"==e.name&&t&&t.user_interests&&(e.options.initialValue=t.user_interests.split(",").map(function(e){return+e})),"user_tags"==e.name&&t&&t.user_tags&&(e.options.initialValue=t.user_tags.split(",").map(function(e){return+e})),t&&e.name in t&&"user_interests"!=e.name&&"user_tags"!=e.name&&("upload"===e.type?t[e.name]&&(e.options.initialValue=[{url:t[e.name],name:"".concat(t.nickname,".png"),uid:H()}]):"date"===e.type?e.options.initialValue=(0,O.default)(t[e.name],"DD/MM/YYYY"):"nation"===e.name?e.options.initialValue=+t[e.name]:e.options.initialValue=t[e.name]);var s=e.name,u=e.options,d=e.input_type,h=e.placeholder,M=e.label,b=e.type,_=(e.initialValue,e.properties),E=void 0===_?{}:_,w=I.default.createElement(g.default,(0,v.default)({type:d},E)),k=e.optionList;if("string"===typeof k&&(k=r.props[k]||[]),"textarea"===b){var x=g.default.TextArea;w=I.default.createElement(x,E)}if("date"===b&&(w=I.default.createElement(m.default,{className:G("date"),disabledDate:function(e){return e>=new Date}})),"select"===b){var C=L.default.Option,F=(0,y.default)(k).map(function(e){return I.default.createElement(C,{key:e[0],value:e[0]},e[1])});w=I.default.createElement(L.default,E,F)}return"upload"===b&&(u.getValueFromEvent=r.normFile,E.onPreview=r.preview,E.customRequest=function(e){e.file;var t=e.onSuccess;setTimeout(function(){t("ok")},0)},w=I.default.createElement(c.default,E,I.default.createElement(p.default,null,I.default.createElement(f.default,{type:"cloud-upload"})," ",h))),I.default.createElement(S.default.Item,(0,v.default)({key:s},o,{label:M}),i(s,u)(w))},A.default)},r.getMediaMatter=function(e){r.setState(function(t){var a=t.matterList;return a.set(+new Date,e),{matterList:a}})},r.cropper=I.default.createRef(),r}return(0,_.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.record;if(e&&e.background){var t=JSON.parse(e.background),a=new Map;t.map(function(e,t){a.set(t,e)}),this.setState({matterList:a})}}},{key:"render",value:function(){var e=this,t=this.props,a=(t.account,t.visible),r=t.form,n=r.getFieldDecorator,c=r.getFieldValue,p=r.getFieldError,f=t.loading,m=t.record,g=this.handleOk,h=this.handleCancel,M=(this.renderFields,this.renderField,this.state),b=M.fields,_=void 0===b?[]:b,E=(M.formItemLayout,M.avatar),w=M.matterList,k=m?(0,P.formatMessage)({id:"app.virtual.accounts.edit"}):(0,P.formatMessage)({id:"app.virtual.accounts.add"}),x=_.map(function(t){var a="renderField_".concat(t.name),r=e[a];r||(r=e[a]=e.renderFieldName(t.name));var n,i=p(t.name),l=c(t.name);return"user_interests"===t.name||"user_tags"===t.name||Array.isArray(c(t.name))&&(l=(0,q.default)(c(t.name)[0],"status")),r(t,m,l,i,n)}),L={width:"25%",textAlign:"center",boxShadow:"none",padding:"5px"};return I.default.createElement(I.Fragment,null,I.default.createElement(l.default,{title:k,visible:a,onOk:g,onCancel:h},I.default.createElement(S.default,{autoComplete:"off"},x,I.default.createElement(S.default.Item,(0,v.default)({},this.state.formItemLayout,{label:(0,P.formatMessage)({id:"app.virtual.recommend.is"})}),n("recommend_auth",{valuePropName:"checked",initialValue:!!m&&!!+m.recommend_auth})(I.default.createElement(d.default,null)))),I.default.createElement(o.default,null,I.default.createElement(u.default,{span:5},I.default.createElement("p",{className:G("lab")},(0,P.formatMessage)({id:"app.virtual.recommend.background"}),":")),I.default.createElement(u.default,{span:19},I.default.createElement(s.default,{bordered:!1},!!w.size&&(0,y.default)(w.values()).map(function(t,a){var r=(0,y.default)(w.keys());return I.default.createElement(s.default.Grid,{style:L,key:a},I.default.createElement("div",{className:G("upload_list")},I.default.createElement("div",{className:G("close1"),onClick:function(t){return e.setState(function(e){var t=e.matterList;return t.delete(r[a]),{matterList:t}}),!1}},"X"),1==t.type&&I.default.createElement("div",{className:G("play_icon"),onClick:function(){window.open(t.file,"_blank")}}),I.default.createElement("img",{style:{width:"100%"},src:t.thumbnail,onClick:function(){window.open(t.file,"_blank")}})))}),I.default.createElement(s.default.Grid,{style:L},I.default.createElement(Y.default,{callback:this.getMediaMatter})))))),I.default.createElement(l.default,{title:(0,P.formatMessage)({id:"app.virtual.accounts.avatar_edit"}),onOk:this.crop,onCancel:this.cancelCrop,visible:!!E},I.default.createElement(F.default,{ref:this.cropper,src:E,style:{height:400,width:"100%"},aspectRatio:1,guides:!0})),I.default.createElement("div",{className:G("loading",{hide:!f})},I.default.createElement(i.default,{size:"large"})))}}]),a}(I.default.Component),V=D))||V)||V);t.default=K}}]);