(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{T0w8:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var o=n(a("kLXV")),i=n(a("jehZ"));a("P2fV");var s=n(a("NJEC"));a("BoS7");var l=n(a("Sdc0"));a("5NDa");var c=n(a("5rEg")),d=n(a("d6i3")),u=n(a("1l/V")),f=n(a("2Taf")),p=n(a("vZ4D")),m=n(a("MhPg")),g=n(a("l4Ni")),h=n(a("ujKo"));a("y8nQ");var y,v,M,b,w=n(a("Vl3Y")),E=a("MuoO"),_=r(a("q1tI")),S=a("LLXN");function x(e){return function(){var t,a=(0,h.default)(e);if(k()){var n=(0,h.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,g.default)(this,t)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var C=(y=(0,E.connect)(function(e){var t=e.categories.list;return{list:t}}),v=w.default.create(),y(M=v((b=function(e){(0,m.default)(a,e);var t=x(a);function a(e){var n;return(0,f.default)(this,a),n=t.call(this,e),n.cancelSwitch=function(){n.props.form.setFieldsValue({status:!0})},n.confirmSwitch=function(){n.props.form.setFieldsValue({status:!1})},n.handleCancel=function(){n.setState({visible:!1}),n.props.form.resetFields(),n.props.close()},n.handleOk=(0,u.default)(d.default.mark(function e(){var t,a,r,o,i,s,l,c;return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=n.props,a=t.form,r=a.validateFields,o=a.getFieldsValue,a.getFieldValue,i=a.resetFields,s=t.dispatch,l=t.close,c=t.id,r(function(){var e=(0,u.default)(d.default.mark(function e(t){var a,n;return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(a=o(),a.status=!0===a.status&&1,!c){e.next=10;break}return e.next=7,s({payload:{id:c,values:a},type:"categories/patch"});case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,s({payload:a,type:"categories/create"});case 12:e.t0=e.sent;case 13:n=e.t0,n&&(i(),l());case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)})),n.state={visible:!1},n}return(0,p.default)(a,[{key:"render",value:function(){var e=this,t=this.state.visible,a=this.props,n=a.visible,r=(a.close,a.form.getFieldDecorator),d=a.caption,u=a.id,f=a.list,p={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},m=[{name:"name",placeholder:(0,S.formatMessage)({id:"app.scene.category.name_placeholder"}),options:{rules:[{required:!0,message:(0,S.formatMessage)({id:"app.scene.category.name_required"})},{max:20,message:(0,S.formatMessage)({id:"app.scene.category.name_verify"})}]},label:(0,S.formatMessage)({id:"app.scene.category.name"})},{name:"desc",placeholder:(0,S.formatMessage)({id:"app.scene.category.desc_placeholder"}),options:{rules:[{max:20,message:(0,S.formatMessage)({id:"app.scene.category.desc_verify"})}]},label:(0,S.formatMessage)({id:"app.scene.category.desc"})},{name:"sort",placeholder:(0,S.formatMessage)({id:"app.scene.category.sort_placeholder"}),options:{rules:[]},input_type:"number",label:(0,S.formatMessage)({id:"app.scene.category.sort"})},{name:"status",options:{valuePropName:"checked",initialValue:!1,rules:[]},type:"switch",label:(0,S.formatMessage)({id:"app.scene.category.switch"})}],g={};u&&f&&(g=f&&f.find(function(e){return e.id===u}),m=m.map(function(e){return"switch"===e.type?e.options.initialValue=!!+g[e.name]:e.options.initialValue=g[e.name],e}));var h=m.map(function(t){var a=t.name,n=t.options,o=t.input_type,d=t.placeholder,f=t.label,m=t.type,h=(t.initialValue,_.default.createElement(c.default,{type:o,placeholder:d})),y=!1,v="";return"switch"===m&&(u&&!0===n.initialValue&&(y=!0,v=g.tool_count>0?(0,S.formatMessage)({id:"app.scene.category.has_tool_offline_hint"}):(0,S.formatMessage)({id:"app.scene.category.offline_hint"})),h=_.default.createElement(l.default,null)),_.default.createElement(w.default.Item,(0,i.default)({key:a},p,{label:f}),y?_.default.createElement(s.default,{title:v,okText:(0,S.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,S.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",onCancel:e.cancelSwitch,onConfirm:e.confirmSwitch},r(a,n)(h)):r(a,n)(h))});return _.default.createElement(o.default,{title:d||(0,S.formatMessage)({id:"app.scene.category.add"}),visible:t||n,onOk:this.handleOk,onCancel:this.handleCancel},_.default.createElement(w.default,{autoComplete:"off"},h))}}]),a}(_.PureComponent),M=b))||M)||M),P=C;t.default=P},bUGv:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var o=n(a("wCAj"));a("14J3");var i=n(a("BMrR"));a("jCWc");var s=n(a("kPKH"));a("+L6B");var l=n(a("2/Rp"));a("sPJy");var c=n(a("bE4q"));a("/zsF");var d=n(a("PArb"));a("P2fV");var u=n(a("NJEC"));a("Pwec");var f=n(a("CtXQ"));a("+BJd");var p=n(a("mr32")),m=n(a("2Taf")),g=n(a("vZ4D")),h=n(a("MhPg")),y=n(a("l4Ni")),v=n(a("ujKo"));a("5NDa");var M,b,w,E=n(a("5rEg")),_=a("MuoO"),S=r(a("q1tI")),x=a("LLXN"),k=n(a("T0w8")),C=n(a("wHd6"));function P(e){return function(){var t,a=(0,v.default)(e);if(I()){var n=(0,v.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,y.default)(this,t)}}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}E.default.Search;var N=(M=(0,_.connect)(function(e){var t=e.categories,a=t.list,n=t.total,r=t.page,o=t.pageSize;return{list:a,total:n,page:r,pageSize:o}}),M((w=function(e){(0,h.default)(a,e);var t=P(a);function a(e){var n;return(0,m.default)(this,a),n=t.call(this,e),n.fetchPage=function(e,t){n.props.dispatch({type:"categories/fetch",payload:{page:e,pageSize:t}})},n.showEdit=function(e,t){var a=t.id;e.preventDefault(),n.setState({editId:a})},n.hideEdit=function(){n.setState({editId:null})},n.showAdd=function(){n.setState({adding:!0})},n.hideAdd=function(){n.setState({adding:!1})},n.putOnline=function(e){n.props.dispatch({type:"categories/patchStatus",payload:{id:e,status:1}})},n.putOffline=function(e){n.props.dispatch({type:"categories/patchStatus",payload:{id:e,status:0}})},n.onShowSizeChange=function(e,t){n.props.dispatch({type:"categories/changePageSize",payload:{page:e,pageSize:t}}),n.fetchPage(e,t)},n.state={adding:!1,editId:null},n}return(0,g.default)(a,[{key:"render",value:function(){var e=this.props,t=e.list,a=(e.page,e.pageSize),n=e.total,r=this,m=[{title:(0,x.formatMessage)({id:"app.scene.category.id"}),dataIndex:"id"},{title:(0,x.formatMessage)({id:"app.scene.category.name"}),dataIndex:"name"},{title:(0,x.formatMessage)({id:"app.scene.category.desc"}),dataIndex:"desc"},{title:(0,x.formatMessage)({id:"app.scene.category.status"}),dataIndex:"status_name",render:function(e,t){var a=0==t.status?"gray":"blue";return S.default.createElement(p.default,{color:a},e)}},{title:(0,x.formatMessage)({id:"app.scene.category.sort"}),dataIndex:"sort"},{title:(0,x.formatMessage)({id:"app.scene.category.time"}),dataIndex:"create_time",render:function(e,t){return S.default.createElement(S.Fragment,null,S.default.createElement("div",null,S.default.createElement(f.default,{type:"folder-open",theme:"twoTone"})," ",(0,x.formatMessage)({id:"app.scene.category.update_time"}),": ",t.update_time),S.default.createElement("div",null,S.default.createElement(f.default,{type:"folder-add",theme:"twoTone"})," ",(0,x.formatMessage)({id:"app.scene.category.create_time"}),": ",t.create_time))}},{title:(0,x.formatMessage)({id:"app.scene.category.tool_count"}),dataIndex:"tool_count"},{title:(0,x.formatMessage)({id:"app.scene.category.handle"}),key:"handle",render:function(e,t){var a,n;if(0==t.status)!1,a=(0,x.formatMessage)({id:"app.scene.category.online"}),n=S.default.createElement(u.default,{title:(0,x.formatMessage)({id:"app.scene.category.online_hint"}),okText:(0,x.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,x.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:r.putOnline.bind(r,t.id)},S.default.createElement("a",{href:"#",className:C.default.edit},a));else{!0,a=(0,x.formatMessage)({id:"app.scene.category.offline"});var o=(0,x.formatMessage)({id:"app.scene.category.offline_hint"});t.tool_count>0&&(o=(0,x.formatMessage)({id:"app.scene.category.has_tool_offline_hint"})),n=S.default.createElement(u.default,{title:o,okText:(0,x.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,x.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:r.putOffline.bind(r,t.id)},S.default.createElement("a",{href:"#",className:"".concat(C.default.edit," ").concat(C.default.danger)},a))}return S.default.createElement("div",{className:C.default.handle},S.default.createElement("a",{href:"#",className:C.default.edit,onClick:function(e){r.showEdit(e,t)}},(0,x.formatMessage)({id:"app.scene.category.handle.edit"})),S.default.createElement(d.default,{type:"vertical"}),n)}}];return m=m.map(function(e){return e.align="center",e}),S.default.createElement(S.Fragment,null,S.default.createElement(c.default,{className:"breadcrumb-box",separator:"/"},S.default.createElement(c.default.Item,null,S.default.createElement(f.default,{type:"lock"})," ",(0,x.formatMessage)({id:"menu.operation"})),S.default.createElement(c.default.Item,null,(0,x.formatMessage)({id:"menu.operation.video"})),S.default.createElement(c.default.Item,null,(0,x.formatMessage)({id:"menu.operation.video.category"}))),S.default.createElement(i.default,{className:"operation-bar",gutter:16,type:"flex"},S.default.createElement(s.default,{className:"gutter-row",span:2},S.default.createElement(l.default,{type:"primary",icon:"plus",onClick:this.showAdd},(0,x.formatMessage)({id:"app.scene.category.add"})))),S.default.createElement(k.default,{visible:this.state.adding,close:this.hideAdd.bind(this)}),S.default.createElement(o.default,{bordered:!0,rowKey:"id",columns:m,dataSource:t,pagination:{position:"both",pageSize:a,showSizeChanger:!0,pageSizeOptions:["20","30","40"],onShowSizeChange:this.onShowSizeChange,total:n,showTotal:function(e){return(0,x.formatMessage)({id:"app.glob.pagetotal"},{total:e})},size:"small",onChange:this.fetchPage}}),S.default.createElement(k.default,{caption:(0,x.formatMessage)({id:"app.scene.category.edit"}),id:this.state.editId,visible:!!this.state.editId,close:this.hideEdit.bind(this)}))}}]),a}(S.PureComponent),b=w))||b),T=N;t.default=T},wHd6:function(e,t,a){e.exports={edit:"antd-pro-pages-operation-scene-category-list-edit",danger:"antd-pro-pages-operation-scene-category-list-danger"}}}]);