(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{"1oKi":function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var i=r(a("wCAj"));a("+L6B");var o=r(a("2/Rp"));a("/zsF");var s=r(a("PArb"));a("P2fV");var l=r(a("NJEC"));a("Pwec");var c=r(a("CtXQ"));a("+BJd");var d=r(a("mr32")),f=r(a("2Taf")),u=r(a("vZ4D")),p=r(a("MhPg")),g=r(a("l4Ni")),m=r(a("ujKo"));a("5NDa");var h=r(a("5rEg")),y=a("MuoO"),v=n(a("q1tI")),M=a("LLXN"),b=r(a("Rme9")),w=r(a("71zH")),E=r(a("W07A"));function _(e){return function(){var t,a=(0,m.default)(e);if(C()){var n=(0,m.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,g.default)(this,t)}}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var S=function(e,t,a,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},x=(h.default.Search,function(e){(0,p.default)(a,e);var t=_(a);function a(e){var n;return(0,f.default)(this,a),n=t.call(this,e),n.fetchPage=function(e,t){n.props.dispatch({type:"giftCategories/fetch",payload:{page:e,pageSize:t}})},n.showEdit=function(e,t){var a=t.id;e.preventDefault(),n.setState({editId:a})},n.hideEdit=function(){n.setState({editId:null})},n.showAdd=function(){n.setState({adding:!0})},n.hideAdd=function(){n.setState({adding:!1})},n.putOnline=function(e){n.props.dispatch({type:"giftCategories/patchStatus",payload:{id:e,status:1}})},n.putOffline=function(e){n.props.dispatch({type:"giftCategories/patchStatus",payload:{id:e,status:0}})},n.onShowSizeChange=function(e,t){n.props.dispatch({type:"giftCategories/changePageSize",payload:{page:e,pageSize:t}}),n.fetchPage(e,t)},n.delete=function(e){var t=e.id;e.status;n.props.dispatch({payload:{id:t},type:"giftCategories/delete"})},n.state={adding:!1,editId:null},n}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.list,a=(e.page,e.pageSize),n=e.total,r=this,f=[{icon:"desktop",title:(0,M.formatMessage)({id:"menu.operation"})},{icon:"gift",title:(0,M.formatMessage)({id:"menu.operation.gift"})},{title:(0,M.formatMessage)({id:"menu.operation.gift.category"})}],u=[{title:(0,M.formatMessage)({id:"app.scene.category.id"}),dataIndex:"id"},{title:(0,M.formatMessage)({id:"app.scene.category.name"}),dataIndex:"name"},{title:(0,M.formatMessage)({id:"app.scene.category.desc"}),dataIndex:"desc"},{title:(0,M.formatMessage)({id:"app.scene.category.status"}),dataIndex:"status",render:function(e,t){var a,n;return 0==e?(a="gray",n=(0,M.formatMessage)({id:"app.scene.tools.offline"})):(a="blue",n=(0,M.formatMessage)({id:"app.scene.tools.online"})),v.default.createElement(d.default,{color:a},n)}},{title:(0,M.formatMessage)({id:"app.scene.category.sort"}),dataIndex:"sort"},{title:(0,M.formatMessage)({id:"app.scene.category.time"}),dataIndex:"create_time",render:function(e,t){return v.default.createElement(v.Fragment,null,v.default.createElement("div",null,v.default.createElement(c.default,{type:"folder-open",theme:"twoTone"})," ",(0,M.formatMessage)({id:"app.scene.category.update_time"}),": ",t.update_time),v.default.createElement("div",null,v.default.createElement(c.default,{type:"folder-add",theme:"twoTone"})," ",(0,M.formatMessage)({id:"app.scene.category.create_time"}),": ",t.create_time))}},{title:(0,M.formatMessage)({id:"app.gift.category.toolCount"}),dataIndex:"tool_count"},{title:(0,M.formatMessage)({id:"app.scene.category.handle"}),key:"handle",render:function(e,t){var a,n;if(0==t.status)!1,a=(0,M.formatMessage)({id:"app.scene.category.online"}),n=v.default.createElement(l.default,{title:(0,M.formatMessage)({id:"app.scene.category.online_hint"}),okText:(0,M.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,M.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:r.putOnline.bind(r,t.id)},v.default.createElement("a",{href:"#",className:E.default.edit},a));else{!0,a=(0,M.formatMessage)({id:"app.scene.category.offline"});var i=(0,M.formatMessage)({id:"app.scene.category.offline_hint"});t.tool_count>0&&(i=(0,M.formatMessage)({id:"app.scene.category.has_tool_offline_hint"})),n=v.default.createElement(l.default,{title:i,okText:(0,M.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,M.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",placement:"topRight",onConfirm:r.putOffline.bind(r,t.id)},v.default.createElement("a",{href:"#",className:"".concat(E.default.edit," ").concat(E.default.danger)},a))}0===t.status&&0===t.tool_count||v.default.createElement(v.Fragment,null,v.default.createElement(s.default,{type:"vertical"}),v.default.createElement("a",{href:"#",className:"".concat(E.default.delete," ").concat(E.default.danger),onClick:r.delete.bind(r,t)},(0,M.formatMessage)({id:"app.scene.tools.delete"})));return v.default.createElement("div",{className:E.default.handle},v.default.createElement("a",{href:"#",className:E.default.edit,onClick:function(e){r.showEdit(e,t)}},(0,M.formatMessage)({id:"app.scene.category.handle.edit"})),v.default.createElement(s.default,{type:"vertical"}),n)}}];u=u.map(function(e){return e.align="center",e});var p=v.default.createElement("div",{className:E.default.operate},v.default.createElement("div",{className:E.default.title},(0,M.formatMessage)({id:"menu.operation.gift.category"})),v.default.createElement(o.default,{type:"primary",icon:"plus",onClick:this.showAdd},(0,M.formatMessage)({id:"app.scene.category.add"})));return v.default.createElement(v.Fragment,null,v.default.createElement(w.default,{items:f}),p,this.state.adding&&v.default.createElement(b.default,{visible:this.state.adding,close:this.hideAdd.bind(this)}),v.default.createElement(i.default,{bordered:!0,rowKey:"id",columns:u,dataSource:t,pagination:{position:"both",pageSize:a,showSizeChanger:!0,pageSizeOptions:["20","30","40"],onShowSizeChange:this.onShowSizeChange,total:n,showTotal:function(e){return(0,M.formatMessage)({id:"app.glob.pagetotal"},{total:e})},size:"small",onChange:this.fetchPage}}),!!this.state.editId&&v.default.createElement(b.default,{caption:(0,M.formatMessage)({id:"app.scene.category.edit"}),id:this.state.editId,visible:!!this.state.editId,close:this.hideEdit.bind(this)}))}}]),a}(v.PureComponent));x=S([(0,y.connect)(function(e){var t=e.giftCategories,a=t.list,n=t.total,r=t.page,i=t.pageSize;return{list:a,total:n,page:r,pageSize:i}})],x);var k=x;t.default=k},Rme9:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=r(a("kLXV"));a("P2fV");var o=r(a("NJEC"));a("y8nQ");var s=r(a("Vl3Y"));a("Pwec");var l=r(a("CtXQ"));a("+L6B");var c=r(a("2/Rp"));a("DZo9");var d=r(a("8z0m"));a("BoS7");var f=r(a("Sdc0"));a("5NDa");var u=r(a("5rEg")),p=r(a("d6i3")),g=r(a("2Taf")),m=r(a("vZ4D")),h=r(a("rlhR")),y=r(a("MhPg")),v=r(a("l4Ni")),M=r(a("ujKo")),b=a("MuoO"),w=n(a("q1tI")),E=a("LLXN"),_=r(a("Wwog")),C=r(a("Y+p1")),S=r(a("mwIZ"));function x(e){return function(){var t,a=(0,M.default)(e);if(k()){var n=(0,M.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,v.default)(this,t)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var F=function(e,t,a,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},R=function(e,t,a,n){function r(e){return e instanceof a?e:new a(function(t){t(e)})}return new(a||(a=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n["throw"](e))}catch(e){i(e)}}function l(e){e.done?a(e.value):r(e.value).then(o,s)}l((n=n.apply(e,t||[])).next())})},P=a("xDdU"),O=function(e){(0,y.default)(a,e);var t=x(a);function a(e){var n;return(0,g.default)(this,a),n=t.call(this,e),n.state={visible:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},fields:[{name:"name",placeholder:(0,E.formatMessage)({id:"app.scene.category.name_placeholder"}),options:{rules:[{required:!0,message:(0,E.formatMessage)({id:"app.scene.category.name_required"})},{max:20,message:(0,E.formatMessage)({id:"app.scene.category.name_verify"})}]},label:(0,E.formatMessage)({id:"app.scene.category.name"})},{name:"desc",placeholder:(0,E.formatMessage)({id:"app.scene.category.desc_placeholder"}),options:{rules:[{max:20,message:(0,E.formatMessage)({id:"app.scene.category.desc_verify"})}]},label:(0,E.formatMessage)({id:"app.scene.category.desc"})},{name:"sort",placeholder:(0,E.formatMessage)({id:"app.scene.category.sort_placeholder"}),options:{rules:[]},input_type:"number",label:(0,E.formatMessage)({id:"app.scene.category.sort"})},{name:"status",options:{valuePropName:"checked",initialValue:!1,rules:[]},type:"switch",label:(0,E.formatMessage)({id:"app.scene.category.switch"})}]},n.cancelSwitch=function(){n.props.form.setFieldsValue({status:!0})},n.confirmSwitch=function(){n.props.form.setFieldsValue({status:!1})},n.handleCancel=function(){n.setState({visible:!1}),n.props.form.resetFields(),n.props.close()},n.handleOk=function(){return R((0,h.default)(n),void 0,void 0,p.default.mark(function e(){var t,a,n,r,i,o,s,l,c=this;return p.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.props,a=t.form,n=a.validateFields,r=a.getFieldsValue,a.getFieldValue,i=a.resetFields,o=t.dispatch,s=t.close,l=t.id,n(function(e){return R(c,void 0,void 0,p.default.mark(function t(){var a,n,c;return p.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:if(a=r(),n=new FormData,a.status=!0===a.status?1:0,Object.keys(a).forEach(function(e){var t=a[e];if(void 0!==t){if("object"===typeof t&&t){if(Array.isArray(t)&&t[0].url)return;return n.append(e,t[0].originFileObj,t[0].name)}n.append(e,t)}}),l&&n.append("id",l),console.info("params__",{values:a,params:n,id:l}),!l){t.next=14;break}return t.next=11,o({payload:n,type:"giftCategories/patch"});case 11:t.t0=t.sent,t.next=17;break;case 14:return t.next=16,o({payload:n,type:"giftCategories/create"});case 16:t.t0=t.sent;case 17:c=t.t0,c&&(s(),i());case 19:case"end":return t.stop()}},t)}))});case 2:case"end":return e.stop()}},e,this)}))},n.normFile=function(e){return Array.isArray(e)?e:e&&Array.isArray(e.fileList)?e.fileList.slice(-1):e&&e.fileList},n.renderFieldName=function(){var e=(0,h.default)(n);return(0,_.default)(function(t,a,r,i,p){var g=n.props,m=g.form,h=m.getFieldDecorator,y=(m.setFieldsValue,g.cates,g.id),v=(g.list,n.state),M=(v.fields,v.formItemLayout);t.name in a&&("switch"===t.type?t.options.initialValue=!!+a[t.name]:"position"===t.name?t.options.initialValue=+a[t.name]>0?+a[t.name]:void 0:"upload"===t.type?a[t.name]&&(t.options.initialValue=[{url:a[t.name],name:a.bundle_name||b,uid:P()}]):t.options.initialValue=a[t.name]);var b=t.name,_=t.options,C=t.input_type,S=t.placeholder,x=t.label,k=t.type,F=(t.initialValue,t.properties),R=void 0===F?{}:F,O=w.default.createElement(u.default,{type:C,placeholder:S}),I=!1,V="";t.optionList;return"switch"===k&&(y&&!0===_.initialValue&&(I=!0,V=a.tool_count>0?(0,E.formatMessage)({id:"app.scene.category.has_tool_offline_hint"}):(0,E.formatMessage)({id:"app.scene.category.offline_hint"})),O=w.default.createElement(f.default,null)),"upload"===k&&(_.getValueFromEvent=n.normFile,R.customRequest=function(e){e.file;var t=e.onSuccess;setTimeout(function(){t("ok")},0)},O=w.default.createElement(d.default,Object.assign({},R),w.default.createElement(c.default,null,w.default.createElement(l.default,{type:"cloud-upload"})," ",S))),w.default.createElement(s.default.Item,Object.assign({key:b},M,{label:x}),I?w.default.createElement(o.default,{title:V,okText:(0,E.formatMessage)({id:"app.scene.category.offline_confirm"}),cancelText:(0,E.formatMessage)({id:"app.scene.category.offline_cancel"}),okType:"danger",onCancel:e.cancelSwitch,onConfirm:e.confirmSwitch},h(b,_)(O)):h(b,_)(O))},C.default)},n}return(0,m.default)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.fields,r=this.props,o=r.visible,l=(r.close,r.form),c=(l.getFieldDecorator,l.getFieldError),d=l.getFieldValue,f=r.caption,u=r.id,p=r.list,g={};u&&p&&(g=p&&p.find(function(e){return e.id===u}));var m=n.map(function(t){var a="renderField_".concat(t.name),n=e[a];n||(n=e[a]=e.renderFieldName(t.name));var r,i=c(t.name),o=d(t.name);return Array.isArray(d(t.name))&&(o=(0,S.default)(d(t.name)[0],"status")),n(t,g,o,i,r)});return w.default.createElement(i.default,{title:f||(0,E.formatMessage)({id:"app.scene.category.add"}),visible:a||o,onOk:this.handleOk,onCancel:this.handleCancel},w.default.createElement(s.default,{autoComplete:"off"},m))}}]),a}(w.PureComponent);O=F([(0,b.connect)(function(e){var t=e.giftCategories.list;return{list:t}}),s.default.create()],O);var I=O;t.default=I},W07A:function(e,t,a){e.exports={edit:"antd-pro-pages-operation-gift-category-list-edit",danger:"antd-pro-pages-operation-gift-category-list-danger",icon:"antd-pro-pages-operation-gift-category-list-icon",select:"antd-pro-pages-operation-gift-category-list-select",operate:"antd-pro-pages-operation-gift-category-list-operate"}}}]);