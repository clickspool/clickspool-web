(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"/hgj":function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5NDa");var l=r(a("5rEg"));a("y8nQ");var o=r(a("Vl3Y"));a("2qtc");var i=r(a("kLXV")),s=r(a("2Taf")),d=r(a("rlhR")),u=r(a("MhPg")),p=r(a("l4Ni")),c=r(a("ujKo")),f=n(a("q1tI")),m=a("LLXN");function g(e){return function(){var t,a=(0,c.default)(e);if(h()){var n=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,p.default)(this,t)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var y=function(e){(0,u.default)(a,e);var t=g(a);function a(e){var n;return(0,s.default)(this,a),n=t.call(this,e),n.cancel=function(){var e=n.props.handleCancel;e(),n.props.form.resetFields()},n.confirm=function(){var e=n.props,t=e.handleOk,a=e.record;t(n.props.form.getFieldValue("refuse_reason"),a),n.props.form.resetFields()},n.render=function(){var e=n.props,t=e.form.getFieldDecorator,a=e.visible,r=(0,d.default)(n),s=r.cancel,u=r.confirm;return f.default.createElement(i.default,{title:(0,m.formatMessage)({id:"app.apply.refuse.title"}),visible:a,onCancel:s,onOk:u},f.default.createElement(o.default,null,f.default.createElement(o.default.Item,null,t("refuse_reason",{rules:[{required:!0,message:(0,m.formatMessage)({id:"app.apply.refuse.placeholder"})}]})(f.default.createElement(l.default.TextArea,{placeholder:(0,m.formatMessage)({id:"app.apply.refuse.placeholder"}),autoSize:{minRows:2,maxRows:6}})))))},n.state={visible:!1},n}return a}(f.PureComponent),v=o.default.create({name:"refuse_form"})(y),E=v;t.default=E},"1C9R":function(e,t,a){e.exports={hide:"antd-pro-pages-operation-apply-components-preview-hide",wraper:"antd-pro-pages-operation-apply-components-preview-wraper",mask:"antd-pro-pages-operation-apply-components-preview-mask",content:"antd-pro-pages-operation-apply-components-preview-content"}},"5n6h":function(e,t,a){e.exports={date:"antd-pro-pages-operation-apply-account-edit-date",loading:"antd-pro-pages-operation-apply-account-edit-loading",hide:"antd-pro-pages-operation-apply-account-edit-hide",upload_list:"antd-pro-pages-operation-apply-account-edit-upload_list",close1:"antd-pro-pages-operation-apply-account-edit-close1",play_icon:"antd-pro-pages-operation-apply-account-edit-play_icon",lab:"antd-pro-pages-operation-apply-account-edit-lab"}},"AO/7":function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("2Taf")),l=n(a("vZ4D")),o=function(){function e(t,a){return(0,r.default)(this,e),this.getFileType=function(e){var t=e.split("."),a="";return void 0!=t&&(t.length<=1&&e.indexOf("=")>-1?(console.log("\u8f93\u5165\u662f\u6587\u4ef6\u5730\u5740\uff1a",t),!1):(a=t[t.length-1],a=a.toLowerCase(),a))},this.audio=document.createElement("Audio"),this.audio.preload="metadata",this.audio.src=URL.createObjectURL(t),this.init(t,a)}return(0,l.default)(e,[{key:"init",value:function(e,t){var a=this;return new Promise(function(n,r){var l=a.fileLengthFormat(e.size,t);a.getFileType(e.name);a.audio.onloadedmetadata=function(){window.URL.revokeObjectURL(a.audio.src);var t=a.audio.duration;n({file:e,size:l,duration:t})}})}},{key:"fileLengthFormat",value:function(e,t){var a,n=e/1024;if(n>1e3)return this.fileLengthFormat(n,++t);switch(t){case 1:a=n.toFixed(2);break;case 2:a=n.toFixed(2);break;case 3:a=n.toFixed(2);break;case 4:a=n.toFixed(2);break}return+a}}]),e}(),i=o;t.default=i},APGO:function(e,t,a){e.exports={operate:"antd-pro-pages-operation-apply-list-operate",icon:"antd-pro-pages-operation-apply-list-icon",handle:"antd-pro-pages-operation-apply-list-handle","operations-wraper":"antd-pro-pages-operation-apply-list-operations-wraper",edit:"antd-pro-pages-operation-apply-list-edit",danger:"antd-pro-pages-operation-apply-list-danger",delete:"antd-pro-pages-operation-apply-list-delete antd-pro-pages-operation-apply-list-danger",mrm:"antd-pro-pages-operation-apply-list-mrm",search:"antd-pro-pages-operation-apply-list-search",list:"antd-pro-pages-operation-apply-list-list",avatar:"antd-pro-pages-operation-apply-list-avatar",time:"antd-pro-pages-operation-apply-list-time",divide:"antd-pro-pages-operation-apply-list-divide",date:"antd-pro-pages-operation-apply-list-date",loading:"antd-pro-pages-operation-apply-list-loading",hide:"antd-pro-pages-operation-apply-list-hide",media:"antd-pro-pages-operation-apply-list-media",rule:"antd-pro-pages-operation-apply-list-rule",tag:"antd-pro-pages-operation-apply-list-tag","select-item":"antd-pro-pages-operation-apply-list-select-item",wraper:"antd-pro-pages-operation-apply-list-wraper",cover:"antd-pro-pages-operation-apply-list-cover",play:"antd-pro-pages-operation-apply-list-play",plan:"antd-pro-pages-operation-apply-list-plan","plan-label":"antd-pro-pages-operation-apply-list-plan-label",add_yuyin:"antd-pro-pages-operation-apply-list-add_yuyin",luzhiyy:"antd-pro-pages-operation-apply-list-luzhiyy",tijaobtn:"antd-pro-pages-operation-apply-list-tijaobtn",r_yuyin:"antd-pro-pages-operation-apply-list-r_yuyin",bofang:"antd-pro-pages-operation-apply-list-bofang","handle-button":"antd-pro-pages-operation-apply-list-handle-button"}},ERK4:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=r(a("wCAj"));a("BoS7");var o=r(a("Sdc0"));a("/zsF");var i=r(a("PArb")),s=r(a("eHn4"));a("+L6B");var d=r(a("2/Rp"));a("P2fV");var u=r(a("NJEC"));a("+BJd");var p=r(a("mr32"));a("5NDa");var c=r(a("5rEg"));a("2qtc");var f=r(a("kLXV")),m=r(a("2Taf")),g=r(a("vZ4D")),h=r(a("MhPg")),y=r(a("l4Ni")),v=r(a("ujKo"));a("Pwec");var E=r(a("CtXQ")),b=a("MuoO"),w=n(a("q1tI")),_=a("LLXN"),M=r(a("71zH")),R=r(a("e7Qv")),S=r(a("UbMB")),k=r(a("/hgj")),N=r(a("S0J3")),O=r(a("wNvD")),C=r(a("jlKE")),x=r(a("mwIZ")),j=r(a("APGO"));function F(e){return function(){var t,a=(0,v.default)(e);if(P()){var n=(0,v.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,y.default)(this,t)}}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var D=function(e,t,a,n){var r,l=arguments.length,o=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(l<3?r(o):l>3?r(t,a,o):r(t,a))||o);return l>3&&o&&Object.defineProperty(t,a,o),o},L=S.default.bind(j.default),V=(E.default.CheckOutlined,function(e){(0,h.default)(a,e);var t=F(a);function a(e){var n;return(0,m.default)(this,a),n=t.call(this,e),n.pass=function(e,t){console.info("pass__",e),n.props.dispatch({type:"apply/patchStatus",payload:{recommend_score:e,id:t.id,status:2}}),n.hidePass()},n.refuse=function(e,t){e&&!e.replace(/\s*/g,"")||(n.props.dispatch({type:"apply/patchStatus",payload:{id:t.id,status:3,reason:e}}),n.setState({reason:""}),n.hideRefuse())},n.showPass=function(e,t){e.preventDefault(),console.info("show_pass_",n.state.userTags),n.setState({passShowing:!0})},n.showRefuse=function(e,t){e.preventDefault(),n.setState({refuseShowing:!0})},n.reasonUpdate=function(e){var t=e.target.value;t=t.replace(/(^\s*)|(\s*$)/g,""),n.setState({reason:e.target.value})},n.hidePass=function(e){n.setState({passShowing:!1})},n.hideRefuse=function(e){n.setState({refuseShowing:!1})},n.hidePreview=function(e){n.setState({previewShowing:!1,previewUrl:""})},n.preview=function(e){n.setState({previewShowing:!0,previewUrl:e})},n.showEdit=function(e,t){e.preventDefault(),t&&n.setState({editRecord:t}),n.setState({editShowing:!0})},n.showAdd=function(){n.setState({addShowing:!0})},n.hideAdd=function(){n.setState({addShowing:!1})},n.hideEdit=function(){n.setState({editShowing:!1,editRecord:null})},n.search=function(e){n.setState({search:e});var t=n.props.pageSize,a=1;n.props.dispatch({type:"apply/updateState",payload:{filter:e}}),n.props.dispatch({payload:Object.assign(Object.assign({},e),{page:a,pageSize:t}),type:"apply/fetch"})},n.onShowSizeChange=function(e,t){n.props.dispatch({type:"apply/changePageSize",payload:{page:e,pageSize:t}}),n.fetchPage(e,t)},n.fetchPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=n.state.search,r=void 0===a?{}:a;n.setState({page:e,page_size:t}),n.props.dispatch({type:"apply/fetch",payload:Object.assign({page:e,page_size:t},r)})},n.cancelRecommendHandle=function(e){f.default.confirm({title:"\u6d88\u606f",content:"\u786e\u5b9a\u64a4\u9500\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){n.props.dispatch({type:"apply/cancelRecommend",payload:{id:e}}).then(function(){n.props.dispatch({type:"apply/fetch",payload:Object.assign({page:n.props.page,page_size:n.props.pageSize},n.state.search)})})}})},n.InputCompress=function(){return w.default.createElement(c.default,{style:{width:"200px"},ref:n.inputRef,placeholder:"\u8bf7\u8f93\u5165\u538b\u7f29\u6bd4\u8303\u56f4 1~51"})},n.toggleRecommend=function(e){var t=e.user_id,a=e.value,r=e.id,l=n.props.dispatch;l({type:"apply/setUserCallAlert",payload:{user_id:t,is_alert:a?1:0,id:r}})},n.wipeWaterMark=function(e){var t=n.props.dispatch,a=e.currentTarget.dataset.id;t({type:"apply/deWatermarkVideo",payload:{id:a}})},n.state={editShowing:!1,previewShowing:!1,playVoice:{},showEditModel:!1,search:{}},n.input=w.default.createRef(),n.inputRef=w.default.createRef(),n}return(0,g.default)(a,[{key:"render",value:function(){var e=this,t=[{icon:"desktop",title:(0,_.formatMessage)({id:"menu.operation"})},{title:(0,_.formatMessage)({id:"menu.operation.user.apply"})}],a=this.props,n=a.list,r=a.total,c=a.page,f=a.pageSize,m=a.tags,g=a.statuses,h=a.chatTagsMap,y=a.userTypeMap,v=void 0===y?{}:y,b=this.showAdd,S=this.search,F=(this.VioceTable,this.state.playVoice,this.InputCompress),P=this.toggleRecommend,D=this,V=[{title:(0,_.formatMessage)({id:"app.message.template.id"}),dataIndex:"id",align:"center"},{title:"nick_id",dataIndex:"nick_id",align:"center"},{title:"\u7528\u6237\u7c7b\u578b",dataIndex:"type",align:"center",width:220,render:function(e){var t={};return t.color=1===+e?"green":"grey",v[e]?w.default.createElement(p.default,Object.assign({},t),v[e]):""}},{title:"\u5934\u50cf",dataIndex:"avatar",align:"center",width:150,render:function(e){return w.default.createElement("img",{src:e,style:{width:100,height:100}})}},{title:"\u6240\u5c5e\u56fd\u5bb6",dataIndex:"nation",align:"center",render:function(e){if(e)return(D.props.GlobalCountryMap.find(function(t){return t.id==e})||{})["name"]||""}},{title:"\u6027\u522b",dataIndex:"sex",align:"center",render:function(e){return 1==e?"\u7537":"\u5973"}},{title:(0,_.formatMessage)({id:"app.settings.basic.nickname"}),dataIndex:"nickname",align:"center"},{title:(0,_.formatMessage)({id:"app.virtual.accounts.time"}),dataIndex:"time",align:"center",render:function(e,t){return w.default.createElement(w.Fragment,null,w.default.createElement("div",{className:L("time")},(0,_.formatMessage)({id:"app.group.list.edit_time"}),": ",t.update_at),w.default.createElement("div",{className:L("time")},(0,_.formatMessage)({id:"app.group.list.create_time"}),": ",t.create_at))}},{title:(0,_.formatMessage)({id:"app.apply.account"}),dataIndex:"user_id",align:"center"},{title:(0,_.formatMessage)({id:"app.apply.video"}),dataIndex:"remote_self_video",align:"center",render:function(t,a){return w.default.createElement(w.default.Fragment,null,w.default.createElement("div",{className:j.default.wraper,"data-src":t},w.default.createElement("img",{className:j.default.cover,src:"".concat(t,"?x-oss-process=video/snapshot,t_1000,f_jpg,w_400,m_fast"),onClick:function(){e.preview(t)}}),w.default.createElement(E.default,{className:j.default.play,type:"play-circle",onClick:function(){e.preview(t)}})),!~~a.compressed&&w.default.createElement(u.default,{title:F(),icon:null,onConfirm:function(){var e=D.inputRef.current.state.value;/^[0-9]*$/.test(e)&&~~e>=0&&~~e<=51&&D.props.dispatch({type:"apply/compressVideo",payload:{id:a.id,crf:~~e}}).then(function(e){0==e.code&&(D.inputRef.current.state.value="")})},onCancel:function(){D.inputRef.current.state.value=""}},w.default.createElement(d.default,{className:j.default["handle-button"],type:"primary",size:"small"},w.default.createElement(E.default,{type:"column-width"}),"\u538b\u7f29")),w.default.createElement(d.default,{disabled:2===+a.dewater_status,icon:2===+a.dewater_status?"check":"",loading:1===+a.dewater_status,className:j.default["handle-button"],"data-id":a.id,onClick:D.wipeWaterMark,type:"primary",size:"small"},2===+a.dewater_status&&"\u5df2","\u53bb\u6c34\u5370"))}},{title:"\u7533\u8bf7\u97f3\u9891",dataIndex:"chat_tags",align:"chat_tags",width:150,render:function(t,a,n){var r=D.state.playVoice;if(t){var l=JSON.parse(t);if(!l||!l[0])return;return w.default.createElement("div",{className:j.default.add_yuyin,onClick:function(){if(r["".concat(n).concat(l[0].tag_id)])return D.voice.pause(),void D.setState({playVoice:{}});e.voice&&D.voice.pause(),D.voice=new Audio(l[0].sound),D.voice.loop=!1,D.voice.addEventListener("ended",function(){console.log(1,"\u6267\u884c\u76d1\u542c"),D.setState({playVoice:{}})},!1),D.voice.play(),D.setState({playVoice:(0,s.default)({},"".concat(n).concat(l[0].tag_id),!0)})}},w.default.createElement("div",{className:j.default.r_yuyin,style:{width:"100%"}},l[0].duration,"'' ",w.default.createElement("s",{className:r["".concat(n).concat(l[0].tag_id)]?j.default.bofang:null})))}return null}},{title:"\u97f3\u9891\u6807\u7b7e",dataIndex:"_",align:"_",width:150,render:function(e,t,a){if(t.chat_tags&&h){var n=JSON.parse(t.chat_tags);if(!n||!n[0])return;var r=h.find(function(e,t){return e.id==n[0].tag_id});return w.default.createElement(p.default,{key:r.id},r.name)}return null}},{title:"\u97f3\u9891\u63cf\u8ff0",dataIndex:"_1",align:"_1",render:function(e,t,a){if(t.chat_tags){var n=JSON.parse(t.chat_tags);if(!n||!n[0])return;return JSON.parse(t.chat_tags)[0].content}return null}},{title:(0,_.formatMessage)({id:"app.apply.recommend.score"}),dataIndex:"recommend_score",align:"center"},{title:(0,_.formatMessage)({id:"app.apply.reapply"}),dataIndex:"reapply_name",align:"center"},{title:(0,_.formatMessage)({id:"app.group.tag.status"}),dataIndex:"status",align:"center",render:function(e){var t={};return 2===+e&&(t.color="green"),3===+e&&(t.color="red"),w.default.createElement(p.default,Object.assign({},t),(0,_.formatMessage)({id:"app.apply.status".concat(e)}))}},{title:(0,_.formatMessage)({id:"app.apply.auditor"}),dataIndex:"check_member_name",align:"center"},{title:(0,_.formatMessage)({id:"app.apply.reason"}),dataIndex:"refuse_reason",align:"center",width:300},{title:(0,_.formatMessage)({id:"app.virtual.accounts.operation"}),dataIndex:"operation",align:"center",fixed:"right",width:"200px",render:function(t,a){return+a.status>1?w.default.createElement("div",{className:j.default.handle},w.default.createElement("span",{className:j.default.edit,onClick:function(t){e.cancelRecommendHandle(a.id)}},(0,_.formatMessage)({id:"app.apply.reset"})),w.default.createElement(i.default,{type:"vertical"}),w.default.createElement("span",{className:j.default.delete,onClick:function(t){e.setState({currentRecord:a,showEditModel:!0})}},"\u7f16\u8f91"),2===+a.status&&w.default.createElement(w.default.Fragment,null,w.default.createElement(i.default,null),w.default.createElement("div",{className:j.default.plan},w.default.createElement("label",{className:j.default["plan-label"]},(0,_.formatMessage)({id:"app.apply.callAlert"})),w.default.createElement(o.default,{checkedChildren:(0,_.formatMessage)({id:"app.apply.callAlert.yes"}),unCheckedChildren:(0,_.formatMessage)({id:"app.apply.callAlert.no"}),checked:!!a.is_alert,onChange:function(e){P({user_id:a.user_id,value:e,id:a.id})}})))):w.default.createElement("div",{className:j.default.handle},w.default.createElement("span",{className:j.default.edit,style:{color:"green"},onClick:function(t){m.filter(function(e){return a.tags.indexOf(e.id)>=0});var n=a.recommend_score||0;e.setState({score:n,currentRecord:a}),e.showPass(t,a)}},(0,_.formatMessage)({id:"app.apply.pass"})),w.default.createElement(i.default,{type:"vertical"}),w.default.createElement("span",{className:j.default.delete,onClick:function(t){e.setState({currentRecord:a}),e.showRefuse(t,a)}},(0,_.formatMessage)({id:"app.apply.refuse"})),w.default.createElement(i.default,{type:"vertical"}),w.default.createElement("span",{className:j.default.delete,onClick:function(t){e.setState({currentRecord:a,showEditModel:!0})}},"\u7f16\u8f91"))}}];return w.default.createElement(w.Fragment,null,w.default.createElement(M.default,{items:t}),w.default.createElement("div",{className:L("operate")},w.default.createElement(R.default,{statuses:g,search:S,addTitle:(0,_.formatMessage)({id:"app.virtual.reply.add"}),add:b,tags:m})),w.default.createElement(l.default,{className:L("list"),bordered:!0,rowKey:"id",columns:V,dataSource:n,scroll:{x:3e3},pagination:{position:"both",pageSize:f,showSizeChanger:!0,pageSizeOptions:["20","30","40"],onShowSizeChange:this.onShowSizeChange,total:r,current:c,showTotal:function(e){return(0,_.formatMessage)({id:"app.glob.pagetotal"},{total:e})},size:"small",onChange:this.fetchPage}}),w.default.createElement(N.default,{visible:this.state.passShowing,record:this.state.currentRecord,score:(0,x.default)(this.state.currentRecord,"recommend_score"),handleOk:this.pass,handleCancel:this.hidePass}),w.default.createElement(k.default,{visible:this.state.refuseShowing,record:this.state.currentRecord,handleOk:this.refuse,handleCancel:this.hideRefuse}),w.default.createElement(O.default,{visible:this.state.previewShowing,url:this.state.previewUrl,hide:this.hidePreview}),this.state.showEditModel&&w.default.createElement(C.default,{record:this.state.currentRecord,close:function(){e.setState({showEditModel:!1},function(){e.fetchPage(e.state.page||1,e.state.pageSize||1)})}}))}}]),a}(w.PureComponent));V=D([(0,b.connect)(function(e){var t=e.global.GlobalCountryMap,a=e.apply,n=a.list,r=a.total,l=a.page,o=a.pageSize,i=a.tags,s=a.statuses,d=void 0===s?[]:s,u=a.chatTagsMap,p=a.userTypeMap;return{GlobalCountryMap:t,list:n,total:r,page:l,pageSize:o,tags:i,statuses:d,chatTagsMap:u,userTypeMap:p}})],V);var I=V;t.default=I},RtBj:function(e,t,a){e.exports={add_yuyin:"antd-pro-pages-operation-apply-audio-add_yuyin",luzhiyy:"antd-pro-pages-operation-apply-audio-luzhiyy",tijaobtn:"antd-pro-pages-operation-apply-audio-tijaobtn",r_yuyin:"antd-pro-pages-operation-apply-audio-r_yuyin",bofang:"antd-pro-pages-operation-apply-audio-bofang"}},S0J3:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("y8nQ");var l=r(a("Vl3Y"));a("2qtc");var o=r(a("kLXV")),i=r(a("gWZ8")),s=r(a("2Taf")),d=r(a("rlhR")),u=r(a("MhPg")),p=r(a("l4Ni")),c=r(a("ujKo"));a("OaEy");var f=r(a("2fM7")),m=n(a("q1tI")),g=a("MuoO"),h=a("LLXN");function y(e){return function(){var t,a=(0,c.default)(e);if(v()){var n=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,p.default)(this,t)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var E=function(e,t,a,n){var r,l=arguments.length,o=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(l<3?r(o):l>3?r(t,a,o):r(t,a))||o);return l>3&&o&&Object.defineProperty(t,a,o),o},b=f.default.Option,w=function(e){(0,u.default)(a,e);var t=y(a);function a(e){var n;return(0,s.default)(this,a),n=t.call(this,e),n.cancel=function(){var e=n.props.handleCancel;e(),n.props.form.resetFields()},n.confirm=function(){var e=n.props,t=e.handleOk,a=e.record,r=(e.handleCancel,e.form),l=r.validateFields,o=r.getFieldValue;r.getFieldsValue,r.resetFields;l(function(e){e||(console.info("confirm__",n.props.form.getFieldsValue()),t(o("recommend_score"),a),n.props.form.resetFields())})},n.render=function(){var e=n.props,t=e.form.getFieldDecorator,a=e.visible,r=e.score,s=void 0===r?0:r,u=(e.allTags,(0,d.default)(n)),p=u.cancel,c=u.confirm,g={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},y=(0,i.default)(new Array(10)).map(function(e,t){return t+1});return console.info("debug_scores",y),m.default.createElement(o.default,{title:(0,h.formatMessage)({id:"app.apply.pass.title"}),visible:a,onCancel:p,onOk:c},m.default.createElement(l.default,null,m.default.createElement(l.default.Item,Object.assign({},g,{label:(0,h.formatMessage)({id:"app.apply.pass.label"})}),t("recommend_score",{rules:[{required:!0,message:(0,h.formatMessage)({id:"app.apply.pass.placeholder"})}],initialValue:s})(m.default.createElement(f.default,null,y.map(function(e){return m.default.createElement(b,{key:e,value:e},e)}))))))},n.state={visible:!1},n}return a}(m.PureComponent);w=E([(0,g.connect)(function(e){var t=e.apply.tags;return{allTags:t}})],w);var _=l.default.create({name:"refuse_form"})(w),M=_;t.default=M},"U+aE":function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var l=r(a("qIgq")),o=n(a("q1tI")),i=r(a("RtBj"));function s(e){var t=null,a=(0,o.useState)(!1),n=(0,l.default)(a,2),r=n[0],s=n[1];return o.default.createElement("div",{className:i.default.add_yuyin,onClick:function(){s(!0),t&&t.pause(),t=new Audio(e.sound),t.loop=!1,t.addEventListener("ended",function(){t.pause()},!1),t.play()}},o.default.createElement("div",{className:i.default.r_yuyin},e.duration||0,"'' ",o.default.createElement("s",{className:r?i.default.bofang:""})))}},e7Qv:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var l=r(a("2/Rp"));a("iQDF");var o=r(a("+eQT"));a("5NDa");var i=r(a("5rEg"));a("jCWc");var s=r(a("kPKH"));a("14J3");var d=r(a("BMrR"));a("y8nQ");var u=r(a("Vl3Y"));a("OaEy");var p=r(a("2fM7")),c=r(a("2Taf")),f=r(a("vZ4D")),m=r(a("MhPg")),g=r(a("l4Ni")),h=r(a("ujKo")),y=n(a("q1tI")),v=a("MuoO"),E=a("LLXN"),b=r(a("lIWg"));function w(e){return function(){var t,a=(0,h.default)(e);if(_()){var n=(0,h.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,g.default)(this,t)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var M=function(e,t,a,n){var r,l=arguments.length,o=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(l<3?r(o):l>3?r(t,a,o):r(t,a))||o);return l>3&&o&&Object.defineProperty(t,a,o),o},R=function(e){(0,m.default)(a,e);var t=w(a);function a(){var e;return(0,c.default)(this,a),e=t.apply(this,arguments),e.handleValues=function(){e.props.form.validateFields(function(t,a){t||(Object.keys(a).map(function(e){a[e]&&a[e].format&&(a[e]=a[e].format("YYYY-MM-DD HH:mm:ss"))}),e.props.search(a))})},e.reset=function(){e.props.form.resetFields(),e.props.search()},e}return(0,f.default)(a,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.statuses,n=e.userTypeMap,r=void 0===n?{}:n,c=p.default.Option,f=Object.keys(a).map(function(e){return y.default.createElement(c,{key:e,value:e},a[e])}),m=Object.keys(r).map(function(e){return y.default.createElement(c,{key:e,value:e},r[e])});return y.default.createElement(u.default,{autoComplete:"off",className:b.default["search-wraper"]},y.default.createElement(d.default,{className:"operation-bar ".concat(b.default.operations),gutter:10,type:"flex"},y.default.createElement(s.default,{span:20},y.default.createElement(d.default,{className:b.default.row},y.default.createElement("div",{className:b.default.operation},t("user_id")(y.default.createElement(i.default,{placeholder:(0,E.formatMessage)({id:"app.apply.account"}),onPressEnter:this.handleValues}))),y.default.createElement("div",{className:b.default.operation},t("nick_id")(y.default.createElement(i.default,{placeholder:(0,E.formatMessage)({id:"app.apply.nick_id"}),onPressEnter:this.handleValues}))),y.default.createElement("div",{className:b.default.operation},t("nickname")(y.default.createElement(i.default,{placeholder:(0,E.formatMessage)({id:"app.apply.nickname"}),onPressEnter:this.handleValues}))),y.default.createElement("div",{className:b.default.operation},t("type")(y.default.createElement(p.default,{placeholder:"\u7528\u6237\u7c7b\u578b"},m))),y.default.createElement("div",{className:b.default.operation},t("status")(y.default.createElement(p.default,{placeholder:(0,E.formatMessage)({id:"app.scene.tools.search.status"})},y.default.createElement(c,{value:"",className:b.default.all},(0,E.formatMessage)({id:"app.scene.tools.search.allstatus"})),f))),y.default.createElement(u.default.Item,{className:"".concat(b.default.row," ").concat(b.default.range),label:(0,E.formatMessage)({id:"app.apply.search.date"})},y.default.createElement(u.default.Item,{style:{display:"inline-block",marginBottom:0,width:"calc(50% - 12px)"}},t("begin_time")(y.default.createElement(o.default,null))),y.default.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},"-"),y.default.createElement(u.default.Item,{style:{display:"inline-block",marginBottom:0,width:"calc(50% - 12px)"}},t("end_time")(y.default.createElement(o.default,null)))))),y.default.createElement(s.default,{span:4,className:b.default.row},y.default.createElement("div",{className:b.default["operation-btn"]},y.default.createElement(l.default,{type:"primary",icon:"search",onClick:this.handleValues},(0,E.formatMessage)({id:"app.scene.tools.search.btn"}))),y.default.createElement("div",{className:b.default["operation-btn"]},y.default.createElement(l.default,{type:"primary",onClick:this.reset},(0,E.formatMessage)({id:"app.scene.tools.search.reset"}))))))}}]),a}(y.PureComponent);R=M([u.default.create(),(0,v.connect)(function(e){var t=e.apply.userTypeMap;return{userTypeMap:t}})],R);var S=R;t.default=S},jlKE:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=n(a("kLXV"));a("IzEo");var o=n(a("bx4M"));a("14J3");var i=n(a("BMrR"));a("jCWc");var s=n(a("kPKH"));a("DZo9");var d=n(a("8z0m"));a("+L6B");var u=n(a("2/Rp"));a("Pwec");var p=n(a("CtXQ"));a("iQDF");var c=n(a("+eQT"));a("5NDa");var f=n(a("5rEg")),m=n(a("jehZ")),g=(n(a("d6i3")),n(a("gWZ8"))),h=(n(a("1l/V")),n(a("p0pE"))),y=n(a("2Taf")),v=n(a("vZ4D")),E=n(a("rlhR")),b=n(a("MhPg")),w=n(a("l4Ni")),_=n(a("ujKo"));a("y8nQ");var M=n(a("Vl3Y"));a("OaEy");var R=n(a("2fM7")),S=r(a("q1tI")),k=a("MuoO");n(a("wyMu"));a("YQfW");var N,O,C,x,j=n(a("wd/R")),F=n(a("Wwog")),P=n(a("Y+p1")),D=n(a("mwIZ")),L=a("LLXN"),V=n(a("UbMB")),I=n(a("5n6h")),A=n(a("orAa")),T=n(a("U+aE")),z=(n(a("AO/7")),a("ukBx"));function U(e){return function(){var t,a=(0,_.default)(e);if(X()){var n=(0,_.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,w.default)(this,t)}}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var q=a("xDdU"),B=V.default.bind(I.default),J=R.default.Option,Y=(N=(0,k.connect)(function(e){var t=e.apply.chatTagsMap;return{chatTagsMap:t}}),O=M.default.create(),N(C=O((x=function(e){(0,b.default)(a,e);var t=U(a);function a(e){var n;return(0,y.default)(this,a),n=t.call(this,e),n.state={formItemLayout:{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},matterList:new Map,audio:[],tag_id:""},n.handleOk=function(){var e=n.props,t=e.form,a=(t.validateFields,t.getFieldsValue,t.getFieldValue,t.resetFields,e.dispatch,e.close),r=e.record,l=n.state,o=l.audio,i=l.score;(0,z.recommendModify)((0,h.default)({},r,{chat_tags:"[{}]"==JSON.stringify(o)?"[]":JSON.stringify(o),recommend_score:i})).then(function(){a()})},n.handleCancel=function(){var e=n.props.close;e()},n.normFile=function(e){return Array.isArray(e)?e:e&&Array.isArray(e.fileList)?"removed"===e.file.status?[]:(n.setState({avatar:window.URL.createObjectURL(e.file.originFileObj)}),e.fileList.slice(-1)):e&&e.fileList},n.preview=function(e){if(e.url)return n.setState({avatar:e.url});n.setState({avatar:window.URL.createObjectURL(e.originFileObj)})},n.crop=function(){var e=n.cropper.current;if(e){var t=n.props.form,a=t.getFieldValue,r=t.setFieldsValue,l=a("avatar");Array.isArray(l)&&(l=l[0]);var o=l.name;e.getCroppedCanvas().toBlob(function(e){console.info("avatarFile__",{avatarFile:l,fileName:o,blobType:e.type,blob:e}),l.type=e.type,l.size=e.size;var t=new File([e],o,{type:e.type});l.originFileObj=t,l.thumbUrl=window.URL.createObjectURL(t),l.url="",l.uid=q(),l.status="new",r({avatar:[l]}),n.setState({avatar:""})})}},n.cancelCrop=function(){n.setState({avatar:""})},n.renderFieldName=function(){(0,E.default)(n);return(0,F.default)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(arguments.length>2&&arguments[2],arguments.length>3&&arguments[3],arguments.length>4&&arguments[4],n.props),r=a.form,l=r.getFieldDecorator,o=(r.setFieldsValue,a.cates,a.id,a.list,n.state),i=(o.fields,o.formItemLayout);"user_interests"==e.name&&t&&t.user_interests&&(e.options.initialValue=t.user_interests.split(",").map(function(e){return+e})),"user_tags"==e.name&&t&&t.user_tags&&(e.options.initialValue=t.user_tags.split(",").map(function(e){return+e})),t&&e.name in t&&"user_interests"!=e.name&&"user_tags"!=e.name&&("upload"===e.type?t[e.name]&&(e.options.initialValue=[{url:t[e.name],name:"".concat(t.nickname,".png"),uid:q()}]):"date"===e.type?e.options.initialValue=(0,j.default)(t[e.name],"DD/MM/YYYY"):"nation"===e.name?e.options.initialValue=+t[e.name]:e.options.initialValue=t[e.name]);var s=e.name,h=e.options,y=e.input_type,v=e.placeholder,E=e.label,b=e.type,w=(e.initialValue,e.properties),_=void 0===w?{}:w,k=S.default.createElement(f.default,(0,m.default)({type:y},_)),N=e.optionList;if("string"===typeof N&&(N=n.props[N]||[]),"textarea"===b){var O=f.default.TextArea;k=S.default.createElement(O,_)}if("date"===b&&(k=S.default.createElement(c.default,{className:B("date"),disabledDate:function(e){return e>=new Date}})),"select"===b){var C=R.default.Option,x=(0,g.default)(N).map(function(e){return S.default.createElement(C,{key:e[0],value:e[0]},e[1])});k=S.default.createElement(R.default,_,x)}return"upload"===b&&(h.getValueFromEvent=n.normFile,_.onPreview=n.preview,_.customRequest=function(e){e.file;var t=e.onSuccess;setTimeout(function(){t("ok")},0)},k=S.default.createElement(d.default,_,S.default.createElement(u.default,null,S.default.createElement(p.default,{type:"cloud-upload"})," ",v))),S.default.createElement(M.default.Item,(0,m.default)({key:s},i,{label:E}),l(s,h)(k))},P.default)},n.getMediaMatter=function(e){n.setState(function(t){var a=t.matterList;return a.set(+new Date,e),{matterList:a}})},n.getMediaMatterAudio=function(e){console.log(e,"matter"),n.setState(function(t){var a=t.audio;return{audio:[(0,h.default)({},a[0],e)]}})},n.cropper=S.default.createRef(),n}return(0,v.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.record;if(e&&e.chat_tags){var t=JSON.parse(e.chat_tags).length?JSON.parse(e.chat_tags):[{}];this.setState({audio:t,tag_id:t[0].tag_id})}e&&e.recommend_score&&this.setState({score:e.recommend_score})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.account,t.visible,t.form),n=(a.getFieldDecorator,a.getFieldValue),r=a.getFieldError,d=(t.loading,t.record),u=t.chatTagsMap,p=this.handleOk,c=this.handleCancel,f=(this.renderFields,this.renderField,this.state),y=f.fields,v=void 0===y?[]:y,E=(f.formItemLayout,f.avatar,f.matterList,d?(0,L.formatMessage)({id:"app.virtual.accounts.edit"}):(0,L.formatMessage)({id:"app.virtual.accounts.add"})),b=(v.map(function(t){var a="renderField_".concat(t.name),l=e[a];l||(l=e[a]=e.renderFieldName(t.name));var o,i=r(t.name),s=n(t.name);return"user_interests"===t.name||"user_tags"===t.name||Array.isArray(n(t.name))&&(s=(0,D.default)(n(t.name)[0],"status")),l(t,d,s,i,o)}),{width:"25%",textAlign:"center",boxShadow:"none",padding:"5px"});return S.default.createElement(S.Fragment,null,S.default.createElement(l.default,{title:E,visible:!0,onOk:function(){p()},onCancel:function(){c()}},S.default.createElement(i.default,null,S.default.createElement(s.default,{span:5},S.default.createElement("p",{className:B("lab")},"\u573a\u666f\u5316\u6807\u7b7e",":")),S.default.createElement(s.default,{span:19},S.default.createElement(R.default,(0,m.default)({style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u573a\u666f\u5316\u6807\u7b7e"},this.state.tag_id?{value:this.state.tag_id}:{},{onChange:function(t){e.setState(function(e){var a=e.audio;return{tag_id:t,audio:[(0,h.default)({},a[0],{tag_id:t})]}})}}),!!u&&u.map(function(e,t){return S.default.createElement(J,{value:e.id,key:t},e.name)})))),S.default.createElement(i.default,null,S.default.createElement(s.default,{span:5},S.default.createElement("p",{className:B("lab")},"\u4e0a\u4f20\u97f3\u9891",":")),S.default.createElement(s.default,{span:19},S.default.createElement(o.default,{bordered:!1},!!this.state.audio.length&&Object.keys(this.state.audio[0]).length>1&&S.default.createElement(o.default.Grid,{style:b},S.default.createElement(T.default,this.state.audio[0])),S.default.createElement(o.default.Grid,{style:b},S.default.createElement(A.default,{callback:this.getMediaMatterAudio}))))),S.default.createElement(i.default,null,S.default.createElement(s.default,{span:5},S.default.createElement("p",{className:B("lab")},(0,L.formatMessage)({id:"app.apply.pass.label"}),":")),S.default.createElement(s.default,{span:19},S.default.createElement(R.default,(0,m.default)({style:{width:200},placeholder:(0,L.formatMessage)({id:"app.apply.pass.placeholder"})},this.state.score?{value:this.state.score}:{},{onChange:function(t){e.setState({score:t})}}),(0,g.default)(new Array(10)).map(function(e,t){return S.default.createElement(J,{key:t,value:t},t)}))))))}}]),a}(S.default.Component),C=x))||C)||C);t.default=Y},lIWg:function(e,t,a){e.exports={operation:"antd-pro-pages-operation-apply-components-operation-bar-operation","operation-btn":"antd-pro-pages-operation-apply-components-operation-bar-operation-btn","search-wraper":"antd-pro-pages-operation-apply-components-operation-bar-search-wraper","search-btn":"antd-pro-pages-operation-apply-components-operation-bar-search-btn",all:"antd-pro-pages-operation-apply-components-operation-bar-all",offline:"antd-pro-pages-operation-apply-components-operation-bar-offline",row:"antd-pro-pages-operation-apply-components-operation-bar-row",pullright:"antd-pro-pages-operation-apply-components-operation-bar-pullright",range:"antd-pro-pages-operation-apply-components-operation-bar-range"}},wNvD:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("2Taf")),o=r(a("vZ4D")),i=r(a("MhPg")),s=r(a("l4Ni")),d=r(a("ujKo")),u=n(a("q1tI")),p=r(a("UbMB")),c=r(a("1C9R"));function f(e){return function(){var t,a=(0,d.default)(e);if(m()){var n=(0,d.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,s.default)(this,t)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var g=p.default.bind(c.default),h=function(e){(0,i.default)(a,e);var t=f(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.url,a=e.visible,n=e.hide;return console.info("Preview__",{url:t,visible:a,hide:n}),u.default.createElement("div",{className:g("wraper",{hide:!a})},u.default.createElement("div",{className:c.default.mask,onClick:n}),u.default.createElement("video",{className:c.default.content,controls:!0,src:t}))}}]),a}(u.PureComponent),y=h;t.default=y}}]);