(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[54],{"7Qop":function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=i,t.templateStatusSet=d,t.templateDelete=s,t.templateAdd=c,t.templateModify=p,t.ruleTypeMap=l,t.getGiftMap=f,t.getAutoSendToolInfo=m,t.uploadMultiMedia=h,t.messageTypeMap=w,t.conditionKeyMap=y,t.subConditionKeyMap=b,t.getNoRootRules=v,t.sendTypeMap=M,t.commonStatusMap=x;var r=a(n("d6i3")),u=a(n("t3Un")),o=function(e,t,n,a){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,u){function o(e){try{d(a.next(e))}catch(e){u(e)}}function i(e){try{d(a["throw"](e))}catch(e){u(e)}}function d(e){e.done?n(e.value):r(e.value).then(o,i)}d((a=a.apply(e,t||[])).next())})};function i(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/templateList",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function d(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/templateStatusSet",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}));case 1:case"end":return t.stop()}},t)}))}function s(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/templateDelete",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}));case 1:case"end":return t.stop()}},t)}))}function c(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/templateAdd",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}));case 1:case"end":return t.stop()}},t)}))}function p(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/templateModify",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}));case 1:case"end":return t.stop()}},t)}))}function l(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/ruleTypeMap",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function f(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/getGiftMap",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function m(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/getAutoSendToolInfo",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function h(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/upload/uploadMultiMedia",{method:"POST",body:e}));case 1:case"end":return t.stop()}},t)}))}function w(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/messageTypeMap",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function y(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/conditionKeyMap",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function b(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/subConditionKeyMap",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function v(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/getNoRootRules",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function M(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/sendTypeMap",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}function x(e){return o(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.default)("/admin/robot/commonStatusMap",{method:"GET",body:e}));case 1:case"end":return t.stop()}},t)}))}},Q0y1:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("d6i3")),u=n("7Qop"),o={namespace:"virtualApply",state:{filter:{page:1,page_size:20,total:0},list:[],sendTypeMap:{},commonStatusMap:{},ruleTypeMap:{},giftMap:[],messageTypeMap:{},conditionKeyMap:[],subConditionKeyMap:[],noRootRules:[],autoSendToolInfo:[]},reducers:{update:function(e,t){var n=t.payload;return Object.assign(Object.assign({},e),n)},filter:function(e,t){var n=t.payload,a=n.filter;return Object.assign(Object.assign({},e),{filter:Object.assign(Object.assign({},e.filter),a)})}},effects:{fetch:r.default.mark(function e(t,n){var a,o,i,d,s,c,p;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.payload,a=n.call,o=n.put,i=n.select,e.next=4,i(function(e){return e.virtualApply.filter});case 4:return d=e.sent,e.next=7,a(u.fetch,d);case 7:return s=e.sent,c=s.code,p=s.data,e.next=11,o({type:"update",payload:{list:c?[]:p.list}});case 11:return e.next=13,o({type:"filter",payload:{filter:{total:p.total_count}}});case 13:case"end":return e.stop()}},e)}),add:r.default.mark(function e(t,n){var a,o,i,d,s;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,i=n.put,e.next=4,o(u.templateAdd,Object.assign({},a));case 4:if(d=e.sent,s=d.code,s){e.next=9;break}return e.next=9,i({type:"fetch"});case 9:return e.abrupt("return",new Promise(function(e){e(d)}));case 10:case"end":return e.stop()}},e)}),del:r.default.mark(function e(t,n){var a,o,i,d,s;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,i=n.put,e.next=4,o(u.templateDelete,Object.assign({},a));case 4:if(d=e.sent,s=d.code,s){e.next=9;break}return e.next=9,i({type:"fetch"});case 9:return e.abrupt("return",new Promise(function(e){e(d)}));case 10:case"end":return e.stop()}},e)}),modify:r.default.mark(function e(t,n){var a,o,i,d,s;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,i=n.put,e.next=4,o(u.templateModify,Object.assign({},a));case 4:if(d=e.sent,s=d.code,s){e.next=9;break}return e.next=9,i({type:"fetch"});case 9:return e.abrupt("return",new Promise(function(e){e(d)}));case 10:case"end":return e.stop()}},e)}),SetStatus:r.default.mark(function e(t,n){var a,o,i,d,s;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,i=n.put,e.next=4,o(u.templateStatusSet,Object.assign({},a));case 4:if(d=e.sent,s=d.code,s){e.next=9;break}return e.next=9,i({type:"fetch"});case 9:return e.abrupt("return",new Promise(function(e){e(d)}));case 10:case"end":return e.stop()}},e)}),uploadMedia:r.default.mark(function e(t,n){var a,o,i,d;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,n.put,i=new FormData,i.append("multiMedia",a.multiMedia),e.next=6,o(u.uploadMultiMedia,i);case 6:return d=e.sent,e.abrupt("return",new Promise(function(e){e(d)}));case 8:case"end":return e.stop()}},e)}),getEnum:r.default.mark(function e(t,n){var a,o,i;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n.call,a=n.put,function(e){e[e["subConditionKeyMap"]=0]="subConditionKeyMap",e[e["conditionKeyMap"]=1]="conditionKeyMap",e[e["messageTypeMap"]=2]="messageTypeMap",e[e["giftMap"]=3]="giftMap",e[e["ruleTypeMap"]=4]="ruleTypeMap",e[e["commonStatusMap"]=5]="commonStatusMap",e[e["sendTypeMap"]=6]="sendTypeMap",e[e["autoSendToolInfo"]=7]="autoSendToolInfo",e[e["noRootRules"]=8]="noRootRules"}(o||(o={})),e.next=5,Promise.all([(0,u.subConditionKeyMap)(),(0,u.conditionKeyMap)(),(0,u.messageTypeMap)(),(0,u.getGiftMap)(),(0,u.ruleTypeMap)(),(0,u.commonStatusMap)(),(0,u.sendTypeMap)(),(0,u.getAutoSendToolInfo)(),(0,u.getNoRootRules)()]).then(function(e){var t={sendTypeMap:{},commonStatusMap:{},ruleTypeMap:{},giftMap:[],messageTypeMap:{},conditionKeyMap:[],subConditionKeyMap:[],autoSendToolInfo:[],noRootRules:[]};return e.map(function(e,n){0===+e.code&&("messageTypeMap"===o[n]?t[o[n]]=Object.assign(Object.assign({},e.data),{7:"\u6dfb\u52a0\u597d\u53cb"}):t[o[n]]=e.data)}),new Promise(function(e,n){e(t)})});case 5:return i=e.sent,e.next=8,a({type:"update",payload:i});case 8:case"end":return e.stop()}},e)})},subscriptions:{setup:function(e){var t=e.history,n=e.dispatch;t.listen(function(e){var t=e.pathname;t.indexOf("va_reply")>-1&&(n({type:"fetch"}),n({type:"getEnum"}))})}}};t.default=o}}]);