(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"6gDs":function(e,t,a){"use strict";var l=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("+L6B");var d=l(a("2/Rp"));a("IzEo");var u=l(a("bx4M"));a("sPJy");var c=l(a("bE4q"));a("i5XK");var s=l(a("jq9l"));a("P2fV");var i=l(a("NJEC"));a("/zsF");var f=l(a("PArb"));a("14J3");var o=l(a("BMrR"));a("jCWc");var m=l(a("kPKH"));a("Pwec");var p=l(a("CtXQ")),g=l(a("d6i3")),y=l(a("1l/V"));a("miYZ");var v=l(a("tsqr")),k=l(a("2Taf")),E=l(a("vZ4D")),b=l(a("rlhR")),h=l(a("MhPg")),M=l(a("l4Ni")),C=l(a("ujKo"));a("y8nQ");var w=l(a("Vl3Y"));a("OaEy");var x=l(a("2fM7"));a("5NDa");var _=l(a("5rEg"));a("B9cy");var L=l(a("Ol7k"));a("iQDF");var D,R,N,I,S=l(a("+eQT")),G=a("+n12"),P=a("tQjW"),j=a("MuoO"),B=l(a("wY1l")),A=r(a("q1tI")),H=a("LLXN"),O=l(a("LvDl")),z=(a("fPeI"),l(a("shAx")));function T(e){return function(){var t,a=(0,C.default)(e);if(F()){var l=(0,C.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,M.default)(this,t)}}function F(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}S.default.RangePicker,a("wd/R"),L.default.Sider,L.default.Content;var J=_.default.TextArea;_.default.Search,x.default.Option;var V=(D=(0,j.connect)(function(e){var t=e.customer,a=t.feedbackData,l=t.category,r=t.statusList,n=t.customer.customer_list,d=e.routing.location.pathname,u=e.memberInfo.data.keys;return{feedbackData:a,keys:u,pathname:d,category:l,statusList:r,customer_list:n}}),R=w.default.create(),D(N=R((I=function(e){(0,h.default)(a,e);var t=T(a);function a(e){var l;return(0,k.default)(this,a),l=t.call(this,e),l.replySubmit=function(e){var t=l.state.reply_content;if(!t.trim())return l.clickReply(),void v.default.error("".concat((0,H.formatMessage)({id:"app.feedback.pleaseReply"})));(0,P.reply)({ids:l.props.feedbackData.id+"",status:2,reply_content:t}).then(function(e){e&&!e.code&&l.updataConfiList()})},l.rejectHandel=function(){(0,P.reply)({ids:l.props.feedbackData.id+"",status:3}).then(function(e){e&&!e.code&&l.updataConfiList()})},l.handleCancel=function(){l.setState({imgModel:!1})},l.imgshow=function(e){var t=l.props.feedbackData;l.setState({currImg:t.pic_url[e],imgModel:!0})},l.clickReply=function(){document.getElementsByTagName("textarea")[0].focus()},l.changeContent=function(e){var t=e.target.value;l.setState({reply_content:t},function(){console.log(l.state.reply_content)})},l.state={imgModel:!1,currImg:"",isCommit:!0,inputOnFocus:"",reply_content:""},O.default.bindAll((0,b.default)(l),["updataConfiList"]),l}return(0,E.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.getEnumList().then(function(){e.updataConfiList()})}},{key:"getEnumList",value:function(){var e=(0,y.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,function(){t({type:"permission/getRoleList"})}();case 3:return e.next=5,function(){t({type:"permission/getMemberStatusList"})}();case 5:t({type:"customer/getCategory"}),t({type:"customer/getAllVersion"}),t({type:"customer/getFeedbackStatusList"}),t({type:"customer/getCustomer"});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updataConfiList",value:function(){var e=this.props.dispatch,t=this.props.computedMatch.params;e({type:"customer/getOneFeedback",payload:t})}},{key:"render",value:function(){var e,t=this,a=this.props,l=a.feedbackData,r=(a.roleList,a.statusList,a.keys,a.pathname,a.category,a.version,a.customer_list,a.form.getFieldDecorator,this.state.isCommit,{width:"25%",textAlign:"left"}),g={background:"#4fbcff",width:"60px",height:"60px",color:"#fff",borderRadius:"50%",lineHeight:"60px",textAlign:"center"},y=function(){return l.nickname?A.default.createElement("div",{style:g},l.nickname.slice(0,1)):A.default.createElement("div",{style:g},A.default.createElement(p.default,{style:{fontSize:"24px",lineHeight:"60px",color:"#fff"},type:"user"}))},v=function(){return l.operater_nickname?A.default.createElement("div",{style:g},l.operater_nickname.slice(0,1)):A.default.createElement("div",{style:g},A.default.createElement(p.default,{style:{fontSize:"24px",lineHeight:"60px",color:"#fff"},type:"user"}))},k=function(e){if("array"!==(0,G.type)(e.listImage))return A.default.createElement("span",null);var a=e.listImage.map(function(e,a){return A.default.createElement(m.default,{key:a,span:8},A.default.createElement("img",{onClick:function(e){t.imgshow(a)},style:{width:"120px",cursor:"pointer"},key:a,src:e}))});return A.default.createElement(o.default,{gutter:16,style:{width:"400px"}},a)};e=1==l.status?[A.default.createElement("span",null,(0,H.formatMessage)({id:"app.feedback.solve"})),A.default.createElement("span",{onClick:this.clickReply,className:z.default.greenHuifu}," ",A.default.createElement(f.default,{type:"vertical"}),(0,H.formatMessage)({id:"app.feedback.reply"})),A.default.createElement("span",null,A.default.createElement(f.default,{type:"vertical"}),A.default.createElement(i.default,{title:(0,H.formatMessage)({id:"app.feedback.makesureREJECT"}),onConfirm:function(){return t.rejectHandel()}},A.default.createElement("a",{href:"#",className:z.default.dengerColor},(0,H.formatMessage)({id:"app.feedback.reject"}))))]:2==l.status?[A.default.createElement("span",{className:z.default.greenHuifu},(0,H.formatMessage)({id:"app.feedback.solved"}))]:[A.default.createElement("span",{className:z.default.redBohui},(0,H.formatMessage)({id:"app.feedback.rejected"}))];var E=function(t){var a=t.children;return A.default.createElement(s.default,{actions:e,author:A.default.createElement("a",null,l.nickname),avatar:A.default.createElement(y,null),content:A.default.createElement("div",null,A.default.createElement("p",null,l.content),A.default.createElement(k,{listImage:l.pic_url||[]}))},a)};return A.default.createElement("div",null,A.default.createElement("style",null,"\n            .web .ant-modal-content {\n                  position: relative;\n                  background-color: #000 !important;\n                  border: 0;\n                  border-radius: 4px;\n                  background-clip: padding-box;\n                  box-shadow: 0 0 0 rgba(0, 0, 0, 0) !important;\n                }\n            .web .ant-modal-body {\n              padding: 0 !important;\n              font-size: 0 !important;\n              line-height: 1 !important;\n            }\n            "),A.default.createElement("div",{className:z.default.breadcrumbBox},A.default.createElement(c.default,{style:{borderBottom:" 1px solid #ccc",paddingBottom:" 10px"}},A.default.createElement(c.default.Item,null,A.default.createElement(p.default,{type:"lock"}),A.default.createElement("span",null,(0,H.formatMessage)({id:"menu.feedback"}))),A.default.createElement(c.default.Item,null,A.default.createElement(B.default,{to:"/feedback/customer"},(0,H.formatMessage)({id:"menu.feedback.customer"}))),A.default.createElement(c.default.Item,null,(0,H.formatMessage)({id:"app.feedback.feeddetail"})))),A.default.createElement("div",{className:z.default.addBtn},A.default.createElement(u.default,{title:(0,H.formatMessage)({id:"app.feedback.feeddetail"}),className:"styles-card",bordered:!0},A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.nickname"}),":",l.nickname),A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.feedbackID"}),":",l.user_id),A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.phone"}),":",l.tell),A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.phonetype"}),":",l.device_brand," ",l.device_version),l.lat&&A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.zone"}),":",l.device_ip," lat:",l.lat," lon:",l.lon),!l.lat&&A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.zone"}),":",l.device_ip),A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.networkstatus"}),":",l.network),A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.os"}),":",l.OSVersion),A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.appversions"}),":",l.version),A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.issueCategory"}),":",l.category_data&&l.category_data.name||""),A.default.createElement(u.default.Grid,{style:r},(0,H.formatMessage)({id:"app.feedback.resolveDate"}),":",l.update_time))),A.default.createElement(u.default,{bordered:!0},A.default.createElement(E,null,2==l.status&&A.default.createElement(s.default,{author:A.default.createElement("a",null,l.operater_nickname),avatar:A.default.createElement(v,null),content:A.default.createElement("div",null,A.default.createElement("p",null,l.reply_content))}))),!(1!=l.status)&&A.default.createElement(u.default,{title:(0,H.formatMessage)({id:"app.feedback.reply"}),style:{borderTop:0}},A.default.createElement(J,{rows:4,onChange:this.changeContent}),A.default.createElement(d.default,{type:"primary",style:{marginTop:"10px",float:"right"},onClick:this.replySubmit},(0,H.formatMessage)({id:"app.feedback.reply"}))),A.default.createElement(n.default,{title:null,visible:this.state.imgModel,onCancel:this.handleCancel,footer:null,closable:!1,centered:!0,maskClosable:!0,wrapClassName:"web"},A.default.createElement("div",{className:"outer-iframe"},A.default.createElement("div",{className:"d-iframe"},A.default.createElement("img",{src:this.state.currImg})))))}}]),a}(A.PureComponent),N=I))||N)||N),q=V;t.default=q}}]);