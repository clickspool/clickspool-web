(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{ArtE:function(e,t,a){},NhZI:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=n(a("kLXV"));a("giR+");var l=n(a("fyUT"));a("T2oS");var r=n(a("W9HT"));a("BoS7");var s=n(a("Sdc0")),d=n(a("jehZ"));a("14J3");var u=n(a("BMrR"));a("jCWc");var o=n(a("kPKH"));a("Pwec");var c=n(a("CtXQ")),f=n(a("d6i3"));a("miYZ");var p=n(a("tsqr")),m=n(a("1l/V")),g=n(a("eHn4")),h=n(a("p0pE")),v=n(a("2Taf")),y=n(a("vZ4D")),_=n(a("MhPg")),E=n(a("l4Ni")),b=n(a("ujKo"));a("7Kak");var M=n(a("9yH6"));a("iQDF");var k=n(a("+eQT"));a("OaEy");var x=n(a("2fM7"));a("5NDa");var C=n(a("5rEg"));a("y8nQ");var w=n(a("Vl3Y")),L=a("Ljbz"),S=a("qEDA"),I=(a("QFSr"),n(a("HejF")),a("34ay")),D=a("MuoO"),T=n(a("q1tI")),N=a("LLXN"),O=n(a("xkpq"));a("ArtE");var P,Y,H,B,j=a("+n12"),z=n(a("LvDl"));a("17x9");function q(e){return function(){var t,a=(0,b.default)(e);if(R()){var n=(0,b.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,E.default)(this,t)}}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var V=a("wd/R"),A=w.default.Item,F=(C.default.TextArea,x.default.Option),Q=k.default.RangePicker,U=(M.default.Group,C.default.Search,P=w.default.create(),Y=(0,D.connect)(function(e){var t=e.activity,a=t.data.list,n=t.lineList,i=t.statusList,l=t.materialCateList;return{list:a,statusList:i,lineList:n,materialCateList:l}}),P(H=Y((B=function(e){(0,_.default)(a,e);var t=q(a);function a(){var e;(0,v.default)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),e.state={isShowPushTime:!1,contentTitle:"",contentTime:"",fileImage:"",showDelIcon:!1,image:"",noImageTip:"",imageStatus:"success",confirmLoading:!1,modifyList:{},languageList:[],multi_lan_info:new Map,list_map:{},single_lan_info:{},default_list_checked:0,spinning:!1},e.withinTen=function(e,t,a){t&&t.length>30?a((0,N.formatMessage)({id:"app.activity.withinten"})):a()},e.withinOneHundred=function(e,t,a){t&&t.length>100?a((0,N.formatMessage)({id:"app.activity.withinOneHundred"})):a()},e.handleSubmit=function(e){return e.id||0==e.id?(0,S.modifyMaterial)(e):(0,S.addMaterial)(e)},e.handleChange=function(t){var a=e.state,n=a.multi_lan_info,i=a.default_list_checked,l=a.single_lan_info,r=t.target.files[0];e.setState({spinning:!0}),e.imageUploadCallBack(r).then(function(t){e.setState({spinning:!1}),t.data.code||(n.set(i,(0,h.default)({},l,{image:t.data.url})),e.setState({single_lan_info:(0,h.default)({},l,{image:t.data.url}),multi_lan_info:n}))})},e.handleShowDelIcon=function(t){e.setState({showDelIcon:!t})},e.delImage=function(){var t=e.state,a=t.single_lan_info,n=t.multi_lan_info,i=t.default_list_checked;n.set(i,(0,h.default)({},a,{image:""})),e.setState({single_lan_info:(0,h.default)({},a,{image:""}),multi_lan_info:n})},e.onChangeNum=function(t){var a=e.state.modifyList;a.line_percent=parseInt(t),e.setState({modifyList:a})},e.onCancel=function(){var t=e.props.onCallBack;t()},e.imageUploadCallBack=function(e){var t=new FormData;return t.append("uploadImage",e),(0,S.uploadImage)(t)},e.componentDidMount=function(){var t=e.props,a=t.modifyId,n=t.list;if(e.getLanguageList(),a){var i=n.filter(function(e){if(e.id==a)return e}),l=i[0].multi_lan_info?JSON.parse(i[0].multi_lan_info):[],r=new Map,s={};l.map(function(e){r.set(e.lan,e),0==e.lan&&(s=e)}),e.setState({modifyList:i[0],multi_lan_info:r,single_lan_info:s})}},e.getLanguageList=function(){(0,L.getLanguageList)({token:(0,I.getAuthority)()}).then(function(t){if(!t.code){var a={},n=0;t.data.map(function(e){if("en"==e.key)return a[e.value]=!0,void(n=e.value);a[e.value]=!1}),e.setState({default_list_checked:n,list_map:a,languageList:t.data})}})},e.onChangeLanInfo=function(t){var a=e.state,n=a.multi_lan_info,i=a.list_map,l=a.default_list_checked,r=a.single_lan_info;Object.keys(i).map(function(e){i[e]=!1}),n.set(l,r),e.setState({list_map:(0,h.default)({},i,(0,g.default)({},t,!0)),multi_lan_info:n,single_lan_info:n.get(t)||{},default_list_checked:t})},e.onSwitch=function(t){var a=e.state.single_lan_info;e.setState({single_lan_info:(0,h.default)({},a,{checked:t})})},e.onChangeContent=function(t){var a=e.state.single_lan_info;console.log(t.target.value,"ev.target.value"),e.setState({single_lan_info:(0,h.default)({},a,(0,g.default)({},t.target.name,t.target.value))})},e}return(0,y.default)(a,[{key:"onOk",value:function(){var e=(0,m.default)(f.default.mark(function e(){var t,a,n,i,l,r,s,d,u,o,c,m,g=this;return f.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,a=this.props,n=a.form,i=a.onCallBack,l=this.state,r=l.single_lan_info,s=l.multi_lan_info,d=l.default_list_checked,u=l.languageList,o=this.state,o.fileImage,c=o.image,m=o.modifyList,o.imageStatus,s.set(d,(0,h.default)({},r)),e.next=7,this.setState({multi_lan_info:s});case 7:n.validateFields(function(e,a){if(!e){var n=[],l=!0;if(t.state.multi_lan_info.forEach(function(e,t){e.title&&e.desc&&e.image?n.push((0,h.default)({},e,{lan:t,lan_name:u.filter(function(e){return e.value==t})[0]["name"]})):!(0,j.isEmptyObject)(e)&&l&&(l=!1)}),!l)return p.default.error((0,N.formatMessage)({id:"app.activity.nofill"}));var r={image:c,begin_time:a.rangeTimePicker&&a.rangeTimePicker[0]?V(a.rangeTimePicker[0]).format("YYYY-MM-DD HH:mm:ss"):"",end_time:a.rangeTimePicker&&a.rangeTimePicker[0]?V(a.rangeTimePicker[1]).format("YYYY-MM-DD HH:mm:ss"):""};a.rangeTimePicker=null,a.img=null,a.line_name=null,a.create_time=null,a.update_time=null,a.status_name=null,a.line_percent=a.line_percent?parseInt(a.line_percent.split("%")[0])>100?"100":a.line_percent.split("%")[0]:m.line_percent?m.line_percent:"0";var s=z.default.merge({},m,a,r);s.multi_lan_info=JSON.stringify(n),g.handleSubmit(s).then(function(e){e.code?(p.default.warn(e.message),g.setState({confirmLoading:!1})):(p.default.success(e.message),i(1))}).catch(function(e){p.default.error(e),this.setState({confirmLoading:!1})})}});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=T.default.createElement("div",{className:"upload__"},T.default.createElement("input",{type:"file",onChange:this.handleChange}),T.default.createElement(c.default,{type:"plus"}),T.default.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20")),a={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},n={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:12}}},f=this.state,p=(f.isShowPushTime,f.contentTitle,f.contentTime,f.single_lan_info),m=p.image,g=p.title,h=p.desc,v=p.checked,y=(f.noImageTip,f.imageStatus,f.modifyList),_=f.confirmLoading,E=f.languageList,b=f.list_map,M=this.props.materialCateList,k=this.props,L=k.form.getFieldDecorator,S=(k.list,k.statusList),I=k.lineList,D=k.modifyId,P=y.begin_time&&y.end_time?{initialValue:[V(y.begin_time),V(y.end_time)],rules:[{type:"array",required:!0,message:(0,N.formatMessage)({id:"app.glob.pleaseInputTime"})}]}:{rules:[{type:"array",required:!0,message:(0,N.formatMessage)({id:"app.glob.pleaseInputTime"})}]},Y=function(e){return T.default.createElement(u.default,{style:{marginBottom:"24px"}},T.default.createElement(o.default,{span:4},T.default.createElement("p",{className:e.label?O.default["lan-wrap-label"]:""},e.label||"")),T.default.createElement(o.default,{span:20},e.children))};return T.default.createElement(i.default,{title:D?(0,N.formatMessage)({id:"app.versions.edit"}):(0,N.formatMessage)({id:"app.versions.add"}),cancelText:(0,N.formatMessage)({id:"app.model.cancel"}),okText:(0,N.formatMessage)({id:"app.model.okText"}),onOk:this.onOk.bind(this),onCancel:this.onCancel,width:"1100px",visible:!0,confirmLoading:_},T.default.createElement("style",null,"\n              .upload__{\n                position:relative;\n                cursor: pointer;\n              }\n              .upload__ input[type='file']{\n                position:absolute;\n                z-index:1;\n                opacity: 0;\n                top:0;\n                left:0;\n                bottom:0;\n                right:0;\n                height:104px;\n                width:104px;\n                cursor: pointer;\n              }\n              .ant-upload-select-picture-card1 {\n                position:relative;\n                overflow:hidden;\n                display: table-cell;\n                vertical-align: middle;\n                width: 104px;\n                height: 104px;\n                margin-right: 8px;\n                margin-bottom: 8px;\n                text-align: center;\n                background-color: #fafafa;\n                border: 1px dashed #d9d9d9;\n                border-radius: 4px;\n                cursor: pointer;\n                -webkit-transition: border-color .3s ease;\n                transition: border-color .3s ease;\n              }\n              .ant-upload-select-picture-card1 img {\n                width: 104px;\n                height:auto;\n              }\n              .delete__img{\n                width: 104px;\n                height: 104px;\n                position:absolute;\n                z-index:10;\n                background:rgba(0,0,0,0.5);\n                top:0;\n                left:0;\n                transition: all .3s;\n              }\n              .ant-upload-select-picture-card1 i.anticon-delete{\n                color:#fff;\n                font-size:20px;\n                margin-top: 42px;\n                text-algin:center;\n              }\n              .ant-upload-select-picture-card1:hover{\n                border: 1px dashed #26A4FF;\n                color:#26A4FF\n              }\n              .ant-upload-select-picture-card1 i {\n                font-size: 32px;\n                color: #999;\n                margin-top:20px;\n                cursor: pointer;\n              }\n              \n              .ant-upload-select-picture-card1 .ant-upload-text {\n                color: #666;\n                line-height:16px\n\n              }\n              .width100{\n                width:100% !important;\n              }\n              .has-error .ant-upload-select-picture-card1{\n                border: 1px dashed red;\n              }\n              label[for*=\"img\"]:before {\n                display: inline-block;\n                margin-right: 4px;\n                content: '*';\n                font-family: SimSun;\n                line-height: 1;\n                font-size: 14px;\n                color: #f5222d;\n            }\n              "),T.default.createElement(w.default,null,T.default.createElement(A,(0,d.default)({},a,{label:(0,N.formatMessage)({id:"app.activity.name"})}),L("name",{initialValue:y.name||"",rules:[{required:!0,message:(0,N.formatMessage)({id:"app.activity.pname"})},{validator:this.withinTen}]})(T.default.createElement(C.default,{placeholder:(0,N.formatMessage)({id:"app.activity.pname"})}))),T.default.createElement(r.default,{tip:(0,N.formatMessage)({id:"app.activity.uploading"}),spinning:this.state.spinning},T.default.createElement(Y,null,T.default.createElement("ul",{className:O.default["tab_wrap"]},!!E.length&&E.map(function(t){return T.default.createElement("li",{onClick:e.onChangeLanInfo.bind(e,t.value),key:t.value,className:b[t.value]?O.default["checked"]:""},t.name," ")}))),T.default.createElement(u.default,{style:{marginBottom:"24px"}},T.default.createElement(o.default,{span:4},T.default.createElement("p",{className:O.default["lan-wrap-label"]},(0,N.formatMessage)({id:"app.activity.title"}))),T.default.createElement(o.default,{span:20},T.default.createElement(C.default.TextArea,{rows:2,value:g||"",name:"title",onChange:this.onChangeContent,placeholder:(0,N.formatMessage)({id:"app.activity.pdescribe"})}))),T.default.createElement(u.default,{style:{marginBottom:"24px"}},T.default.createElement(o.default,{span:4},T.default.createElement("p",{className:O.default["lan-wrap-label"]},(0,N.formatMessage)({id:"app.activity.describe"}))),T.default.createElement(o.default,{span:20},T.default.createElement(C.default.TextArea,{rows:4,value:h||"",name:"desc",onChange:this.onChangeContent,placeholder:(0,N.formatMessage)({id:"app.activity.pdescribe"})}))),T.default.createElement(Y,{label:(0,N.formatMessage)({id:"app.activity.isPublish"})},T.default.createElement(s.default,{checkedChildren:(0,N.formatMessage)({id:"app.activity.yes"}),unCheckedChildren:(0,N.formatMessage)({id:"app.activity.no"}),defaultChecked:!!v,onChange:this.onSwitch})),T.default.createElement(Y,{label:(0,N.formatMessage)({id:"app.activity.pic"})},T.default.createElement("div",null,!!m&&T.default.createElement("div",{className:"ant-upload-select-picture-card1",onMouseEnter:this.handleShowDelIcon.bind(this,0),onMouseLeave:this.handleShowDelIcon.bind(this,1),style:{cursor:"initial"}},T.default.createElement("img",{src:m}),this.state.showDelIcon&&T.default.createElement("div",{className:"delete__img"},T.default.createElement(c.default,{type:"delete",onClick:this.delImage,style:{cursor:"pointer"}}))),!m&&T.default.createElement("div",{className:"ant-upload-select-picture-card1"},t)))),T.default.createElement(A,(0,d.default)({},a,{label:(0,N.formatMessage)({id:"app.activity.activitytime"})}),L("rangeTimePicker",P)(T.default.createElement(Q,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",className:"width100"}))),T.default.createElement(A,(0,d.default)({},a,{label:(0,N.formatMessage)({id:"app.activity.url"})}),L("banner_link",{initialValue:y.banner_link||"",rules:[{required:!0,message:(0,N.formatMessage)({id:"app.activity.purl"})}]})(T.default.createElement(C.default,{placeholder:(0,N.formatMessage)({id:"app.activity.purl"})}))),T.default.createElement(A,(0,d.default)({},a,{label:(0,N.formatMessage)({id:"app.activity.url_ios"})}),L("banner_ios_link",{initialValue:y.banner_ios_link||"",rules:[{required:!0,message:(0,N.formatMessage)({id:"app.activity.purl"})}]})(T.default.createElement(C.default,{placeholder:(0,N.formatMessage)({id:"app.activity.purl"})}))),T.default.createElement(A,(0,d.default)({},a,{label:(0,N.formatMessage)({id:"app.activity.id"})}),L("sort",{initialValue:y.sort||""})(T.default.createElement(C.default,null))),T.default.createElement(A,(0,d.default)({},a,{label:(0,N.formatMessage)({id:"app.activity.status"})}),L("status",{initialValue:y.status||Object.keys(S)[1]})(T.default.createElement(x.default,null,Object.keys(S).map(function(e){return T.default.createElement(F,{value:e,key:e},S[e])})))),T.default.createElement(A,(0,d.default)({},a,{label:(0,N.formatMessage)({id:"app.activity.channel"})}),L("line_id",{initialValue:y.line_id||Object.keys(I)[0]})(T.default.createElement(x.default,null,Object.keys(I).map(function(e){return T.default.createElement(F,{value:e,key:e},I[e])})))),T.default.createElement(u.default,null,T.default.createElement(o.default,{span:12},T.default.createElement(A,(0,d.default)({},n,{label:(0,N.formatMessage)({id:"app.activity.channelAve"})}),L("line_percent",{})(T.default.createElement("div",{className:O.default.zanbi},T.default.createElement(l.default,{defaultValue:y.line_percent?"".concat(y.line_percent):"0",min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},onChange:this.onChangeNum}))))),T.default.createElement(o.default,{span:12},T.default.createElement(A,(0,d.default)({},n,{label:(0,N.formatMessage)({id:"app.activity.cate"})}),L("cate",{initialValue:y.cate||Object.keys(M)[0]})(T.default.createElement(x.default,{dropdownMenuStyle:{height:"120px",overflowY:"auto"}},Object.keys(M).map(function(e){return T.default.createElement(F,{key:e,value:e},M[e])}))))))))}}]),a}(T.default.Component),H=B))||H)||H),J=U;t.default=J},xkpq:function(e,t,a){e.exports={rightPagination:"antd-pro-pages-supply-content-rightPagination",breadcrumbBox:"antd-pro-pages-supply-content-breadcrumbBox",addBtn:"antd-pro-pages-supply-content-addBtn",btnBox:"antd-pro-pages-supply-content-btnBox",settingBox:"antd-pro-pages-supply-content-settingBox",fr:"antd-pro-pages-supply-content-fr",bt10:"antd-pro-pages-supply-content-bt10",dengerColor:"antd-pro-pages-supply-content-dengerColor",imageWidth:"antd-pro-pages-supply-content-imageWidth",aUpload:"antd-pro-pages-supply-content-aUpload",aUploadImg:"antd-pro-pages-supply-content-aUploadImg",btnSmt:"antd-pro-pages-supply-content-btnSmt",card:"antd-pro-pages-supply-content-card",zanbi:"antd-pro-pages-supply-content-zanbi","lan-wrap-label":"antd-pro-pages-supply-content-lan-wrap-label",tab_wrap:"antd-pro-pages-supply-content-tab_wrap",checked:"antd-pro-pages-supply-content-checked",list_error:"antd-pro-pages-supply-content-list_error"}},yyzq:function(e,t,a){"use strict";var n=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DjyN");var l=n(a("NUBc"));a("g9YV");var r=n(a("wCAj"));a("IzEo");var s=n(a("bx4M"));a("+L6B");var d=n(a("2/Rp"));a("14J3");var u=n(a("BMrR"));a("jCWc");var o=n(a("kPKH"));a("sPJy");var c=n(a("bE4q"));a("Pwec");var f=n(a("CtXQ"));a("miYZ");var p=n(a("tsqr"));a("2qtc");var m=n(a("kLXV")),g=n(a("eHn4")),h=n(a("2Taf")),v=n(a("vZ4D")),y=n(a("MhPg")),_=n(a("l4Ni")),E=n(a("ujKo"));a("y8nQ");var b=n(a("Vl3Y"));a("5NDa");var M=n(a("5rEg"));a("iQDF");var k=n(a("+eQT"));a("OaEy");var x,C,w,L,S=n(a("2fM7")),I=i(a("qEDA")),D=(a("+n12"),n(a("fqkP")),a("MuoO")),T=i(a("q1tI")),N=n(a("LvDl")),O=a("LLXN"),P=n(a("3a4m")),Y=(a("fPeI"),n(a("xkpq"))),H=n(a("NhZI"));function B(e){return function(){var t,a=(0,E.default)(e);if(j()){var n=(0,E.default)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,_.default)(this,t)}}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var z=S.default.Option,q=k.default.RangePicker,R=(M.default.Search,a("wd/R"));var V=(x=b.default.create(),C=(0,D.connect)(function(e){var t=e.activity,a=t.data,n=a.page,i=a.total_page,l=a.list,r=a.total_count,s=t.lineList,d=t.statusList,u=t.materialCateList,o=e.routing.location.pathname,c=e.memberInfo.data.keys;return{list:l,page:n,total_count:r,total_page:i,statusList:d,lineList:s,pathname:o,keys:c,materialCateList:u}}),x(w=C((L=function(e){(0,y.default)(a,e);var t=B(a);function a(e){var n,i;return(0,h.default)(this,a),i=t.call(this,e),i.SearchResetBtnHandle=function(){var e;i.state.pagination;i.props.form.resetFields(),i.setState({pagination:(e={page:1,page_size:20,type:"",status:"",name:"",id:""},(0,g.default)(e,"type",""),(0,g.default)(e,"line_id",""),(0,g.default)(e,"begin_time",""),(0,g.default)(e,"end_time",""),e),showModel:!1,modifyId:""},function(){i.updataConfiList()})},i.updataConfiList=function(){var e=i.props.dispatch,t=i.state.pagination;e({type:"activity/getList",payload:t})},i.onShowSizeChange=function(e,t){var a=i.state.pagination,n=N.default.merge({},a,{page_size:t});i.setState({pagination:n},function(){i.updataConfiList()})},i.handleTableChange=function(e){var t=i.state.pagination,a=N.default.merge({},t,{page:e});i.setState({pagination:a},function(){i.updataConfiList()})},i.closeModel=function(e){i.setState({showModel:!1,modifyId:""}),e&&i.updataConfiList()},i.openModel=function(e){return i.setState({showModel:!0,modifyId:e}),!1},i.isNum=function(e,t,a){var n=/^[0-9]+$/;t&&!n.test(t)?a((0,O.formatMessage)({id:"app.activity.isNum"})):a()},i.SearchBtnHandle=function(){var e=i.props.form,t=i.state.pagination;e.validateFields(function(e,a){if(!e){var n={page:1,page_size:20,begin_time:a.pushtime&&a.pushtime[0]?R(a.pushtime[0]).format("YYYY-MM-DD HH:mm:ss"):"",end_time:a.pushtime&&a.pushtime[0]?R(a.pushtime[1]).format("YYYY-MM-DD HH:mm:ss"):""};a.pushtime="";var l=N.default.merge({},t,a,n);i.setState({pagination:l},function(){i.updataConfiList()})}})},i.onChangeStatus=function(e,t){if(0!=t)return I.modifyStatus({status:t,id:e}).then(function(e){e.code?p.default.error(e.message):(p.default.success(e.message),i.updataConfiList())}),!1;m.default.confirm({title:(0,O.formatMessage)({id:"app.activity.tip"}),content:(0,O.formatMessage)({id:"app.activity.sureDown"}),okText:(0,O.formatMessage)({id:"app.activity.sure"}),cancelText:(0,O.formatMessage)({id:"app.activity.cancel"}),onOk:function(){I.modifyStatus({status:t,id:e}).then(function(e){e.code?p.default.error(e.message):(p.default.success(e.message),i.updataConfiList())})}})},i.handleDel=function(e,t){return 0==t?m.default.warn({title:(0,O.formatMessage)({id:"app.activity.tip"}),content:(0,O.formatMessage)({id:"app.activity.makesureNoDel"}),okText:(0,O.formatMessage)({id:"app.activity.iknow"})}):m.default.confirm({title:(0,O.formatMessage)({id:"app.activity.tip"}),content:(0,O.formatMessage)({id:"app.activity.sureDel"}),okText:(0,O.formatMessage)({id:"app.activity.sure"}),cancelText:(0,O.formatMessage)({id:"app.activity.cancel"}),onOk:function(){I.deleteMaterial({id:e}).then(function(e){e.code?p.default.error(e.message):(p.default.success(e.message),i.updataConfiList())})}}),!1},i.goSuppliesData=function(e,t){return P.default.push("/operation/activity/suppliesdata?id=".concat(e,"&line_id=").concat(t)),!1},i.state={languageList:[],pagination:(n={page:1,page_size:20,type:"",status:"",name:"",id:""},(0,g.default)(n,"type",""),(0,g.default)(n,"line_id",""),(0,g.default)(n,"begin_time",""),(0,g.default)(n,"end_time",""),n)},i}return(0,v.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"activity/getLineList"}),e({type:"activity/getStatusList"}),e({type:"activity/getMaterialCateList"}),this.updataConfiList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=(t.page,t.total_count),i=t.statusList,p=t.lineList,m=t.form.getFieldDecorator,g=(t.keys,t.pathname,t.materialCateList),h=(this.handleChangeCate,this.onShowSizeChange),v=(this.showModel,[{title:(0,O.formatMessage)({id:"app.activity.sucaiid"}),dataIndex:"id",key:"id"},{title:(0,O.formatMessage)({id:"app.activity.name"}),dataIndex:"name",key:"name",render:function(e,t){return T.default.createElement("div",null,T.default.createElement("span",null,e))}},{title:(0,O.formatMessage)({id:"app.activity.cate"}),dataIndex:"cate",key:"cate",render:function(e,t){return g[e]}},{title:(0,O.formatMessage)({id:"app.activity.activitytime"}),dataIndex:"source_name",key:"source_name",render:function(e,t){return T.default.createElement("div",null,T.default.createElement("p",null,(0,O.formatMessage)({id:"app.activity.start"}),"\uff1a",t.begin_time),T.default.createElement("p",null,(0,O.formatMessage)({id:"app.activity.end"}),"\uff1a",t.end_time))}},{title:(0,O.formatMessage)({id:"app.activity.status"}),dataIndex:"status",key:"status",render:function(e,t){return T.default.createElement("div",null,T.default.createElement("p",null,i[e]))}},{title:(0,O.formatMessage)({id:"app.activity.channel"}),dataIndex:"line_id",key:"line_id",render:function(e,t){return T.default.createElement("div",null,T.default.createElement("p",null,p[e]))}},{title:(0,O.formatMessage)({id:"app.activity.duty"}),dataIndex:"line_percent",key:"line_percent",render:function(e,t){return T.default.createElement("p",null,e,"%")}},{title:(0,O.formatMessage)({id:"app.activity.act"}),dataIndex:"act",key:"act",width:"200px",render:function(t,a){var n=Object.keys(i),l=n.filter(function(e){if(a.status!=e)return e});return T.default.createElement("p",{className:"active"},T.default.createElement("span",{onClick:e.onChangeStatus.bind(e,a["id"],l[0]),className:0==l[0]?"danger":null},i[l[0]]),T.default.createElement("span",{href:"javastript:;",onClick:e.openModel.bind(e,a["id"])},(0,O.formatMessage)({id:"app.activity.edit"})),T.default.createElement("span",{href:"javastript:;",className:"danger",onClick:e.handleDel.bind(e,a["id"],l[0])},(0,O.formatMessage)({id:"app.activity.del"})))}}]);return T.default.createElement("div",{className:"content-box"},T.default.createElement("style",null,"\n            .content-box .ant-form-vertical .ant-form-item{\n              padding-bottom: 0px;\n            }\n            .active span{\n              margin-left:6px;\n              text-decoration: none !important;\n              color:#1681d9;\n              cursor: pointer;\n            }\n            .active span.danger{\n              color:#ff4d4f\n            }\n          "),T.default.createElement("div",{className:Y.default.breadcrumbBox},T.default.createElement(c.default,null,T.default.createElement(c.default.Item,null,T.default.createElement(f.default,{type:"lock"}),T.default.createElement("span",null,(0,O.formatMessage)({id:"menu.operation"}))),T.default.createElement(c.default.Item,null,(0,O.formatMessage)({id:"menu.operation.activity"})))),T.default.createElement("div",{className:Y.default.addBtn},T.default.createElement(s.default,{title:(0,O.formatMessage)({id:"menu.operation.activity"}),className:Y.default.card,bordered:!0},T.default.createElement(b.default,{layout:"vertical",hideRequiredMark:!0},T.default.createElement(u.default,{gutter:16},T.default.createElement(o.default,{lg:6,md:12,sm:24},T.default.createElement(b.default.Item,{label:(0,O.formatMessage)({id:"app.activity.sucaiid"})},m("id",{rules:[{validator:this.isNum}]})(T.default.createElement(M.default,{placeholder:(0,O.formatMessage)({id:"app.activity.psucaiid"})})))),T.default.createElement(o.default,{lg:6,md:12,sm:24},T.default.createElement(b.default.Item,{label:(0,O.formatMessage)({id:"app.activity.pname"})},m("name")(T.default.createElement(M.default,{placeholder:(0,O.formatMessage)({id:"app.activity.name"})})))),T.default.createElement(o.default,{lg:12,md:12,sm:24},T.default.createElement(b.default.Item,{label:(0,O.formatMessage)({id:"app.activity.activitytime"})},m("pushtime")(T.default.createElement(q,{format:"YYYY-MM-DD HH:mm:ss",showTime:{hideDisabledOptions:!0,defaultValue:[R("00:00:00","HH:mm:ss"),R("11:59:59","HH:mm:ss")]},placeholder:[(0,O.formatMessage)({id:"app.activity.starttime"}),(0,O.formatMessage)({id:"app.activity.endtime"})],style:{width:"100%"}}))))),T.default.createElement(u.default,{gutter:16},T.default.createElement(o.default,{lg:6,md:12,sm:24},T.default.createElement(b.default.Item,{label:(0,O.formatMessage)({id:"app.activity.status"})},m("status",{initialValue:""})(T.default.createElement(S.default,null,T.default.createElement(z,{value:""},(0,O.formatMessage)({id:"app.activity.allstatus"})),Object.keys(i).map(function(e){return T.default.createElement(z,{key:e,value:e},i[e])}))))),T.default.createElement(o.default,{lg:6,md:12,sm:24},T.default.createElement(b.default.Item,{label:(0,O.formatMessage)({id:"app.activity.channel"})},m("line_id",{initialValue:""})(T.default.createElement(S.default,null,T.default.createElement(z,{value:""},(0,O.formatMessage)({id:"app.activity.allchannel"})),Object.keys(p).map(function(e){return T.default.createElement(z,{key:e,value:e},p[e])}))))),T.default.createElement(o.default,{lg:6,md:12,sm:24},T.default.createElement(b.default.Item,{label:(0,O.formatMessage)({id:"app.activity.cate"})},m("cate",{initialValue:""})(T.default.createElement(S.default,null,T.default.createElement(z,{value:""},(0,O.formatMessage)({id:"app.activity.allcate"})),Object.keys(g).map(function(e){return T.default.createElement(z,{key:e,value:e},g[e])}))))),T.default.createElement(o.default,{lg:6,md:12,sm:24},T.default.createElement(d.default,{type:"primary",className:Y.default.btnSmt,onClick:this.SearchBtnHandle},(0,O.formatMessage)({id:"app.content.search"})),T.default.createElement(d.default,{type:"primary",className:Y.default.btnSmt,onClick:this.openModel.bind(this,""),style:{marginLeft:"5px"}},(0,O.formatMessage)({id:"app.activity.add"}))))))),T.default.createElement(r.default,{columns:v,dataSource:a,pagination:!1,bordered:!0,rowKey:function(e,t){return"".concat(e.id).concat(t)},scroll:{x:2e3}}),T.default.createElement("div",{className:Y.default.rightPagination},T.default.createElement(l.default,{showTotal:function(e){return(0,O.formatMessage)({id:"app.glob.pagetotal"},{total:e})},pageSizeOptions:["20","30","40"],showSizeChanger:!0,onShowSizeChange:h,current:1,pageSize:20,onChange:this.handleTableChange,total:n})),this.state.showModel&&T.default.createElement(H.default,{onCallBack:this.closeModel,modifyId:this.state.modifyId}))}}]),a}(T.PureComponent),w=L))||w)||w),A=V;t.default=A}}]);